import{l as o,r as I,aq as O,a as u,e as p,ah as k,m as n,q as l,t as v,K as w,$ as b,F as h,L as K,E as _,M as q,u as y,ae as E,n as L}from"./vue.4dfaac09.js";const P={class:"layout-padding layout-padding-unset layout-iframe"},S={class:"layout-padding-auto layout-padding-view"},x=["src","data-url"],A=o({name:"layoutIframeView"}),F=o({...A,props:{refreshKey:{type:String,default:()=>""},name:{type:String,default:()=>"slide-right"},list:{type:Array,default:()=>[]}},setup(d){const i=d,m=I(),r=O(),g=u(()=>i.list.filter(a=>{var e;return(e=a.meta)==null?void 0:e.isIframeOpen})),c=u(()=>r.path),f=(a,e)=>{L(()=>{if(!m.value)return!1;m.value.forEach(s=>{s.dataset.url===a&&(s.onload=()=>{var t;(t=e.meta)!=null&&t.isIframeOpen&&e.meta.loading&&(e.meta.loading=!1)})})})};return p(()=>r.fullPath,a=>{const e=i.list.find(s=>s.path===a);if(!e)return!1;e.meta.isIframeOpen||(e.meta.isIframeOpen=!0),f(a,e)},{immediate:!0}),p(()=>i.refreshKey,()=>{const a=i.list.find(e=>e.path===r.path);if(!a)return!1;a.meta.isIframeOpen&&(a.meta.isIframeOpen=!1),setTimeout(()=>{a.meta.isIframeOpen=!0,a.meta.loading=!0,f(r.fullPath,a)})},{deep:!0}),(a,e)=>{const s=k("loading");return n(),l("div",P,[v("div",S,[(n(!0),l(w,null,b(y(g),t=>h((n(),l("div",{class:"w100",key:t.path,"element-loading-background":"white"},[K(E,{name:d.name},{default:_(()=>[h((n(),l("iframe",{src:t.meta.isLink,key:t.path,frameborder:"0",height:"100%",width:"100%",style:{position:"absolute"},"data-url":t.path,ref_for:!0,ref_key:"iframeRef",ref:m},null,8,x)),[[q,y(c)===t.path]])]),_:2},1032,["name"])])),[[s,t.meta.loading]])),128))])])}}});export{F as default};
