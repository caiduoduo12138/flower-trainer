import{aw as B,u as F}from"./index.0f5ebb0a.js";import{u as G}from"./dict.10eb31b5.js";import{p as N,a as P,g as Q}from"./message.4096306f.js";import{l as k,r as f,R as T,aa as r,ah as W,m as d,D as g,E as e,t as X,L as s,I as c,u as a,F as Y,q as L,K as q,$ as U,J as w,H as x,j as Z,n as ee}from"./vue.4dfaac09.js";const le={class:"dialog-footer"},ae=k({name:"SysMessageDialog"}),te=k({...ae,emits:["refresh"],setup(se,{expose:D,emit:j}){const R=j,b=f(),i=f(!1),n=f(!1),{yes_no_type:C,message_type:H}=G("yes_no_type","message_type"),l=T({id:"",category:"0",title:"",content:"",allFlag:"0",sort:0,userList:[]}),M=f({category:[{required:!0,message:"\u5206\u7C7B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],title:[{required:!0,message:"\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],content:[{required:!0,message:"\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],allFlag:[{required:!0,message:"\u5B9E\u65F6\u901A\u77E5\uFF080\u5426\uFF0C1\u662F\uFF09\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sort:[{required:!0,message:"\u6392\u5E8F \uFF08\u8D8A\u5927\u8D8A\u5728\u524D\uFF09\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),E=async()=>{if(!await b.value.validate().catch(()=>{}))return!1;try{n.value=!0,l.id?await N(l):await P(l),F().success(l.id?"\u4FEE\u6539\u6210\u529F":"\u6DFB\u52A0\u6210\u529F"),i.value=!1,R("refresh")}catch(u){F().error(u.msg)}finally{n.value=!1}},I=u=>{n.value=!0,Q(u).then(t=>{Object.assign(l,t.data)}).finally(()=>{n.value=!1})};return D({openDialog:u=>{i.value=!0,l.id="",l.content="",ee(()=>{var t;(t=b.value)==null||t.resetFields()}),u&&(l.id=u,I(u))}}),(u,t)=>{const y=r("el-radio"),V=r("el-radio-group"),m=r("el-form-item"),p=r("el-col"),J=r("el-input"),v=r("tip"),K=r("el-input-number"),O=r("editor"),S=r("el-row"),$=r("el-form"),h=r("el-button"),z=r("el-dialog"),A=W("loading");return d(),g(z,{title:a(l).id?"\u7F16\u8F91":"\u65B0\u589E",modelValue:a(i),"onUpdate:modelValue":t[7]||(t[7]=o=>Z(i)?i.value=o:null),"close-on-click-modal":!1,draggable:""},{footer:e(()=>[X("span",le,[s(h,{onClick:t[6]||(t[6]=o=>i.value=!1)},{default:e(()=>[c("\u53D6\u6D88")]),_:1}),s(h,{type:"primary",onClick:E,disabled:a(n)},{default:e(()=>[c("\u786E\u8BA4")]),_:1},8,["disabled"])])]),default:e(()=>[Y((d(),g($,{ref_key:"dataFormRef",ref:b,model:a(l),rules:a(M),formDialogRef:"","label-width":"90px"},{default:e(()=>[s(S,{gutter:24},{default:e(()=>[s(p,{span:12,class:"mb20"},{default:e(()=>[s(m,{label:"\u5206\u7C7B",prop:"category"},{default:e(()=>[s(V,{modelValue:a(l).category,"onUpdate:modelValue":t[0]||(t[0]=o=>a(l).category=o)},{default:e(()=>[(d(!0),L(q,null,U(a(H),(o,_)=>(d(),g(y,{key:_,label:o.value,border:""},{default:e(()=>[c(w(o.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),s(p,{span:12,class:"mb20"},{default:e(()=>[s(m,{label:"\u5168\u90E8\u901A\u77E5",prop:"allFlag"},{default:e(()=>[s(V,{modelValue:a(l).allFlag,"onUpdate:modelValue":t[1]||(t[1]=o=>a(l).allFlag=o)},{default:e(()=>[(d(!0),L(q,null,U(a(C),(o,_)=>(d(),g(y,{key:_,label:o.value,border:""},{default:e(()=>[c(w(o.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),s(p,{span:12,class:"mb20"},{default:e(()=>[s(m,{label:"\u6807\u9898",prop:"title"},{default:e(()=>[s(J,{modelValue:a(l).title,"onUpdate:modelValue":t[2]||(t[2]=o=>a(l).title=o),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898"},null,8,["modelValue"])]),_:1})]),_:1}),s(p,{span:12,class:"mb20"},{default:e(()=>[s(m,{prop:"sort"},{label:e(()=>[c("\u6392\u5E8F "),s(v,{content:"\u8D8A\u5927\u8D8A\u5728\u524D"})]),default:e(()=>[s(K,{modelValue:a(l).sort,"onUpdate:modelValue":t[3]||(t[3]=o=>a(l).sort=o),placeholder:"\u8BF7\u8F93\u5165\u6392\u5E8F \uFF08\u8D8A\u5927\u8D8A\u5728\u524D\uFF09"},null,8,["modelValue"])]),_:1})]),_:1}),a(l).allFlag!=="1"?(d(),g(p,{key:0,span:12,class:"mb20"},{default:e(()=>[s(m,{prop:"allFlag"},{label:e(()=>[c("\u8303\u56F4 "),s(v,{content:"\u4E0D\u9009\u7FA4\u53D1\u5168\u90E8"})]),default:e(()=>[s(B,{orgList:a(l).userList,"onUpdate:orgList":t[4]||(t[4]=o=>a(l).userList=o),type:"user",multiple:!0},null,8,["orgList"])]),_:1})]),_:1})):x("",!0),s(p,{span:24,class:"mb20"},{default:e(()=>[s(m,{label:"\u5185\u5BB9",prop:"content"},{default:e(()=>[a(i)?(d(),g(O,{key:0,"get-html":a(l).content,"onUpdate:getHtml":t[5]||(t[5]=o=>a(l).content=o),placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["get-html"])):x("",!0)]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[A,a(n)]])]),_:1},8,["title","modelValue"])}}});export{te as default};
