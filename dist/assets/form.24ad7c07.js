import{u as C}from"./dict.10eb31b5.js";import{d as E,r as n,u as _}from"./index.0f5ebb0a.js";import{p as J,a as K,b as O}from"./social.df48b0b4.js";import{l as U,r as b,R as z,aa as s,ah as G,m as f,D as V,E as t,t as H,L as r,I as y,J as x,u as e,F as M,q as N,K as P,$ as Q,j as W,n as X}from"./vue.4dfaac09.js";const Y={class:"dialog-footer"},Z=U({name:"AppSocialDetailsDialog"}),ee=U({...Z,emits:["refresh"],setup(ae,{expose:k,emit:I}){const T=I,{t:p}=E(),h=b(),u=b(!1),g=b(!1),{social_type:q}=C("social_type"),a=z({id:"",type:"",remark:"",appId:"",appSecret:"",redirectUrl:"",ext:""}),w=b({type:[{required:!0,message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],appId:[{validator:n.overLength,trigger:"blur"},{required:!0,message:"appId\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],remark:[{validator:n.overLength,trigger:"blur"},{required:!0,message:"\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],redirectUrl:[{validator:n.overLength,trigger:"blur"},{required:!0,message:"\u56DE\u8C03\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:n.url,trigger:"blur"}],appSecret:[{validator:n.overLength,trigger:"blur"},{required:!0,message:"appSecret\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),D=async()=>{var d,l;if(!await h.value.validate().catch(()=>{}))return!1;a.appSecret=(d=a.appSecret)!=null&&d.includes("******")?void 0:a.appSecret,a.appId=(l=a.appId)!=null&&l.includes("******")?void 0:a.appId;try{g.value=!0,a.id?(await J(a),_().success(p("common.editSuccessText"))):(await K(a),_().success(p("common.addSuccessText"))),u.value=!1,T("refresh")}catch(v){_().error(v.msg)}finally{g.value=!1}},L=d=>{O(d).then(l=>{Object.assign(a,l.data)})};return k({openDialog:d=>{u.value=!0,a.id="",X(()=>{var l;(l=h.value)==null||l.resetFields()}),d&&(a.id=d,L(d))}}),(d,l)=>{const v=s("el-option"),R=s("el-select"),i=s("el-form-item"),c=s("el-col"),m=s("el-input"),$=s("el-row"),B=s("el-form"),S=s("el-button"),A=s("el-dialog"),F=G("loading");return f(),V(A,{"close-on-click-modal":!1,title:e(a).id?d.$t("common.editBtn"):d.$t("common.addBtn"),draggable:"",modelValue:e(u),"onUpdate:modelValue":l[7]||(l[7]=o=>W(u)?u.value=o:null)},{footer:t(()=>[H("span",Y,[r(S,{onClick:l[6]||(l[6]=o=>u.value=!1)},{default:t(()=>[y(x(d.$t("common.cancelButtonText")),1)]),_:1}),r(S,{onClick:D,type:"primary",disabled:e(g)},{default:t(()=>[y(x(d.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:t(()=>[M((f(),V(B,{model:e(a),rules:e(w),formDialogRef:"","label-width":"90px",ref_key:"dataFormRef",ref:h},{default:t(()=>[r($,{gutter:20},{default:t(()=>[r(c,{span:12,class:"mb20"},{default:t(()=>[r(i,{label:e(p)("social.type"),prop:"type"},{default:t(()=>[r(R,{placeholder:e(p)("social.inputTypeTip"),modelValue:e(a).type,"onUpdate:modelValue":l[0]||(l[0]=o=>e(a).type=o)},{default:t(()=>[(f(!0),N(P,null,Q(e(q),(o,j)=>(f(),V(v,{key:j,label:o.label,value:o.value},{default:t(()=>[y(x(o.label),1)]),_:2},1032,["label","value"]))),128))]),_:1},8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),r(c,{span:12,class:"mb20"},{default:t(()=>[r(i,{label:e(p)("social.remark"),prop:"remark"},{default:t(()=>[r(m,{placeholder:e(p)("social.inputRemarkTip"),modelValue:e(a).remark,"onUpdate:modelValue":l[1]||(l[1]=o=>e(a).remark=o)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),r(c,{span:12,class:"mb20"},{default:t(()=>[r(i,{label:e(p)("social.appId"),prop:"appId"},{default:t(()=>[r(m,{placeholder:e(p)("social.inputAppIdTip"),modelValue:e(a).appId,"onUpdate:modelValue":l[2]||(l[2]=o=>e(a).appId=o)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),r(c,{span:12,class:"mb20"},{default:t(()=>[r(i,{label:e(p)("social.appSecret"),prop:"appSecret"},{default:t(()=>[r(m,{placeholder:e(p)("social.inputAppSecretTip"),modelValue:e(a).appSecret,"onUpdate:modelValue":l[3]||(l[3]=o=>e(a).appSecret=o)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),r(c,{span:24,class:"mb20"},{default:t(()=>[r(i,{label:e(p)("social.redirectUrl"),prop:"redirectUrl"},{default:t(()=>[r(m,{placeholder:e(p)("social.inputRedirectUrlTip"),type:"textarea",modelValue:e(a).redirectUrl,"onUpdate:modelValue":l[4]||(l[4]=o=>e(a).redirectUrl=o)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),r(c,{span:24,class:"mb20"},{default:t(()=>[r(i,{label:e(p)("social.ext"),prop:"ext"},{default:t(()=>[r(m,{placeholder:e(p)("social.inputExtTip"),type:"textarea",modelValue:e(a).ext,"onUpdate:modelValue":l[5]||(l[5]=o=>e(a).ext=o)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[F,e(g)]])]),_:1},8,["title","modelValue"])}}});export{ee as default};
