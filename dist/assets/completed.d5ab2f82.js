import{l as G,r as s,R as O,h as W,aa as r,ah as X,m as b,q as Z,t as v,F,M as ee,u as e,L as a,E as t,a0 as ae,I as k,J as w,j as f,D as H,A as le,H as te}from"./vue.4dfaac09.js";import{_ as re}from"./FlowNodeFormatData.vue_vue_type_script_setup_true_lang.d6a5f9c0.js";import oe from"./FormCreate.080cb3f5.js";import{b as se,c as ne}from"./index.72be8179.js";import{u as de}from"./table.6d12d51c.js";import{au as ie}from"./index.0f5ebb0a.js";import{p as ue}from"./formPermissions.b77839a8.js";import"./FlowNodeFormat.93ed98c9.js";const me={class:"layout-padding"},pe={class:"layout-padding-auto layout-padding-view"},ce={class:"mb8",style:{width:"100%"}},fe=G({__name:"completed",setup(he){const C=s([]),h=s(),m=s({}),d=O({pageList:se,queryForm:{taskTime:void 0}}),{tableStyle:_,getDataList:i,currentChangeHandle:N,sortChangeHandle:ye,sizeChangeHandle:U}=de(d),u=s(!1),x=s(!1),p=s(!0),T=s(),c=s(),z=s(),D=()=>{T.value.resetFields(),i()};return W(()=>{i()}),(I,o)=>{const L=r("el-date-picker"),V=r("el-form-item"),y=r("el-button"),R=r("el-form"),S=r("el-row"),Y=r("right-toolbar"),n=r("el-table-column"),M=r("el-table"),B=r("pagination"),E=r("el-card"),J=r("el-drawer"),K=X("loading");return b(),Z("div",me,[v("div",pe,[F(a(S,{shadow:"hover",class:"ml10"},{default:t(()=>[a(R,{model:e(d).queryForm,ref_key:"queryRef",ref:T,inline:!0,onKeyup:ae(e(i),["enter"])},{default:t(()=>[a(V,{label:"\u53D1\u8D77\u65F6\u95F4",prop:"taskTime"},{default:t(()=>[a(L,{type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss",modelValue:e(d).queryForm.taskTime,"onUpdate:modelValue":o[0]||(o[0]=l=>e(d).queryForm.taskTime=l),"is-range":"","range-separator":"To"},null,8,["modelValue"])]),_:1}),a(V,null,{default:t(()=>[a(y,{icon:"search",type:"primary",onClick:e(i)},{default:t(()=>[k(w(I.$t("common.queryBtn")),1)]),_:1},8,["onClick"]),a(y,{icon:"Refresh",onClick:D},{default:t(()=>[k(w(I.$t("common.resetBtn")),1)]),_:1})]),_:1})]),_:1},8,["model","onKeyup"])]),_:1},512),[[ee,e(p)]]),a(S,null,{default:t(()=>[v("div",ce,[a(Y,{showSearch:e(p),"onUpdate:showSearch":o[1]||(o[1]=l=>f(p)?p.value=l:null),class:"ml10",style:{float:"right","margin-right":"20px"},onQueryTable:e(i)},null,8,["showSearch","onQueryTable"])])]),_:1}),F((b(),H(M,{ref:"dataTableRef",data:e(d).dataList,"highlight-current-row":"",border:"","cell-style":e(_).cellStyle,"header-cell-style":e(_).headerCellStyle},{default:t(()=>[a(n,{label:"\u5206\u7EC4",prop:"groupName",width:"100"}),a(n,{label:"\u6D41\u7A0B",prop:"processName"}),a(n,{label:"\u53D1\u8D77\u4EBA",prop:"rootUserName"}),a(n,{label:"\u53D1\u8D77\u65F6\u95F4",prop:"startTime"}),a(n,{label:"\u4EFB\u52A1\u540D\u79F0",prop:"taskName"}),a(n,{label:"\u4EFB\u52A1\u5F00\u59CB\u65F6\u95F4",prop:"taskCreateTime"}),a(n,{label:"\u4EFB\u52A1\u7ED3\u675F\u65F6\u95F4",prop:"taskEndTime"}),a(n,{fixed:"right",label:"\u64CD\u4F5C",width:"200"},{default:t(l=>[a(y,{type:"primary",size:"small",link:"",icon:"View",onClick:ge=>{return g=l.row,c.value=g,void ne(g.taskId,!0).then(Q=>{const{formItems:q,formPerms:$,formData:j}=Q.data,A=ie.formCreate.parseJson(q),P=ue(A,$);C.value=P,m.value=j,z.value=q,u.value=!0});var g}},{default:t(()=>[k(" \u67E5\u770B ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","cell-style","header-cell-style"])),[[K,e(x)]]),a(B,le({onCurrentChange:e(N),onSizeChange:e(U)},e(d).pagination),null,16,["onCurrentChange","onSizeChange"])]),e(u)?(b(),H(J,{key:0,modelValue:e(u),"onUpdate:modelValue":o[4]||(o[4]=l=>f(u)?u.value=l:null),direction:"rtl",size:"600px"},{header:t(()=>{var l;return[v("h3",null,w((l=e(c))==null?void 0:l.processName),1)]}),default:t(()=>[a(E,{class:"box-card"},{default:t(()=>[a(oe,{rule:e(C),modelValue:e(m),"onUpdate:modelValue":o[2]||(o[2]=l=>f(m)?m.value=l:null),api:e(h),"onUpdate:api":o[3]||(o[3]=l=>f(h)?h.value=l:null)},null,8,["rule","modelValue","api"])]),_:1}),a(re,{disableSelect:!0,processInstanceId:e(c).processInstanceId,"flow-id":e(c).flowId,ref:"flowNodeFormatRef"},null,8,["processInstanceId","flow-id"])]),_:1},8,["modelValue"])):te("",!0)])}}});export{fe as default};
