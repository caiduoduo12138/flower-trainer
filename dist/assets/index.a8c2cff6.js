import{d as P,V as O,y as G,u as N,b as W,__tla as X}from"./index.0f5ebb0a.js";import{l as B,r as f,R as Y,aa as r,ah as Z,m as F,q as ee,t as R,F as L,M as ae,u as e,L as a,E as t,a0 as le,I as u,J as m,j as oe,D as te,A as ne,av as re}from"./vue.4dfaac09.js";import{u as se}from"./table.6d12d51c.js";import{f as de,d as ie}from"./datasource.a0355933.js";let V,ce=Promise.all([(()=>{try{return X}catch{}})()]).then(async()=>{let b,g,w,C;b={class:"layout-padding"},g={class:"layout-padding-auto layout-padding-view"},w={class:"mb8",style:{width:"100%"}},C=B({name:"systemDatasourceConf"}),V=B({...C,setup(ue){const z=re(()=>W(()=>import("./form.87479e2a.js"),["assets/form.87479e2a.js","assets/index.0f5ebb0a.js","assets/vue.4dfaac09.js","assets/index.3d43c53c.css","assets/datasource.a0355933.js","assets/dict.10eb31b5.js"])),{t:s}=P(),h=f(),v=f(),y=f(!0),k=f([]),$=f(!0),i=Y({queryForm:{},pageList:de,descs:["create_time"]}),{getDataList:p,currentChangeHandle:E,sizeChangeHandle:j,tableStyle:S}=se(i),A=()=>{v.value.resetFields(),p()},H=l=>{k.value=l.map(({id:o})=>o),$.value=!l.length},T=async l=>{try{await G().confirm(s("common.delConfirmText"))}catch{return}try{await ie(l),p(),N().success(s("common.delSuccessText"))}catch(o){N().error(o.msg)}};return(l,o)=>{const I=r("el-input"),x=r("el-form-item"),c=r("el-button"),K=r("el-form"),q=r("el-row"),Q=r("right-toolbar"),d=r("el-table-column"),U=r("el-table"),J=r("pagination"),M=Z("loading");return F(),ee("div",b,[R("div",g,[L(a(q,{class:"ml10"},{default:t(()=>[a(K,{inline:!0,model:e(i).queryForm,onKeyup:le(e(p),["enter"]),ref_key:"queryRef",ref:v},{default:t(()=>[a(x,{label:l.$t("datasourceconf.dsName"),prop:"dsName"},{default:t(()=>[a(I,{placeholder:l.$t("datasourceconf.inputdsNameTip"),modelValue:e(i).queryForm.dsName,"onUpdate:modelValue":o[0]||(o[0]=n=>e(i).queryForm.dsName=n)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),a(x,null,{default:t(()=>[a(c,{onClick:e(p),icon:"search",type:"primary"},{default:t(()=>[u(m(l.$t("common.queryBtn")),1)]),_:1},8,["onClick"]),a(c,{onClick:A,icon:"Refresh"},{default:t(()=>[u(m(l.$t("common.resetBtn")),1)]),_:1})]),_:1})]),_:1},8,["model","onKeyup"])]),_:1},512),[[ae,e(y)]]),a(q,null,{default:t(()=>[R("div",w,[a(c,{onClick:o[1]||(o[1]=n=>e(h).openDialog()),class:"ml10",icon:"folder-add",type:"primary"},{default:t(()=>[u(m(l.$t("common.addBtn")),1)]),_:1}),a(c,{disabled:e($),onClick:o[2]||(o[2]=n=>T(e(k))),class:"ml10",icon:"Delete",type:"primary"},{default:t(()=>[u(m(l.$t("common.delBtn")),1)]),_:1},8,["disabled"]),a(Q,{onQueryTable:e(p),class:"ml10",style:{float:"right","margin-right":"20px"},showSearch:e(y),"onUpdate:showSearch":o[3]||(o[3]=n=>oe(y)?y.value=n:null)},null,8,["onQueryTable","showSearch"])])]),_:1}),L((F(),te(U,{data:e(i).dataList,onSelectionChange:H,style:{width:"100%"},border:"","cell-style":e(S).cellStyle,"header-cell-style":e(S).headerCellStyle},{default:t(()=>[a(d,{align:"center",type:"selection",width:"40"}),a(d,{label:e(s)("datasourceconf.index"),type:"index",width:"60"},null,8,["label"]),a(d,{label:e(s)("datasourceconf.name"),prop:"name","show-overflow-tooltip":""},null,8,["label"]),a(d,{label:e(s)("datasourceconf.dsName"),prop:"dsName","show-overflow-tooltip":""},null,8,["label"]),a(d,{label:e(s)("datasourceconf.dsType"),prop:"dsType","show-overflow-tooltip":""},null,8,["label"]),a(d,{label:e(s)("datasourceconf.username"),prop:"username","show-overflow-tooltip":""},null,8,["label"]),a(d,{label:e(s)("datasourceconf.createTime"),prop:"createTime","show-overflow-tooltip":""},null,8,["label"]),a(d,{label:l.$t("common.action"),width:"250"},{default:t(n=>[a(c,{icon:"document",onClick:D=>{return _=n.row.name,void O("/gen/dsconf/doc",{dsName:_},`${_}.html`);var _},text:"",type:"primary"},{default:t(()=>[u(m(l.$t("datasourceconf.docBtn")),1)]),_:2},1032,["onClick"]),a(c,{icon:"edit",onClick:D=>e(h).openDialog(n.row.id),text:"",type:"primary"},{default:t(()=>[u(m(l.$t("common.editBtn")),1)]),_:2},1032,["onClick"]),a(c,{icon:"delete",onClick:D=>T([n.row.id]),text:"",type:"primary"},{default:t(()=>[u(m(l.$t("common.delBtn")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data","cell-style","header-cell-style"])),[[M,e(i).loading]]),a(J,ne({onCurrentChange:e(E),onSizeChange:e(j)},e(i).pagination),null,16,["onCurrentChange","onSizeChange"])]),a(e(z),{onRefresh:o[4]||(o[4]=n=>e(p)()),ref_key:"formDialogRef",ref:h},null,512)])}}})});export{ce as __tla,V as default};
