import{u as G}from"./dict.10eb31b5.js";import{d as H,r as y,u as U}from"./index.0f5ebb0a.js";import{v as M,a as Q,p as W,b as X,g as Y}from"./param.d406b13c.js";import{l as q,r as h,R as x,aa as o,ah as Z,m as i,D as g,E as t,t as ee,L as r,I as v,J as V,u as e,F as ae,q as T,K as C,$ as F,j as le,n as ue}from"./vue.4dfaac09.js";const te={class:"dialog-footer"},re=q({name:"SysPublicParamDialog"}),de=q({...re,emits:["refresh"],setup(pe,{expose:N,emit:w}){const $=w,{t:p}=H(),_=h(),c=h(!1),f=h(!1),{dict_type:B,status_type:D,param_type:L}=G("dict_type","status_type","param_type"),l=x({publicId:"",publicName:"",publicKey:"",publicValue:"",status:"0",validateCode:"",publicType:"0",systemFlag:"0"}),R=x({publicName:[{validator:y.overLength,trigger:"blur"},{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:(d,a,s)=>{M(d,a,s,l.publicId!=="")},trigger:"blur"}],publicKey:[{validator:y.overLength,trigger:"blur"},{required:!0,message:"\u53C2\u6570\u952E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:y.validatorCapital,trigger:"blur"},{validator:(d,a,s)=>{Q(d,a,s,l.publicId!=="")},trigger:"blur"}],publicValue:[{validator:y.overLength,trigger:"blur"},{required:!0,message:"\u53C2\u6570\u503C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],status:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],publicType:[{required:!0,message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],systemFlag:[{required:!0,message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),S=async()=>{if(!await _.value.validate().catch(()=>{}))return!1;try{f.value=!0,l.publicId?await W(l):await X(l),U().success(p(l.publicId?"common.editSuccessText":"common.addSuccessText")),c.value=!1,$("refresh")}catch(d){U().error(d.msg)}finally{f.value=!1}},j=d=>{Y(d).then(a=>{Object.assign(l,a.data)})};return N({openDialog:d=>{c.value=!0,l.publicId="",ue(()=>{var a;(a=_.value)==null||a.resetFields()}),d&&(l.publicId=d,j(d))}}),(d,a)=>{const s=o("el-input"),m=o("el-form-item"),b=o("el-col"),I=o("el-radio"),K=o("el-radio-group"),P=o("el-option"),E=o("el-select"),J=o("el-row"),O=o("el-form"),k=o("el-button"),z=o("el-dialog"),A=Z("loading");return i(),g(z,{"close-on-click-modal":!1,title:e(l).publicId?d.$t("common.editBtn"):d.$t("common.addBtn"),draggable:"",modelValue:e(c),"onUpdate:modelValue":a[8]||(a[8]=u=>le(c)?c.value=u:null)},{footer:t(()=>[ee("span",te,[r(k,{onClick:a[7]||(a[7]=u=>c.value=!1)},{default:t(()=>[v(V(d.$t("common.cancelButtonText")),1)]),_:1}),r(k,{onClick:S,type:"primary",disabled:e(f)},{default:t(()=>[v(V(d.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:t(()=>[ae((i(),g(O,{model:e(l),rules:e(R),formDialogRef:"","label-width":"90px",ref_key:"dataFormRef",ref:_},{default:t(()=>[r(J,{gutter:20},{default:t(()=>[r(b,{span:12,class:"mb20"},{default:t(()=>[r(m,{label:e(p)("param.publicName"),prop:"publicName"},{default:t(()=>[r(s,{placeholder:e(p)("param.inputpublicNameTip"),modelValue:e(l).publicName,"onUpdate:modelValue":a[0]||(a[0]=u=>e(l).publicName=u)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),r(b,{span:12,class:"mb20"},{default:t(()=>[r(m,{label:e(p)("param.publicKey"),prop:"publicKey"},{default:t(()=>[r(s,{placeholder:e(p)("param.inputpublicKeyTip"),modelValue:e(l).publicKey,"onUpdate:modelValue":a[1]||(a[1]=u=>e(l).publicKey=u)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),r(b,{span:12,class:"mb20"},{default:t(()=>[r(m,{label:e(p)("param.publicValue"),prop:"publicValue"},{default:t(()=>[r(s,{placeholder:e(p)("param.inputpublicValueTip"),modelValue:e(l).publicValue,"onUpdate:modelValue":a[2]||(a[2]=u=>e(l).publicValue=u)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),r(b,{span:12,class:"mb20"},{default:t(()=>[r(m,{label:e(p)("param.status"),prop:"status"},{default:t(()=>[r(K,{modelValue:e(l).status,"onUpdate:modelValue":a[3]||(a[3]=u=>e(l).status=u)},{default:t(()=>[(i(!0),T(C,null,F(e(D),(u,n)=>(i(),g(I,{label:u.value,border:"",key:n},{default:t(()=>[v(V(u.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),r(b,{span:12,class:"mb20"},{default:t(()=>[r(m,{label:e(p)("param.validateCode"),prop:"validateCode"},{default:t(()=>[r(s,{placeholder:e(p)("param.inputvalidateCodeTip"),modelValue:e(l).validateCode,"onUpdate:modelValue":a[4]||(a[4]=u=>e(l).validateCode=u)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),r(b,{span:12,class:"mb20"},{default:t(()=>[r(m,{label:e(p)("param.publicType"),prop:"publicType"},{default:t(()=>[r(E,{placeholder:e(p)("param.inputpublicTypeTip"),modelValue:e(l).publicType,"onUpdate:modelValue":a[5]||(a[5]=u=>e(l).publicType=u)},{default:t(()=>[(i(!0),T(C,null,F(e(L),(u,n)=>(i(),g(P,{key:n,label:u.label,value:u.value},null,8,["label","value"]))),128))]),_:1},8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),r(b,{span:12,class:"mb20"},{default:t(()=>[r(m,{label:e(p)("param.systemFlag"),prop:"systemFlag"},{default:t(()=>[r(K,{modelValue:e(l).systemFlag,"onUpdate:modelValue":a[6]||(a[6]=u=>e(l).systemFlag=u)},{default:t(()=>[(i(!0),T(C,null,F(e(B),(u,n)=>(i(),g(I,{label:u.value,border:"",key:n},{default:t(()=>[v(V(u.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[A,e(f)]])]),_:1},8,["title","modelValue"])}}});export{de as default};
