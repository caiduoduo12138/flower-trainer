import{d as F,u as V}from"./index.0f5ebb0a.js";import{p as R,a as j,g as C}from"./group.28f0bda4.js";import{l as E}from"./template.7498b27b.js";import{l as y,r as m,R as S,aa as d,ah as J,m as c,D as h,E as r,t as K,L as u,I as D,J as x,u as a,F as O,q as z,K as A,$ as H,j as M,n as P}from"./vue.4dfaac09.js";const Q={class:"dialog-footer"},W=y({name:"GenGroupDialog"}),X=y({...W,emits:["refresh"],setup(Y,{expose:I,emit:_}){const N=_,{t:s}=F(),g=m(),p=m(!1),i=m(!1),b=m([]),e=S({id:"",groupName:"",groupDesc:"",templateId:[],putList:[]}),T=m({groupName:[{required:!0,message:"\u5206\u7EC4\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],templateId:[{required:!0,message:"\u6A21\u677F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),$=async()=>{if(!await g.value.validate().catch(()=>{}))return!1;try{i.value=!0,e.id?await R(e):await j(e),V().success(s(e.id?"common.editSuccessText":"common.addSuccessText")),p.value=!1,N("refresh")}catch(l){V().error(l.msg)}finally{i.value=!1}},w=l=>{C(l).then(t=>{Object.assign(e,t.data),e.templateId=[],t.data.templateList&&t.data.templateList.forEach(n=>{e.templateId.push(n.id)})})},k=()=>{E().then(l=>{b.value=l.data})};return I({openDialog:l=>{p.value=!0,e.id="",P(()=>{g.value.resetFields()}),l&&(e.id=l,w(l)),k()}}),(l,t)=>{const n=d("el-input"),f=d("el-form-item"),B=d("el-option"),G=d("el-select"),L=d("el-form"),v=d("el-button"),U=d("el-dialog"),q=J("loading");return c(),h(U,{modelValue:a(p),"onUpdate:modelValue":t[4]||(t[4]=o=>M(p)?p.value=o:null),title:a(e).id?l.$t("common.editBtn"):l.$t("common.addBtn"),width:"600"},{footer:r(()=>[K("span",Q,[u(v,{onClick:t[3]||(t[3]=o=>p.value=!1)},{default:r(()=>[D(x(l.$t("common.cancelButtonText")),1)]),_:1}),u(v,{type:"primary",onClick:$,disabled:a(i)},{default:r(()=>[D(x(l.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:r(()=>[O((c(),h(L,{ref_key:"dataFormRef",ref:g,model:a(e),rules:a(T),formDialogRef:"","label-width":"90px"},{default:r(()=>[u(f,{label:a(s)("group.groupName"),prop:"groupName"},{default:r(()=>[u(n,{modelValue:a(e).groupName,"onUpdate:modelValue":t[0]||(t[0]=o=>a(e).groupName=o),placeholder:a(s)("group.inputGroupNameTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),u(f,{label:l.$t("group.templateType"),prop:"templateId"},{default:r(()=>[u(G,{modelValue:a(e).templateId,"onUpdate:modelValue":t[1]||(t[1]=o=>a(e).templateId=o),placeholder:l.$t("group.selectType"),clearable:"",multiple:""},{default:r(()=>[(c(!0),z(A,null,H(a(b),o=>(c(),h(B,{key:o.id,label:o.templateName,value:o.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),u(f,{label:a(s)("group.groupDesc"),prop:"groupDesc"},{default:r(()=>[u(n,{type:"textarea",maxlength:"100",rows:5,modelValue:a(e).groupDesc,"onUpdate:modelValue":t[2]||(t[2]=o=>a(e).groupDesc=o),placeholder:a(s)("group.inputGroupDescTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[q,a(i)]])]),_:1},8,["modelValue","title"])}}});export{X as default};
