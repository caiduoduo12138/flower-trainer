import{S as $}from"./sortable.esm.71d81605.js";import{_ as k}from"./index.0f5ebb0a.js";import{aa as l,m as s,q as S,L as d,E as t,I as b,J as g,D as i,t as p,y as T,H as x,x as D}from"./vue.4dfaac09.js";const A={props:{modelValue:{type:Array,default:()=>[]},addTemplate:{type:Object,default:()=>{}},placeholder:{type:String,default:"\u6682\u65E0\u6570\u636E"},dragSort:{type:Boolean,default:!1},hideAdd:{type:Boolean,default:!1},hideDelete:{type:Boolean,default:!1}},data:()=>({data:[]}),mounted(){this.data=this.modelValue,this.dragSort&&this.rowDrop()},watch:{modelValue(){this.data=this.modelValue},data:{handler(){this.$emit("update:modelValue",this.data)},deep:!0}},methods:{rowDrop(){const e=this,o=this.$refs.table.$el.querySelector(".el-table__body-wrapper tbody");$.create(o,{handle:".move",animation:300,ghostClass:"ghost",onEnd({newIndex:a,oldIndex:h}){e.data.splice(a,0,e.data.splice(h,1)[0]);const n=e.data.slice(0),r=e.$refs.scFormTable.offsetHeight;e.$refs.scFormTable.style.setProperty("height",r+"px"),e.data=[],e.$nextTick(()=>{e.data=n,e.$nextTick(()=>{e.$refs.scFormTable.style.removeProperty("height")})})}})},rowAdd(){const e=JSON.parse(JSON.stringify(this.addTemplate));this.data.push(e)},rowDel(e,o){this.data.splice(o,1),this.$emit("delete",e)},pushRow(e){const o=e||JSON.parse(JSON.stringify(this.addTemplate));this.data.push(o)},deleteRow(e){this.data.splice(e,1)}}},C={class:"form-table",ref:"scFormTable"},F={class:"move",style:{cursor:"move"}},J=k(A,[["render",function(e,o,a,h,n,r){const m=l("el-button"),f=l("el-tooltip"),u=l("el-table-column"),w=l("WarningFilled"),y=l("el-icon"),v=l("Sort"),_=l("el-table");return s(),S("div",C,[d(_,{data:n.data,ref:"table",border:"",stripe:"","cell-style":{textAlign:"center"},"header-cell-style":{textAlign:"center",background:"var(--el-table-row-hover-bg-color)",color:"var(--el-text-color-primary)"}},{empty:t(()=>[b(g(a.placeholder),1)]),default:t(()=>[d(u,{type:"index",width:"50",fixed:"left"},{header:t(()=>[a.hideAdd?(s(),i(f,{key:1,content:"\u5E8F\u53F7",placement:"top"},{default:t(()=>[b(" # ")]),_:1})):(s(),i(m,{key:0,type:"primary",icon:"el-icon-plus",size:"small",circle:"",onClick:r.rowAdd},null,8,["onClick"]))]),default:t(c=>[p("div",{class:T(["form-table-handle",{"form-table-handle-delete":!a.hideDelete}])},[p("span",null,g(c.$index+1),1),a.hideDelete?x("",!0):(s(),i(m,{key:0,type:"danger",icon:"el-icon-delete",size:"small",plain:"",circle:"",onClick:O=>r.rowDel(c.row,c.$index)},null,8,["onClick"]))],2)]),_:1}),a.dragSort?(s(),i(u,{key:0,label:"",width:"50"},{header:t(()=>[d(y,null,{default:t(()=>[d(f,{content:"\u62D6\u52A8\u6392\u5E8F",placement:"top"},{default:t(()=>[d(w)]),_:1})]),_:1})]),default:t(()=>[p("div",F,[d(y,null,{default:t(()=>[d(v)]),_:1})])]),_:1})):x("",!0),D(e.$slots,"default",{},void 0,!0)]),_:3},8,["data","header-cell-style"])],512)}],["__scopeId","data-v-8a3cf01a"]]);export{J as default};
