import{l as G,r as s,R as O,h as W,aa as r,ah as X,m as d,q as Z,t as T,F as D,M as ee,u as e,L as a,E as t,a0 as ae,D as p,I as c,J as F,j as _,A as le,H as te}from"./vue.4dfaac09.js";import{_ as oe}from"./FlowNodeFormatData.vue_vue_type_script_setup_true_lang.d6a5f9c0.js";import{g as re,s as se}from"./index.72be8179.js";import{s as ne,au as R}from"./index.0f5ebb0a.js";import{u as de}from"./table.6d12d51c.js";import{p as ue}from"./formPermissions.b77839a8.js";import ie from"./FormCreate.080cb3f5.js";import"./FlowNodeFormat.93ed98c9.js";const me={class:"layout-padding"},pe={class:"layout-padding-auto layout-padding-view"},ce={class:"mb8",style:{width:"100%"}},fe=G({__name:"started",setup(he){const q=s([]),C=s(),g=s({}),f=s(!1),L=s(!1),b=s(!0),S=s(),n=O({pageList:re,queryForm:{taskTime:void 0,status:1}}),{tableStyle:z,getDataList:u,currentChangeHandle:Y,sortChangeHandle:ye,sizeChangeHandle:B}=de(n),k=s(),J=h=>{var o;k.value=h,(o={processInstanceId:h.processInstanceId},ne({url:"/task/process-instance/detail",method:"get",params:o})).then(w=>{const{formItems:v,formPerms:y,formData:I}=w.data,i=R.formCreate.parseJson(v),V=ue(i,y);q.value=V,g.value=R.formCreate.parseJson(I),M.value=v,f.value=!0})},M=s(),A=()=>{S.value.resetFields(),u()};return W(()=>{u()}),(h,o)=>{const w=r("el-option"),v=r("el-select"),y=r("el-form-item"),I=r("el-date-picker"),i=r("el-button"),V=r("el-form"),H=r("el-row"),K=r("right-toolbar"),m=r("el-table-column"),U=r("el-tag"),N=r("el-table"),P=r("pagination"),Q=r("el-card"),$=r("el-drawer"),j=X("loading");return d(),Z("div",me,[T("div",pe,[D(a(H,{shadow:"hover",class:"ml10"},{default:t(()=>[a(V,{model:e(n).queryForm,ref_key:"queryRef",ref:S,inline:!0,onKeyup:ae(e(u),["enter"])},{default:t(()=>[a(y,{label:"\u72B6\u6001",prop:"status"},{default:t(()=>[a(v,{modelValue:e(n).queryForm.status,"onUpdate:modelValue":o[0]||(o[0]=l=>e(n).queryForm.status=l),placeholder:"\u8BF7\u9009\u62E9\u72B6\u6001"},{default:t(()=>[(d(),p(w,{key:1,label:"\u8FDB\u884C\u4E2D",value:1})),(d(),p(w,{key:2,label:"\u5DF2\u7ED3\u675F",value:2}))]),_:1},8,["modelValue"])]),_:1}),a(y,{label:"\u53D1\u8D77\u65F6\u95F4",prop:"taskTime"},{default:t(()=>[a(I,{type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss",modelValue:e(n).queryForm.taskTime,"onUpdate:modelValue":o[1]||(o[1]=l=>e(n).queryForm.taskTime=l),"is-range":"","range-separator":"To"},null,8,["modelValue"])]),_:1}),a(y,null,{default:t(()=>[a(i,{icon:"search",type:"primary",onClick:e(u)},{default:t(()=>[c(F(h.$t("common.queryBtn")),1)]),_:1},8,["onClick"]),a(i,{icon:"Refresh",onClick:A},{default:t(()=>[c(F(h.$t("common.resetBtn")),1)]),_:1})]),_:1})]),_:1},8,["model","onKeyup"])]),_:1},512),[[ee,e(b)]]),a(H,null,{default:t(()=>[T("div",ce,[a(K,{showSearch:e(b),"onUpdate:showSearch":o[2]||(o[2]=l=>_(b)?b.value=l:null),class:"ml10",style:{float:"right","margin-right":"20px"},onQueryTable:e(u)},null,8,["showSearch","onQueryTable"])])]),_:1}),D((d(),p(N,{ref:"dataTableRef",data:e(n).dataList,"highlight-current-row":"",border:"","cell-style":e(z).cellStyle,"header-cell-style":e(z).headerCellStyle},{default:t(()=>[a(m,{label:"\u5206\u7EC4",prop:"groupName",width:"100"}),a(m,{label:"\u6D41\u7A0B",prop:"name",width:"150"}),a(m,{label:"\u53D1\u8D77\u65F6\u95F4",prop:"createTime",width:"200"}),a(m,{label:"\u7ED3\u675F\u65F6\u95F4",prop:"endTime",width:"200"}),a(m,{label:"\u72B6\u6001",prop:"taskCreateTime",width:"100"},{default:t(l=>[l.row.status==1?(d(),p(U,{key:0,type:"success"},{default:t(()=>[c("\u8FDB\u884C\u4E2D")]),_:1})):(d(),p(U,{key:1},{default:t(()=>[c("\u5DF2\u7ED3\u675F")]),_:1}))]),_:1}),a(m,{fixed:"right",label:"\u64CD\u4F5C"},{default:t(l=>[a(i,{type:"primary",size:"small",link:"",icon:"View",onClick:E=>J(l.row)},{default:t(()=>[c(" \u67E5\u770B ")]),_:2},1032,["onClick"]),a(i,{disabled:l.row.status!=1,type:"primary",size:"small",link:"",icon:"VideoPause",onClick:E=>{return x=l.row,void se({processInstanceId:x.processInstanceId}).then(ge=>{u()});var x}},{default:t(()=>[c(" \u7EC8\u6B62\u6D41\u7A0B ")]),_:2},1032,["disabled","onClick"])]),_:1})]),_:1},8,["data","cell-style","header-cell-style"])),[[j,e(L)]]),a(P,le({onCurrentChange:e(Y),onSizeChange:e(B)},e(n).pagination),null,16,["onCurrentChange","onSizeChange"]),e(f)?(d(),p($,{key:0,modelValue:e(f),"onUpdate:modelValue":o[5]||(o[5]=l=>_(f)?f.value=l:null),direction:"rtl",size:"600px"},{header:t(()=>{var l;return[T("h3",null,F((l=e(k))==null?void 0:l.name),1)]}),default:t(()=>[a(Q,{class:"box-card"},{default:t(()=>[a(ie,{rule:e(q),modelValue:e(g),"onUpdate:modelValue":o[3]||(o[3]=l=>_(g)?g.value=l:null),api:e(C),"onUpdate:api":o[4]||(o[4]=l=>_(C)?C.value=l:null)},null,8,["rule","modelValue","api"])]),_:1}),a(oe,{disableSelect:!0,processInstanceId:e(k).processInstanceId,"flow-id":e(k).flowId,ref:"flowNodeFormatRef"},null,8,["processInstanceId","flow-id"])]),_:1},8,["modelValue"])):te("",!0)])])}}});export{fe as default};
