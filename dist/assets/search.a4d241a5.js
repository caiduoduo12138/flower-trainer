import{l as x,d as I,_ as Q}from"./index.0f5ebb0a.js";import{l as p,ap as k,r as C,as as R,R as b,aa as o,m as O,q as U,L as l,E as c,u as m,t as $,I as q,J as A,n as B}from"./vue.4dfaac09.js";const E={class:"layout-search-dialog"},H=p({name:"layoutBreadcrumbSearch"}),J=Q(p({...H,setup(M,{expose:f}){const w=x(),{tagsViewRoutes:S}=k(w),d=C(),{t:V}=I(),h=R(),s=b({isShowSearch:!1,menuQuery:"",tagsViewList:[]}),g=(e,a)=>{a(e?s.tagsViewList.filter(L(e)):s.tagsViewList)},L=e=>a=>a.path.toLowerCase().indexOf(e.toLowerCase())>-1||V(a.name).indexOf(e.toLowerCase())>-1,y=()=>{if(s.tagsViewList.length>0)return!1;S.value.map(e=>{var a;(a=e.meta)!=null&&a.isHide||s.tagsViewList.push({...e})})},_=e=>{var r,u,n;let{path:a,redirect:i}=e;(r=e.meta)!=null&&r.isLink&&!((u=e.meta)!=null&&u.isIframe)?window.open((n=e.meta)==null?void 0:n.isLink):i?h.push(i):h.push(a),s.isShowSearch=!1};return f({openSearch:()=>{s.menuQuery="",s.isShowSearch=!0,y(),B(()=>{setTimeout(()=>{d.value.focus()})})}}),(e,a)=>{const i=o("ele-Search"),r=o("el-icon"),u=o("SvgIcon"),n=o("el-autocomplete"),v=o("el-dialog");return O(),U("div",E,[l(v,{modelValue:m(s).isShowSearch,"onUpdate:modelValue":a[1]||(a[1]=t=>m(s).isShowSearch=t),"destroy-on-close":"","show-close":!1},{footer:c(()=>[l(n,{modelValue:m(s).menuQuery,"onUpdate:modelValue":a[0]||(a[0]=t=>m(s).menuQuery=t),"fetch-suggestions":g,placeholder:e.$t("user.searchPlaceholder"),ref_key:"layoutMenuAutocompleteRef",ref:d,onSelect:_,"fit-input-width":!0},{prefix:c(()=>[l(r,{class:"el-input__icon"},{default:c(()=>[l(i)]),_:1})]),default:c(({item:t})=>[$("div",null,[l(u,{name:t.meta.icon,class:"mr5"},null,8,["name"]),q(" "+A(e.$t(t.name)),1)])]),_:1},8,["modelValue","placeholder"])]),_:1},8,["modelValue"])])}}}),[["__scopeId","data-v-eebd0660"]]);export{J as default};
