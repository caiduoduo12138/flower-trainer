var ms=Object.defineProperty;var vs=(i,e,t)=>e in i?ms(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var pe=(i,e,t)=>(vs(i,typeof e!="symbol"?e+"":e,t),t),cn=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var P=(i,e,t)=>(cn(i,e,"read from private field"),t?t.call(i):e.get(i)),be=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)},ue=(i,e,t,n)=>(cn(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t);var $e=(i,e,t)=>(cn(i,e,"access private method"),t);var fe,ge,Qe,oe,de,Ke,ot,Ze,Fe,at,Mt,nn,Ki,vt,tn,Rt,Dn,sn,Zi;import{r as N,a as He,h as Dt,N as ys,e as Ft,aa as le,m as L,q,t as E,K as Je,$ as dt,y as _t,z as Ue,J as me,P as Vn,L as W,E as D,D as ve,I as X,H as ye,u as M,at as dn,au as pn,l as Wt,w as bs,n as Qn,j as Ye,ap as ws,Q as xs,ah as Es,F as Ut,M as fn}from"./vue.4dfaac09.js";import{s as Cs,o as As,g as ks,a as Ss,b as Ps,c as Is,d as Ts,e as Ns,f as Os,h as Ms}from"./source.9657f080.js";import{_ as gn,aM as Ge,aK as Rs,u as et,j as js,k as Bs,C as Ls}from"./index.0f5ebb0a.js";import{v as zs,_ as Ds}from"./index.vue_vue_type_script_setup_true_lang.5c1190cd.js";import{u as $n}from"./index.10d29f3f.js";const Hn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAACoZJREFUeF7tnF2IXGcZx//PbBqlgqWF4sdN1s4Zgxd+4xcWbJBGg1SSnRT7SVsRLxQJVr3zo0HBGzUq4oVFTdU21s7ZtVWjpmCTi9qilNaKaLNJOl611ED8gELS3XlldpNa4s7MOc+c2eyc5zc3udj3ec/7/z3vL++cM7Nr4gUBCAwkYLCBAAQGE0AQdgcEhhBAELYHBBCEPQABHwFOEB83qoIQQJAgjSamjwCC+LhRFYQAggRpNDF9BBDEx42qIAQQJEijiekjgCA+blQFIYAgQRpNTB8BBPFxoyoIgcoFSb/eOatNm2aVerMybQnCsbqYSX9fmcwaXS0tdW3Hz7vVTc5MZQlUIsiqFI1blOxWSbNlF8H4kQTOSdL/tyulI7Z9fv/IKgaMTWAsQdKDc19CirF74J3gnCx3abl3mJPGi3F4nUuQ9ODuq5TSDzktJtMU56xdWdovNY7Y1Z3DzjkoO49AaUHOnhp3QHJDE9iv5eW9nCrj96iUIOlQ+yFJV41/WWZYBwKrJ8pS7y5E8dMuLAhy+CFf4MoVUezq+b0XeB1TeflCgqRD7f79Rv8JFa/pJYAojt6NFOTsDXn/rRWvehDYb9vz2+oRZfIpRgtyqJ0mvwyusM4Eulpe3sa9yWjqQwXhrdVogFM8oiuz23gkPLyDAwVZ+XR8ZubpKd4ALH00Ae5LRjAaLAg35qO3V11GWLqDp1xrN3OYIP3Tg+9V1UWC0Tm4eV+D0ZqCpENzt0rWf7TLKxIBTpL/6/YAQfjcI5IXL8nKjft5jUeQoCYMic0j4JfAGSQI37mKLU7Xtuevi41gNf0gQbhBZ3cctu35tugYBgnCp+fRd8bKf588/kUQRBhGIPz9CIIgyCgCoT8fQZBR24Ofh370iyAIUIRA2Bt2BCmyPRgjmW2L+M1fBGHzFyUQ8hRBkKLbg3EhTxEEYeOXIRDuFEGQMtuDseG+grK2IIvttPaXUNgh4QmYlpU0+W9a9K/QsNNS+oeSnpWp//Wnv8nSE+qlRy1beG49eoEg60GZa0yAQHpMZr/SUm/eti78aQIXGPJlRU6QSfFm3okQsCNKy3daa+HuqqfnBKmaKPNdSAJPSvZVyzo/rWoRCFIVSebZQATsAdny56y5cHTcRSHIuASp35gEks5oJn3Crpj//jgLRJBx6FG78QmY9lkzv927UATxkqNumgjca1l+nWfBCOKhRs00Erjfsnxn2YUjSFlijJ9mAqVPEgSZ5naz9vIEkvZZq/g9CYKUR0zFtBNI6WPWKvZ0C0Gmvdms30PgtExvtGa+OKoYQUYR4ud1JVDoph1B6tp+chUgkK6zbP7eYQMRpABGhtSUgOkJa+ZvRZCa9pdYFRAw3WDN/MCgmThBKmDMFFNN4LBlg/8GMYJMdW9ZfCUErPEma97357XmQpBKCDPJVBPo/5Hu5vxeBJnqLrL4CRL4o2X5OxFkgoSZesoJLG++3LYeOHl+Ct5iTXlfWX5FBMyusWbnlwhSEU+mqRuB9AXL5r+CIHXrK3mqIZDS3daavwlBqsHJLPUj8LBl+ZUIUr/GkqgaAicsy5sIUg1MZqkdAfu3ZZ1LEKR2jSVQRQROW5a/HEEqosk0tSOAILVrKYGqJIAgVdJkrtoRQJDatZRAVRJAkCppMlftCCBI7VpKoCoJIEiVNJmrdgQQpHYtJVCVBBCkSprMVTsCJQQ51j4taXPtEBAIAoMJIAi7AwJDCCAI2wMCCMIegICPACeIjxtVQQggSJBGE9NHAEF83KgKQgBBgjSamD4CCOLjRlUQAggSpNHE9BFAEB83qoIQQJAgjSamjwCC+LhRFYQAggRpNDF9BBDEx42qIAQQJEijiekjgCA+blQFIYAgQRpNTB8BBPFxoyoIAQQJ0mhi+gggiI8bVUEIIEiQRhPTRwBBfNyoCkIAQYI0mpg+Agji40ZVEAIIEqTRxPQRQBAfN6qCEECQII0mpo8Agvi4URWEAIIEaTQxfQQQxMeNqiAEECRIo4npI4AgPm5UBSGAIEEaTUwfAQTxcaMqCAEECdJoYvoIIIiPG1VBCCBIkEYT00cAQXzcqApCAEGCNJqYPgII4uNGVRACCBKk0cT0EUAQHzeqghBAkCCNJqaPAIL4uFEVhACCBGk0MX0EEMTHjaogBBAkSKOJ6SOAID5uVAUhgCBBGk1MHwEE8XGjKggBBAnSaGL6CCCIjxtVQQggSJBGE9NHAEF83KgKQgBBgjSamD4CCOLjRlUQAggSpNHE9BFAEB83qoIQQJAgjSamjwCC+LhRFYQAggRpNDF9BBDEx42qIAQQJEijiekjgCA+blQFIYAgQRpNTB8BBPFxoyoIAQQJ0mhi+gggiI8bVUEIIEiQRhPTRwBBfNyoCkIAQYI0mpg+Agji40ZVEAIIEqTRxPQRQBAfN6qCEECQII0mpo8Agvi4URWEwPOW5a84P6utFT4da/9T0iVBwBATApLpGWvmry0qSFfSFrhBIBCBJy3L31xUkEckvTsQHKJC4KBl+YeKCnKPpOthBoFABL5tWb6noCBzn5fsy4HgEBUCH7csv7OgILt3SOkgzCAQhkDS26yVP15MkMUdr5Rd/K8wcAganICdtKxz+VoQ1nzM2x+YjrV/J2lbcHLEj0Ag6R5r5TeWE+Roe48a+mYEPmQMTqChj9gV+c/KCXLiw69S76Jng6Mjfv0JnLIsv2xQzIFvsc6+zdov6Zb6MyJhXAL2dcs6n/UJ8tTcOzRjf4gLj+S1J3BRatqW+RMuQVZOkcX2j2S6ufagCBiPQNJ3rJV/aljwoW+xVgXZ2ZTNHJXUiEeQxLUlkPQfWS+zbOG5sQRZvReZ+4xkX6stLILFI2D2SWt2vjsq+MgT5NwE6Xj7ASVdM2pCfg6BDU/AlFsz311kncUFefraV6vXe0RJs0UmZgwENiSBpBPqnXmXbf3FySLrKyzIylut47uuVGocljRTZHLGQGBDEUhaktn7LOv8vui6Sgmyej/S3ilpoegFGAeBDUMg2U5rde4vs57SgqyeJO22kjplLsRYCFxQAqbd1szzsmtwCbIiyWL7AzIdkHRp2YsyHgLrSOCUkq63Vv5bzzXdgqxI0t31Br3Q+IGMX8/1wKdmwgSSHlXqfdRev/BX75XGEuTcRdNi+xsyfdq7COogUDmBpH3Wym8fd95KBFk5TZ7a/X5tSnuV9N5xF0U9BMYg8LDU+KJl9/V/n2nsV2WC/O80mbtZpj2SvX3s1TEBBAoTSI8p6VvWmv9x4ZICAysX5EVRju36oMxuUrL+J5YvK7AWhkCgLIHTstRRSj+xbOE3ZYuLjJ+YIC+K8pdrN2tz2iFL25TSe2T2FkmbiyyOMRA4j8AZmR7Xys23PaTssoNm33thkpQmLshai0/H2y1Zb1Y9vUbWuFRKF6vXuCBrmSRc5h6DQKOXJHteqXdKDT2j1OhaM18cY0ZXKZvShY2iKAQQJEqnyekigCAubBRFIYAgUTpNThcBBHFhoygKAQSJ0mlyugggiAsbRVEIIEiUTpPTRQBBXNgoikIAQaJ0mpwuAgjiwkZRFAIIEqXT5HQRQBAXNoqiEECQKJ0mp4vAfwFjk/v2d0a75QAAAABJRU5ErkJggg==",Jn="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAYAAACtWK6eAAAAAXNSR0IArs4c6QAACHNJREFUeF7tndttG0kQRUmAgWwoNqAPpeFIls5kNwsB4odCcSZccm2AWi8lTtf0ranHEaAvd99hn6qDKcnkaL/jCwIQ+JDAHjYQgMDHBBCE7oDAJwQQhPaAAILQAxCwEeAOYuPGriYEEKRJoTmmjQCC2LixqwkBBGlSaI5pI4AgNm7sakIAQZoUmmPaCCCIjRu7mhBAkCaF5pg2Aghi48auJgQQpEmhOaaNAILYuLGrCQEEaVJojmkjgCA2buxqQgBBmhSaY9oIIIiNG7uaEECQJoXmmDYCCGLjxq4mBBCkSaE5po0Agti4sasJAQRpUmiOaSOwf3p6Otu2sgsC9QkgSP0ac8IVBBBkBTy21ieAIPVrzAlXEECQFfDYWp8AgtSvMSdcQQBBVsBja30CCFK/xpxwBQEEWQGPrfUJIEj9GnPCFQQQZAU8ttYngCD1a8wJVxCwCPK22+2u38qvL5drXL9Hvo4ji1krJzBaj5B9ZRHkeDqdvivxXt5A+eclfwjw5TXxzmRlUQazDW+CDdlXCDJYeJYvI4AgyziZVnEHMWELtQlBhOVAECFcp2gEEYJGECFcp2gEEYJGECFcp2gEEYJGECFcp2gEEYJGECFcp2gEEYJGECFcp2gEEYJGECFcp2gEEYJGECFcp2gEEYJGECFcp2gEEYJGECFcp2gEEYJGECFcp2gEEYJGECFcp2gEEYJGECFcp2gEEYJGECFcp2gEEYJGECFcp2gEEYJGECFcp2gEEYJGECFcp2gEEYJGECFcp2gEEYJGECFcp2gEEYJGECFcp2gEEYJGECFcp+jOgoR8wJfHc7Gen5//eHl5+eHUY6kvYxAkZF9ZnosVsnAeglyLvt/vv72+vv4VEkKgF2UQJNCrv70UBBkoy7uiHw+Hw9/cTT6GhyADjeWx1OsO8u4sb4fD4RuS3K8ugnh0/cA1NhDk31fHyIUgA2263dKtBPl1Ykau30rPHWQ7F+5eeWNBrq+JketdZRAEQe4SYOT6iQVBEOQzAu1HLgRBkEcEWo9cCPKoPZz/PcDPIIxc/Azi3PUDl4sqSNffcnEHGWhej6XBBWn3Wy4E8ej6gWskEKTVfywiyEDzeizNIkiXkQtBPLp+4BrJBCk/ciHIQPN6LE0oSOmRC0E8un7gGlkFqTpyIchA83osTS5IuZELQTy6fuAaBQQpNXIhyEDzeiytIkiVkQtBPLp+4BrFBEk/ciHIQPN6LC0oSOqRC0E8un7gGlUFyTpyIchA83osLS5IupGrsyAhH/DVQJBUI5dBkJB9ZXku1vHSjN+Vd4Wojx41FF2FKfwnFg2sQvYVggy0sKHoA+nDS0N/YtHACkGWtgB3kKWk4j6XC0GW13B4JYIMIws3ciHIcA2Xb0CQ5azerQw1ciGIqYbLNiHIMk73VkV5LheC2Gv4cCeCPET0aMHmIxeCPCrRin9HkBXwbls3HbkQZEoN74cgyDy4W41cCDKvhv9LQpDpcN1HLgSZXsNbIIJI4LqOXAgiqeHPUATRwfUauRBEV0MEEbLd7XZfT6fT9Y2B0i8EEeLlDjIf7vl8/nG9e3jI8WsKOA+egvdiLQWGIEtJLV73djqdvi5ePWEhd5AJED+KQJCpcF1Gqt9fMYJMreF/wxBkPVzvkQpBbgRCzopdPlG4UB33kQpBECTLH6bcZKRCEAQJLcjWIxWCIEhkQTYfqRAEQaIKEmKkQhAECSVItJEKQRAkkiDhRioEuREI+YCvRr/mDTlSTRAkZF9Znou18FfxvsuqCxJ9pJogiG/DLLwagiwEdV1mePvEQPqnS8OPVAgyq9SinMJ3kBQjFYKIGntWbDVBso1UCDKrk0U5xQRJN1IhiKixZ8UWEiTlSIUgszpZlJNdkOwjFYKIGntWbHJB0o9UCDKrk0U5iQUpMVIhiKixZ8VmE6TaSIUgszpZlJNMkHIjFYKIGntWbCJBSo5UCDKrk0U50QWpPlIhiKixZ8UGF6T8SIUgszpZlBNYkBYjFYKIGntWbDRBuo1UCDKrk0U5wQRpN1IhiKixZ8UGEqTlSIUgszpZlLO1IN1HKgQRNfas2I0FaT9SIcisThblbCgII9Wdmm748eSpHcZn0gdwvi86I9Xn4BBkoLE8ljrfQRipHhQVQTy6fuAajoIwUi2oS2dBQj7gy0mQL15/429BD4ZeYhAkZF9ZfgZp+wd0QndksBdnECRkXyFIsMaq8nIQRFjJqH+jUHjkctEIIiwpggjhOkUjiBA0ggjhOkUjiBA0ggjhOkUjiBA0ggjhOkUjiBA0ggjhOkUjiBA0ggjhOkUjiBA0ggjhOkUjiBA0ggjhOkUjiBA0ggjhOkUjiBA0ggjhOkUjiBA0ggjhOkUjiBA0ggjhOkUjiBA0ggjhOkUjiBA0ggjhOkUjiBA0ggjhOkUjiBA0ggjhOkUjiBA0ggjhOkUjiBA0ggjhOkUjiBA0ggjhOkUjiBA0ggjhOkUjiBA0ggjhOkV3FiTkA74udT861Z7LLCMwWo+QfWV5LtYyPKyCQAECCFKgiBxBRwBBdGxJLkAAQQoUkSPoCCCIji3JBQggSIEicgQdAQTRsSW5AAEEKVBEjqAjgCA6tiQXIIAgBYrIEXQEEETHluQCBBCkQBE5go7AXhdNMgTyE0CQ/DXkBEICCCKES3R+AgiSv4acQEgAQYRwic5PAEHy15ATCAkgiBAu0fkJIEj+GnICIQEEEcIlOj8BBMlfQ04gJIAgQrhE5yeAIPlryAmEBBBECJfo/AQQJH8NOYGQAIII4RKdnwCC5K8hJxASQBAhXKLzE0CQ/DXkBEICCCKES3R+AgiSv4acQEgAQYRwic5PAEHy15ATCAkgiBAu0fkJIEj+GnICIQEEEcIlOj+BfwABt6okJUEl1QAAAABJRU5ErkJggg==";var Fs={2:i=>{function e(s,o,r){s instanceof RegExp&&(s=t(s,r)),o instanceof RegExp&&(o=t(o,r));var a=n(s,o,r);return a&&{start:a[0],end:a[1],pre:r.slice(0,a[0]),body:r.slice(a[0]+s.length,a[1]),post:r.slice(a[1]+o.length)}}function t(s,o){var r=o.match(s);return r?r[0]:null}function n(s,o,r){var a,l,u,h,d,c=r.indexOf(s),f=r.indexOf(o,c+1),g=c;if(c>=0&&f>0){for(a=[],u=r.length;g>=0&&!d;)g==c?(a.push(g),c=r.indexOf(s,g+1)):a.length==1?d=[a.pop(),f]:((l=a.pop())<u&&(u=l,h=f),f=r.indexOf(o,g+1)),g=c<f&&c>=0?c:f;a.length&&(d=[u,h])}return d}i.exports=e,e.range=n},47:(i,e,t)=>{var n=t(410),s=function(u){return typeof u=="string"};function o(u,h){for(var d=[],c=0;c<u.length;c++){var f=u[c];f&&f!=="."&&(f===".."?d.length&&d[d.length-1]!==".."?d.pop():h&&d.push(".."):d.push(f))}return d}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,a={};function l(u){return r.exec(u).slice(1)}a.resolve=function(){for(var u="",h=!1,d=arguments.length-1;d>=-1&&!h;d--){var c=d>=0?arguments[d]:process.cwd();if(!s(c))throw new TypeError("Arguments to path.resolve must be strings");c&&(u=c+"/"+u,h=c.charAt(0)==="/")}return(h?"/":"")+(u=o(u.split("/"),!h).join("/"))||"."},a.normalize=function(u){var h=a.isAbsolute(u),d=u.substr(-1)==="/";return(u=o(u.split("/"),!h).join("/"))||h||(u="."),u&&d&&(u+="/"),(h?"/":"")+u},a.isAbsolute=function(u){return u.charAt(0)==="/"},a.join=function(){for(var u="",h=0;h<arguments.length;h++){var d=arguments[h];if(!s(d))throw new TypeError("Arguments to path.join must be strings");d&&(u+=u?"/"+d:d)}return a.normalize(u)},a.relative=function(u,h){function d(v){for(var y=0;y<v.length&&v[y]==="";y++);for(var w=v.length-1;w>=0&&v[w]==="";w--);return y>w?[]:v.slice(y,w+1)}u=a.resolve(u).substr(1),h=a.resolve(h).substr(1);for(var c=d(u.split("/")),f=d(h.split("/")),g=Math.min(c.length,f.length),p=g,m=0;m<g;m++)if(c[m]!==f[m]){p=m;break}var b=[];for(m=p;m<c.length;m++)b.push("..");return(b=b.concat(f.slice(p))).join("/")},a._makeLong=function(u){return u},a.dirname=function(u){var h=l(u),d=h[0],c=h[1];return d||c?(c&&(c=c.substr(0,c.length-1)),d+c):"."},a.basename=function(u,h){var d=l(u)[2];return h&&d.substr(-1*h.length)===h&&(d=d.substr(0,d.length-h.length)),d},a.extname=function(u){return l(u)[3]},a.format=function(u){if(!n.isObject(u))throw new TypeError("Parameter 'pathObject' must be an object, not "+typeof u);var h=u.root||"";if(!s(h))throw new TypeError("'pathObject.root' must be a string or undefined, not "+typeof u.root);return(u.dir?u.dir+a.sep:"")+(u.base||"")},a.parse=function(u){if(!s(u))throw new TypeError("Parameter 'pathString' must be a string, not "+typeof u);var h=l(u);if(!h||h.length!==4)throw new TypeError("Invalid path '"+u+"'");return h[1]=h[1]||"",h[2]=h[2]||"",h[3]=h[3]||"",{root:h[0],dir:h[0]+h[1].slice(0,h[1].length-1),base:h[2],ext:h[3],name:h[2].slice(0,h[2].length-h[3].length)}},a.sep="/",a.delimiter=":",i.exports=a},101:function(i,e,t){var n;i=t.nmd(i),function(){i&&i.exports,typeof global=="object"&&global;var s=function(u){this.message=u};(s.prototype=new Error).name="InvalidCharacterError";var o=function(u){throw new s(u)},r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=/[\t\n\f\r ]/g,l={encode:function(u){u=String(u),/[^\0-\xFF]/.test(u)&&o("The string to be encoded contains characters outside of the Latin1 range.");for(var h,d,c,f,g=u.length%3,p="",m=-1,b=u.length-g;++m<b;)h=u.charCodeAt(m)<<16,d=u.charCodeAt(++m)<<8,c=u.charCodeAt(++m),p+=r.charAt((f=h+d+c)>>18&63)+r.charAt(f>>12&63)+r.charAt(f>>6&63)+r.charAt(63&f);return g==2?(h=u.charCodeAt(m)<<8,d=u.charCodeAt(++m),p+=r.charAt((f=h+d)>>10)+r.charAt(f>>4&63)+r.charAt(f<<2&63)+"="):g==1&&(f=u.charCodeAt(m),p+=r.charAt(f>>2)+r.charAt(f<<4&63)+"=="),p},decode:function(u){var h=(u=String(u).replace(a,"")).length;h%4==0&&(h=(u=u.replace(/==?$/,"")).length),(h%4==1||/[^+a-zA-Z0-9/]/.test(u))&&o("Invalid character: the string to be decoded is not correctly encoded.");for(var d,c,f=0,g="",p=-1;++p<h;)c=r.indexOf(u.charAt(p)),d=f%4?64*d+c:c,f++%4&&(g+=String.fromCharCode(255&d>>(-2*f&6)));return g},version:"1.0.0"};(n=(function(){return l}).call(e,t,e,i))===void 0||(i.exports=n)}()},135:i=>{function e(t){return!!t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}i.exports=function(t){return t!=null&&(e(t)||function(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&e(n.slice(0,0))}(t)||!!t._isBuffer)}},172:(i,e)=>{e.d=function(t){if(!t)return 0;for(var n=(t=t.toString()).length,s=t.length;s--;){var o=t.charCodeAt(s);56320<=o&&o<=57343&&s--,127<o&&o<=2047?n++:2047<o&&o<=65535&&(n+=2)}return n}},285:(i,e,t)=>{var n=t(2);i.exports=function(b){return b?(b.substr(0,2)==="{}"&&(b="\\{\\}"+b.substr(2)),m(function(v){return v.split("\\\\").join(s).split("\\{").join(o).split("\\}").join(r).split("\\,").join(a).split("\\.").join(l)}(b),!0).map(h)):[]};var s="\0SLASH"+Math.random()+"\0",o="\0OPEN"+Math.random()+"\0",r="\0CLOSE"+Math.random()+"\0",a="\0COMMA"+Math.random()+"\0",l="\0PERIOD"+Math.random()+"\0";function u(b){return parseInt(b,10)==b?parseInt(b,10):b.charCodeAt(0)}function h(b){return b.split(s).join("\\").split(o).join("{").split(r).join("}").split(a).join(",").split(l).join(".")}function d(b){if(!b)return[""];var v=[],y=n("{","}",b);if(!y)return b.split(",");var w=y.pre,x=y.body,k=y.post,C=w.split(",");C[C.length-1]+="{"+x+"}";var R=d(k);return k.length&&(C[C.length-1]+=R.shift(),C.push.apply(C,R)),v.push.apply(v,C),v}function c(b){return"{"+b+"}"}function f(b){return/^-?0\d/.test(b)}function g(b,v){return b<=v}function p(b,v){return b>=v}function m(b,v){var y=[],w=n("{","}",b);if(!w)return[b];var x=w.pre,k=w.post.length?m(w.post,!1):[""];if(/\$$/.test(w.pre))for(var C=0;C<k.length;C++){var R=x+"{"+w.body+"}"+k[C];y.push(R)}else{var S,_,te=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(w.body),U=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(w.body),A=te||U,z=w.body.indexOf(",")>=0;if(!A&&!z)return w.post.match(/,(?!,).*\}/)?m(b=w.pre+"{"+w.body+r+w.post):[b];if(A)S=w.body.split(/\.\./);else if((S=d(w.body)).length===1&&(S=m(S[0],!1).map(c)).length===1)return k.map(function(_e){return w.pre+S[0]+_e});if(A){var V=u(S[0]),B=u(S[1]),j=Math.max(S[0].length,S[1].length),Y=S.length==3?Math.abs(u(S[2])):1,ee=g;B<V&&(Y*=-1,ee=p);var F=S.some(f);_=[];for(var J=V;ee(J,B);J+=Y){var ae;if(U)(ae=String.fromCharCode(J))==="\\"&&(ae="");else if(ae=String(J),F){var Oe=j-ae.length;if(Oe>0){var ne=new Array(Oe+1).join("0");ae=J<0?"-"+ne+ae.slice(1):ne+ae}}_.push(ae)}}else{_=[];for(var re=0;re<S.length;re++)_.push.apply(_,m(S[re],!1))}for(re=0;re<_.length;re++)for(C=0;C<k.length;C++)R=x+_[re]+k[C],(!v||A||R)&&y.push(R)}return y}},298:i=>{var e,t;e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(n,s){return n<<s|n>>>32-s},rotr:function(n,s){return n<<32-s|n>>>s},endian:function(n){if(n.constructor==Number)return 16711935&t.rotl(n,8)|4278255360&t.rotl(n,24);for(var s=0;s<n.length;s++)n[s]=t.endian(n[s]);return n},randomBytes:function(n){for(var s=[];n>0;n--)s.push(Math.floor(256*Math.random()));return s},bytesToWords:function(n){for(var s=[],o=0,r=0;o<n.length;o++,r+=8)s[r>>>5]|=n[o]<<24-r%32;return s},wordsToBytes:function(n){for(var s=[],o=0;o<32*n.length;o+=8)s.push(n[o>>>5]>>>24-o%32&255);return s},bytesToHex:function(n){for(var s=[],o=0;o<n.length;o++)s.push((n[o]>>>4).toString(16)),s.push((15&n[o]).toString(16));return s.join("")},hexToBytes:function(n){for(var s=[],o=0;o<n.length;o+=2)s.push(parseInt(n.substr(o,2),16));return s},bytesToBase64:function(n){for(var s=[],o=0;o<n.length;o+=3)for(var r=n[o]<<16|n[o+1]<<8|n[o+2],a=0;a<4;a++)8*o+6*a<=8*n.length?s.push(e.charAt(r>>>6*(3-a)&63)):s.push("=");return s.join("")},base64ToBytes:function(n){n=n.replace(/[^A-Z0-9+\/]/gi,"");for(var s=[],o=0,r=0;o<n.length;r=++o%4)r!=0&&s.push((e.indexOf(n.charAt(o-1))&Math.pow(2,-2*r+8)-1)<<2*r|e.indexOf(n.charAt(o))>>>6-2*r);return s}},i.exports=t},345:()=>{},388:()=>{},410:()=>{},526:i=>{var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var n=[],s=0;s<t.length;s++)n.push(255&t.charCodeAt(s));return n},bytesToString:function(t){for(var n=[],s=0;s<t.length;s++)n.push(String.fromCharCode(t[s]));return n.join("")}}};i.exports=e},542:(i,e,t)=>{(function(){var n=t(298),s=t(526).utf8,o=t(135),r=t(526).bin,a=function(l,u){l.constructor==String?l=u&&u.encoding==="binary"?r.stringToBytes(l):s.stringToBytes(l):o(l)?l=Array.prototype.slice.call(l,0):Array.isArray(l)||l.constructor===Uint8Array||(l=l.toString());for(var h=n.bytesToWords(l),d=8*l.length,c=1732584193,f=-271733879,g=-1732584194,p=271733878,m=0;m<h.length;m++)h[m]=16711935&(h[m]<<8|h[m]>>>24)|4278255360&(h[m]<<24|h[m]>>>8);h[d>>>5]|=128<<d%32,h[14+(d+64>>>9<<4)]=d;var b=a._ff,v=a._gg,y=a._hh,w=a._ii;for(m=0;m<h.length;m+=16){var x=c,k=f,C=g,R=p;c=b(c,f,g,p,h[m+0],7,-680876936),p=b(p,c,f,g,h[m+1],12,-389564586),g=b(g,p,c,f,h[m+2],17,606105819),f=b(f,g,p,c,h[m+3],22,-1044525330),c=b(c,f,g,p,h[m+4],7,-176418897),p=b(p,c,f,g,h[m+5],12,1200080426),g=b(g,p,c,f,h[m+6],17,-1473231341),f=b(f,g,p,c,h[m+7],22,-45705983),c=b(c,f,g,p,h[m+8],7,1770035416),p=b(p,c,f,g,h[m+9],12,-1958414417),g=b(g,p,c,f,h[m+10],17,-42063),f=b(f,g,p,c,h[m+11],22,-1990404162),c=b(c,f,g,p,h[m+12],7,1804603682),p=b(p,c,f,g,h[m+13],12,-40341101),g=b(g,p,c,f,h[m+14],17,-1502002290),c=v(c,f=b(f,g,p,c,h[m+15],22,1236535329),g,p,h[m+1],5,-165796510),p=v(p,c,f,g,h[m+6],9,-1069501632),g=v(g,p,c,f,h[m+11],14,643717713),f=v(f,g,p,c,h[m+0],20,-373897302),c=v(c,f,g,p,h[m+5],5,-701558691),p=v(p,c,f,g,h[m+10],9,38016083),g=v(g,p,c,f,h[m+15],14,-660478335),f=v(f,g,p,c,h[m+4],20,-405537848),c=v(c,f,g,p,h[m+9],5,568446438),p=v(p,c,f,g,h[m+14],9,-1019803690),g=v(g,p,c,f,h[m+3],14,-187363961),f=v(f,g,p,c,h[m+8],20,1163531501),c=v(c,f,g,p,h[m+13],5,-1444681467),p=v(p,c,f,g,h[m+2],9,-51403784),g=v(g,p,c,f,h[m+7],14,1735328473),c=y(c,f=v(f,g,p,c,h[m+12],20,-1926607734),g,p,h[m+5],4,-378558),p=y(p,c,f,g,h[m+8],11,-2022574463),g=y(g,p,c,f,h[m+11],16,1839030562),f=y(f,g,p,c,h[m+14],23,-35309556),c=y(c,f,g,p,h[m+1],4,-1530992060),p=y(p,c,f,g,h[m+4],11,1272893353),g=y(g,p,c,f,h[m+7],16,-155497632),f=y(f,g,p,c,h[m+10],23,-1094730640),c=y(c,f,g,p,h[m+13],4,681279174),p=y(p,c,f,g,h[m+0],11,-358537222),g=y(g,p,c,f,h[m+3],16,-722521979),f=y(f,g,p,c,h[m+6],23,76029189),c=y(c,f,g,p,h[m+9],4,-640364487),p=y(p,c,f,g,h[m+12],11,-421815835),g=y(g,p,c,f,h[m+15],16,530742520),c=w(c,f=y(f,g,p,c,h[m+2],23,-995338651),g,p,h[m+0],6,-198630844),p=w(p,c,f,g,h[m+7],10,1126891415),g=w(g,p,c,f,h[m+14],15,-1416354905),f=w(f,g,p,c,h[m+5],21,-57434055),c=w(c,f,g,p,h[m+12],6,1700485571),p=w(p,c,f,g,h[m+3],10,-1894986606),g=w(g,p,c,f,h[m+10],15,-1051523),f=w(f,g,p,c,h[m+1],21,-2054922799),c=w(c,f,g,p,h[m+8],6,1873313359),p=w(p,c,f,g,h[m+15],10,-30611744),g=w(g,p,c,f,h[m+6],15,-1560198380),f=w(f,g,p,c,h[m+13],21,1309151649),c=w(c,f,g,p,h[m+4],6,-145523070),p=w(p,c,f,g,h[m+11],10,-1120210379),g=w(g,p,c,f,h[m+2],15,718787259),f=w(f,g,p,c,h[m+9],21,-343485551),c=c+x>>>0,f=f+k>>>0,g=g+C>>>0,p=p+R>>>0}return n.endian([c,f,g,p])};a._ff=function(l,u,h,d,c,f,g){var p=l+(u&h|~u&d)+(c>>>0)+g;return(p<<f|p>>>32-f)+u},a._gg=function(l,u,h,d,c,f,g){var p=l+(u&d|h&~d)+(c>>>0)+g;return(p<<f|p>>>32-f)+u},a._hh=function(l,u,h,d,c,f,g){var p=l+(u^h^d)+(c>>>0)+g;return(p<<f|p>>>32-f)+u},a._ii=function(l,u,h,d,c,f,g){var p=l+(h^(u|~d))+(c>>>0)+g;return(p<<f|p>>>32-f)+u},a._blocksize=16,a._digestsize=16,i.exports=function(l,u){if(l==null)throw new Error("Illegal argument "+l);var h=n.wordsToBytes(a(l,u));return u&&u.asBytes?h:u&&u.asString?r.bytesToString(h):n.bytesToHex(h)}})()},647:(i,e)=>{var t=Object.prototype.hasOwnProperty;function n(o){try{return decodeURIComponent(o.replace(/\+/g," "))}catch{return null}}function s(o){try{return encodeURIComponent(o)}catch{return null}}e.stringify=function(o,r){r=r||"";var a,l,u=[];for(l in typeof r!="string"&&(r="?"),o)if(t.call(o,l)){if((a=o[l])||a!=null&&!isNaN(a)||(a=""),l=s(l),a=s(a),l===null||a===null)continue;u.push(l+"="+a)}return u.length?r+u.join("&"):""},e.parse=function(o){for(var r,a=/([^=?#&]+)=?([^&]*)/g,l={};r=a.exec(o);){var u=n(r[1]),h=n(r[2]);u===null||h===null||u in l||(l[u]=h)}return l}},670:i=>{i.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0}},737:(i,e,t)=>{var n=t(670),s=t(647),o=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,r=/[\n\r\t]/g,a=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,l=/:\d+$/,u=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,h=/^[a-zA-Z]:/;function d(v){return(v||"").toString().replace(o,"")}var c=[["#","hash"],["?","query"],function(v,y){return p(y.protocol)?v.replace(/\\/g,"/"):v},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function g(v){var y,w=(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{}).location||{},x={},k=typeof(v=v||w);if(v.protocol==="blob:")x=new b(unescape(v.pathname),{});else if(k==="string")for(y in x=new b(v,{}),f)delete x[y];else if(k==="object"){for(y in v)y in f||(x[y]=v[y]);x.slashes===void 0&&(x.slashes=a.test(v.href))}return x}function p(v){return v==="file:"||v==="ftp:"||v==="http:"||v==="https:"||v==="ws:"||v==="wss:"}function m(v,y){v=(v=d(v)).replace(r,""),y=y||{};var w,x=u.exec(v),k=x[1]?x[1].toLowerCase():"",C=!!x[2],R=!!x[3],S=0;return C?R?(w=x[2]+x[3]+x[4],S=x[2].length+x[3].length):(w=x[2]+x[4],S=x[2].length):R?(w=x[3]+x[4],S=x[3].length):w=x[4],k==="file:"?S>=2&&(w=w.slice(2)):p(k)?w=x[4]:k?C&&(w=w.slice(2)):S>=2&&p(y.protocol)&&(w=x[4]),{protocol:k,slashes:C||p(k),slashesCount:S,rest:w}}function b(v,y,w){if(v=(v=d(v)).replace(r,""),!(this instanceof b))return new b(v,y,w);var x,k,C,R,S,_,te=c.slice(),U=typeof y,A=this,z=0;for(U!=="object"&&U!=="string"&&(w=y,y=null),w&&typeof w!="function"&&(w=s.parse),x=!(k=m(v||"",y=g(y))).protocol&&!k.slashes,A.slashes=k.slashes||x&&y.slashes,A.protocol=k.protocol||y.protocol||"",v=k.rest,(k.protocol==="file:"&&(k.slashesCount!==2||h.test(v))||!k.slashes&&(k.protocol||k.slashesCount<2||!p(A.protocol)))&&(te[3]=[/(.*)/,"pathname"]);z<te.length;z++)typeof(R=te[z])!="function"?(C=R[0],_=R[1],C!=C?A[_]=v:typeof C=="string"?~(S=C==="@"?v.lastIndexOf(C):v.indexOf(C))&&(typeof R[2]=="number"?(A[_]=v.slice(0,S),v=v.slice(S+R[2])):(A[_]=v.slice(S),v=v.slice(0,S))):(S=C.exec(v))&&(A[_]=S[1],v=v.slice(0,S.index)),A[_]=A[_]||x&&R[3]&&y[_]||"",R[4]&&(A[_]=A[_].toLowerCase())):v=R(v,A);w&&(A.query=w(A.query)),x&&y.slashes&&A.pathname.charAt(0)!=="/"&&(A.pathname!==""||y.pathname!=="")&&(A.pathname=function(V,B){if(V==="")return B;for(var j=(B||"/").split("/").slice(0,-1).concat(V.split("/")),Y=j.length,ee=j[Y-1],F=!1,J=0;Y--;)j[Y]==="."?j.splice(Y,1):j[Y]===".."?(j.splice(Y,1),J++):J&&(Y===0&&(F=!0),j.splice(Y,1),J--);return F&&j.unshift(""),ee!=="."&&ee!==".."||j.push(""),j.join("/")}(A.pathname,y.pathname)),A.pathname.charAt(0)!=="/"&&p(A.protocol)&&(A.pathname="/"+A.pathname),n(A.port,A.protocol)||(A.host=A.hostname,A.port=""),A.username=A.password="",A.auth&&(~(S=A.auth.indexOf(":"))?(A.username=A.auth.slice(0,S),A.username=encodeURIComponent(decodeURIComponent(A.username)),A.password=A.auth.slice(S+1),A.password=encodeURIComponent(decodeURIComponent(A.password))):A.username=encodeURIComponent(decodeURIComponent(A.auth)),A.auth=A.password?A.username+":"+A.password:A.username),A.origin=A.protocol!=="file:"&&p(A.protocol)&&A.host?A.protocol+"//"+A.host:"null",A.href=A.toString()}b.prototype={set:function(v,y,w){var x=this;switch(v){case"query":typeof y=="string"&&y.length&&(y=(w||s.parse)(y)),x[v]=y;break;case"port":x[v]=y,n(y,x.protocol)?y&&(x.host=x.hostname+":"+y):(x.host=x.hostname,x[v]="");break;case"hostname":x[v]=y,x.port&&(y+=":"+x.port),x.host=y;break;case"host":x[v]=y,l.test(y)?(y=y.split(":"),x.port=y.pop(),x.hostname=y.join(":")):(x.hostname=y,x.port="");break;case"protocol":x.protocol=y.toLowerCase(),x.slashes=!w;break;case"pathname":case"hash":if(y){var k=v==="pathname"?"/":"#";x[v]=y.charAt(0)!==k?k+y:y}else x[v]=y;break;case"username":case"password":x[v]=encodeURIComponent(y);break;case"auth":var C=y.indexOf(":");~C?(x.username=y.slice(0,C),x.username=encodeURIComponent(decodeURIComponent(x.username)),x.password=y.slice(C+1),x.password=encodeURIComponent(decodeURIComponent(x.password))):x.username=encodeURIComponent(decodeURIComponent(y))}for(var R=0;R<c.length;R++){var S=c[R];S[4]&&(x[S[1]]=x[S[1]].toLowerCase())}return x.auth=x.password?x.username+":"+x.password:x.username,x.origin=x.protocol!=="file:"&&p(x.protocol)&&x.host?x.protocol+"//"+x.host:"null",x.href=x.toString(),x},toString:function(v){v&&typeof v=="function"||(v=s.stringify);var y,w=this,x=w.host,k=w.protocol;k&&k.charAt(k.length-1)!==":"&&(k+=":");var C=k+(w.protocol&&w.slashes||p(w.protocol)?"//":"");return w.username?(C+=w.username,w.password&&(C+=":"+w.password),C+="@"):w.password?(C+=":"+w.password,C+="@"):w.protocol!=="file:"&&p(w.protocol)&&!x&&w.pathname!=="/"&&(C+="@"),(x[x.length-1]===":"||l.test(w.hostname)&&!w.port)&&(x+=":"),C+=x+w.pathname,(y=typeof w.query=="object"?v(w.query):w.query)&&(C+=y.charAt(0)!=="?"?"?"+y:y),w.hash&&(C+=w.hash),C}},b.extractProtocol=m,b.location=g,b.trimLeft=d,b.qs=s,i.exports=b},800:()=>{},805:()=>{},829:i=>{function e(u){return e=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(h){return typeof h}:function(h){return h&&typeof Symbol=="function"&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h},e(u)}function t(u){var h=typeof Map=="function"?new Map:void 0;return t=function(d){if(d===null||(c=d,Function.toString.call(c).indexOf("[native code]")===-1))return d;var c;if(typeof d!="function")throw new TypeError("Super expression must either be null or a function");if(h!==void 0){if(h.has(d))return h.get(d);h.set(d,f)}function f(){return n(d,arguments,o(this).constructor)}return f.prototype=Object.create(d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),s(f,d)},t(u)}function n(u,h,d){return n=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}()?Reflect.construct:function(c,f,g){var p=[null];p.push.apply(p,f);var m=new(Function.bind.apply(c,p));return g&&s(m,g.prototype),m},n.apply(null,arguments)}function s(u,h){return s=Object.setPrototypeOf||function(d,c){return d.__proto__=c,d},s(u,h)}function o(u){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(h){return h.__proto__||Object.getPrototypeOf(h)},o(u)}var r=function(u){function h(d){var c;return function(f,g){if(!(f instanceof g))throw new TypeError("Cannot call a class as a function")}(this,h),(c=function(f,g){return!g||e(g)!=="object"&&typeof g!="function"?function(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}(f):g}(this,o(h).call(this,d))).name="ObjectPrototypeMutationError",c}return function(d,c){if(typeof c!="function"&&c!==null)throw new TypeError("Super expression must either be null or a function");d.prototype=Object.create(c&&c.prototype,{constructor:{value:d,writable:!0,configurable:!0}}),c&&s(d,c)}(h,u),h}(t(Error));function a(u,h){for(var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},c=h.split("."),f=c.length,g=function(b){var v=c[b];if(!u)return{v:void 0};if(v==="+"){if(Array.isArray(u))return{v:u.map(function(w,x){var k=c.slice(b+1);return k.length>0?a(w,k.join("."),d):d(u,x,c,b)})};var y=c.slice(0,b).join(".");throw new Error("Object at wildcard (".concat(y,") is not an array"))}u=d(u,v,c,b)},p=0;p<f;p++){var m=g(p);if(e(m)==="object")return m.v}return u}function l(u,h){return u.length===h+1}i.exports={set:function(u,h,d){if(e(u)!="object"||u===null||h===void 0)return u;if(typeof h=="number")return u[h]=d,u[h];try{return a(u,h,function(c,f,g,p){if(c===Reflect.getPrototypeOf({}))throw new r("Attempting to mutate Object.prototype");if(!c[f]){var m=Number.isInteger(Number(g[p+1])),b=g[p+1]==="+";c[f]=m||b?[]:{}}return l(g,p)&&(c[f]=d),c[f]})}catch(c){if(c instanceof r)throw c;return u}},get:function(u,h){if(e(u)!="object"||u===null||h===void 0)return u;if(typeof h=="number")return u[h];try{return a(u,h,function(d,c){return d[c]})}catch{return u}},has:function(u,h){var d=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(e(u)!="object"||u===null||h===void 0)return!1;if(typeof h=="number")return h in u;try{var c=!1;return a(u,h,function(f,g,p,m){if(!l(p,m))return f&&f[g];c=d.own?f.hasOwnProperty(g):g in f}),c}catch{return!1}},hasOwn:function(u,h,d){return this.has(u,h,d||{own:!0})},isIn:function(u,h,d){var c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};if(e(u)!="object"||u===null||h===void 0)return!1;try{var f=!1,g=!1;return a(u,h,function(p,m,b,v){return f=f||p===d||!!p&&p[m]===d,g=l(b,v)&&e(p)==="object"&&m in p,p&&p[m]}),c.validPath?f&&g:f}catch{return!1}},ObjectPrototypeMutationError:r}}},Yn={};function se(i){var e=Yn[i];if(e!==void 0)return e.exports;var t=Yn[i]={id:i,loaded:!1,exports:{}};return Fs[i].call(t.exports,t,t.exports,se),t.loaded=!0,t.exports}se.n=i=>{var e=i&&i.__esModule?()=>i.default:()=>i;return se.d(e,{a:e}),e},se.d=(i,e)=>{for(var t in e)se.o(e,t)&&!se.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:e[t]})},se.o=(i,e)=>Object.prototype.hasOwnProperty.call(i,e),se.nmd=i=>(i.paths=[],i.children||(i.children=[]),i);var _s=se(737),Ws=se.n(_s);function mn(i){if(!vn(i))throw new Error("Parameter was not an error")}function vn(i){return!!i&&typeof i=="object"&&(e=i,Object.prototype.toString.call(e)==="[object Error]")||i instanceof Error;var e}let pt=class Nt extends Error{constructor(e,t){const n=[...arguments],{options:s,shortMessage:o}=function(a){let l,u="";if(a.length===0)l={};else if(vn(a[0]))l={cause:a[0]},u=a.slice(1).join(" ")||"";else if(a[0]&&typeof a[0]=="object")l=Object.assign({},a[0]),u=a.slice(1).join(" ")||"";else{if(typeof a[0]!="string")throw new Error("Invalid arguments passed to Layerr");l={},u=u=a.join(" ")||""}return{options:l,shortMessage:u}}(n);let r=o;if(s.cause&&(r=`${r}: ${s.cause.message}`),super(r),this.message=r,s.name&&typeof s.name=="string"?this.name=s.name:this.name="Layerr",s.cause&&Object.defineProperty(this,"_cause",{value:s.cause}),Object.defineProperty(this,"_info",{value:{}}),s.info&&typeof s.info=="object"&&Object.assign(this._info,s.info),Error.captureStackTrace){const a=s.constructorOpt||this.constructor;Error.captureStackTrace(this,a)}}static cause(e){return mn(e),e._cause&&vn(e._cause)?e._cause:null}static fullStack(e){mn(e);const t=Nt.cause(e);return t?`${e.stack}
caused by: ${Nt.fullStack(t)}`:e.stack??""}static info(e){mn(e);const t={},n=Nt.cause(e);return n&&Object.assign(t,Nt.info(n)),e._info&&Object.assign(t,e._info),t}toString(){let e=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e=`${e}: ${this.message}`),e}};var Us=se(47),Gn=se.n(Us);const qn="__PATH_SEPARATOR_POSIX__",Xn="__PATH_SEPARATOR_WINDOWS__";function Me(i){try{const e=i.replace(/\//g,qn).replace(/\\\\/g,Xn);return encodeURIComponent(e).split(Xn).join("\\\\").split(qn).join("/")}catch(e){throw new pt(e,"Failed encoding path")}}function Nl(i){return i.startsWith("/")?i:"/"+i}function yn(i){let e=i;return e[0]!=="/"&&(e="/"+e),/^.+\/$/.test(e)&&(e=e.substr(0,e.length-1)),e}function Vs(i){let e=new(Ws())(i).pathname;return e.length<=0&&(e="/"),yn(e)}function Re(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];return function(){return function(n){var s=[];if(n.length===0)return"";if(typeof n[0]!="string")throw new TypeError("Url must be a string. Received "+n[0]);if(n[0].match(/^[^/:]+:\/*$/)&&n.length>1){var o=n.shift();n[0]=o+n[0]}n[0].match(/^file:\/\/\//)?n[0]=n[0].replace(/^([^/:]+):\/*/,"$1:///"):n[0]=n[0].replace(/^([^/:]+):\/*/,"$1://");for(var r=0;r<n.length;r++){var a=n[r];if(typeof a!="string")throw new TypeError("Url must be a string. Received "+a);a!==""&&(r>0&&(a=a.replace(/^[\/]+/,"")),a=r<n.length-1?a.replace(/[\/]+$/,""):a.replace(/[\/]+$/,"/"),s.push(a))}var l=s.join("/"),u=(l=l.replace(/\/(\?|&|#[^!])/g,"$1")).split("?");return u.shift()+(u.length>0?"?":"")+u.join("&")}(typeof arguments[0]=="object"?arguments[0]:[].slice.call(arguments))}(e.reduce((n,s,o)=>((o===0||s!=="/"||s==="/"&&n[n.length-1]!=="/")&&n.push(s),n),[]))}var Qs=se(542),xt=se.n(Qs);function Kn(i,e){const t=i.url.replace("//",""),n=t.indexOf("/")==-1?"/":t.slice(t.indexOf("/")),s=i.method?i.method.toUpperCase():"GET",o=!!/(^|,)\s*auth\s*($|,)/.test(e.qop)&&"auth",r=`00000000${e.nc}`.slice(-8),a=function(c,f,g,p,m,b,v){const y=v||xt()(`${f}:${g}:${p}`);return c&&c.toLowerCase()==="md5-sess"?xt()(`${y}:${m}:${b}`):y}(e.algorithm,e.username,e.realm,e.password,e.nonce,e.cnonce,e.ha1),l=xt()(`${s}:${n}`),u=o?xt()(`${a}:${e.nonce}:${r}:${e.cnonce}:${o}:${l}`):xt()(`${a}:${e.nonce}:${l}`),h={username:e.username,realm:e.realm,nonce:e.nonce,uri:n,qop:o,response:u,nc:r,cnonce:e.cnonce,algorithm:e.algorithm,opaque:e.opaque},d=[];for(const c in h)h[c]&&(c==="qop"||c==="nc"||c==="algorithm"?d.push(`${c}=${h[c]}`):d.push(`${c}="${h[c]}"`));return`Digest ${d.join(", ")}`}function Zn(i){return(i.headers&&i.headers.get("www-authenticate")||"").split(/\s/)[0].toLowerCase()==="digest"}var $s=se(101),Hs=se.n($s);function ei(i,e){var t;return`Basic ${t=`${i}:${e}`,Hs().encode(t)}`}const ti=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:typeof window<"u"?window:globalThis,Js=ti.fetch.bind(ti);let Be=function(i){return i.Auto="auto",i.Digest="digest",i.None="none",i.Password="password",i.Token="token",i}({}),Et=function(i){return i.DataTypeNoLength="data-type-no-length",i.InvalidAuthType="invalid-auth-type",i.InvalidOutputFormat="invalid-output-format",i.LinkUnsupportedAuthType="link-unsupported-auth",i.InvalidUpdateRange="invalid-update-range",i.NotSupported="not-supported",i}({});function ni(i,e,t,n,s){switch(i.authType){case Be.Auto:e&&t&&(i.headers.Authorization=ei(e,t));break;case Be.Digest:i.digest=function(r,a,l){return{username:r,password:a,ha1:l,nc:0,algorithm:"md5",hasDigestAuth:!1}}(e,t,s);break;case Be.None:break;case Be.Password:i.headers.Authorization=ei(e,t);break;case Be.Token:i.headers.Authorization=`${(o=n).token_type} ${o.access_token}`;break;default:throw new pt({info:{code:Et.InvalidAuthType}},`Invalid auth type: ${i.authType}`)}var o}se(345),se(800);const ii="@@HOTPATCHER",Ys=()=>{};function bn(i){return{original:i,methods:[i],final:!1}}class Gs{constructor(){this._configuration={registry:{},getEmptyAction:"null"},this.__type__=ii}get configuration(){return this._configuration}get getEmptyAction(){return this.configuration.getEmptyAction}set getEmptyAction(e){this.configuration.getEmptyAction=e}control(e){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!e||e.__type__!==ii)throw new Error("Failed taking control of target HotPatcher instance: Invalid type or object");return Object.keys(e.configuration.registry).forEach(n=>{this.configuration.registry.hasOwnProperty(n)?t&&(this.configuration.registry[n]=Object.assign({},e.configuration.registry[n])):this.configuration.registry[n]=Object.assign({},e.configuration.registry[n])}),e._configuration=this.configuration,this}execute(e){const t=this.get(e)||Ys;for(var n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];return t(...s)}get(e){const t=this.configuration.registry[e];if(!t)switch(this.getEmptyAction){case"null":return null;case"throw":throw new Error(`Failed handling method request: No method provided for override: ${e}`);default:throw new Error(`Failed handling request which resulted in an empty method: Invalid empty-action specified: ${this.getEmptyAction}`)}return function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];if(s.length===0)throw new Error("Failed creating sequence: No functions provided");return function(){for(var r=arguments.length,a=new Array(r),l=0;l<r;l++)a[l]=arguments[l];let u=a;const h=this;for(;s.length>0;)u=[s.shift().apply(h,u)];return u[0]}}(...t.methods)}isPatched(e){return!!this.configuration.registry[e]}patch(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{chain:s=!1}=n;if(this.configuration.registry[e]&&this.configuration.registry[e].final)throw new Error(`Failed patching '${e}': Method marked as being final`);if(typeof t!="function")throw new Error(`Failed patching '${e}': Provided method is not a function`);if(s)this.configuration.registry[e]?this.configuration.registry[e].methods.push(t):this.configuration.registry[e]=bn(t);else if(this.isPatched(e)){const{original:o}=this.configuration.registry[e];this.configuration.registry[e]=Object.assign(bn(t),{original:o})}else this.configuration.registry[e]=bn(t);return this}patchInline(e,t){this.isPatched(e)||this.patch(e,t);for(var n=arguments.length,s=new Array(n>2?n-2:0),o=2;o<n;o++)s[o-2]=arguments[o];return this.execute(e,...s)}plugin(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),s=1;s<t;s++)n[s-1]=arguments[s];return n.forEach(o=>{this.patch(e,o,{chain:!0})}),this}restore(e){if(!this.isPatched(e))throw new Error(`Failed restoring method: No method present for key: ${e}`);if(typeof this.configuration.registry[e].original!="function")throw new Error(`Failed restoring method: Original method not found or of invalid type for key: ${e}`);return this.configuration.registry[e].methods=[this.configuration.registry[e].original],this}setFinal(e){if(!this.configuration.registry.hasOwnProperty(e))throw new Error(`Failed marking '${e}' as final: No method found for key`);return this.configuration.registry[e].final=!0,this}}let wn=null;function Vt(i){return function(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(i)?Object.assign({},i):Object.setPrototypeOf(Object.assign({},i),Object.getPrototypeOf(i))}function si(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];let n=null,s=[...e];for(;s.length>0;){const o=s.shift();n=n?ri(n,o):Vt(o)}return n}function ri(i,e){const t=Vt(i);return Object.keys(e).forEach(n=>{t.hasOwnProperty(n)?Array.isArray(e[n])?t[n]=Array.isArray(t[n])?[...t[n],...e[n]]:[...e[n]]:typeof e[n]=="object"&&e[n]?t[n]=typeof t[n]=="object"&&t[n]?ri(t[n],e[n]):Vt(e[n]):t[n]=e[n]:t[n]=e[n]}),t}function qs(i){const e={};for(const t of i.keys())e[t]=i.get(t);return e}function xn(){for(var i=arguments.length,e=new Array(i),t=0;t<i;t++)e[t]=arguments[t];if(e.length===0)return{};const n={};return e.reduce((s,o)=>(Object.keys(o).forEach(r=>{const a=r.toLowerCase();n.hasOwnProperty(a)?s[n[a]]=o[r]:(n[a]=r,s[r]=o[r])}),s),{})}se(805);const Xs=typeof ArrayBuffer=="function",{toString:Ks}=Object.prototype;function Zs(i){return Xs&&(i instanceof ArrayBuffer||Ks.call(i)==="[object ArrayBuffer]")}function er(i){return i!=null&&i.constructor!=null&&typeof i.constructor.isBuffer=="function"&&i.constructor.isBuffer(i)}function En(i){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(i.apply(this,e))}catch(n){return Promise.reject(n)}}}function Cn(i,e,t){return t?e?e(i):i:(i&&i.then||(i=Promise.resolve(i)),e?i.then(e):i)}const oi=En(function(i){const e=i._digest;return delete i._digest,e.hasDigestAuth&&(i=si(i,{headers:{Authorization:Kn(i,e)}})),Cn(Qt(i),function(t){let n=!1;return s=function(r){return n?r:t},(o=function(){if(t.status==401)return e.hasDigestAuth=function(r,a){if(!Zn(r))return!1;const l=/([a-z0-9_-]+)=(?:"([^"]+)"|([a-z0-9_-]+))/gi;for(;;){const u=r.headers&&r.headers.get("www-authenticate")||"",h=l.exec(u);if(!h)break;a[h[1]]=h[2]||h[3]}return a.nc+=1,a.cnonce=function(){let u="";for(let h=0;h<32;++h)u=`${u}${"abcdef0123456789"[Math.floor(16*Math.random())]}`;return u}(),!0}(t,e),function(){if(e.hasDigestAuth)return Cn(Qt(i=si(i,{headers:{Authorization:Kn(i,e)}})),function(r){return r.status==401?e.hasDigestAuth=!1:e.nc++,n=!0,r})}();e.nc++}())&&o.then?o.then(s):s(o);var s,o})}),tr=En(function(i,e){return Cn(Qt(i),function(t){return t.ok?(e.authType=Be.Password,t):t.status==401&&Zn(t)?(e.authType=Be.Digest,ni(e,e.username,e.password,void 0,void 0),i._digest=e.digest,oi(i)):t})}),Le=En(function(i,e){return e.authType===Be.Auto?tr(i,e):i._digest?oi(i):Qt(i)});function ze(i,e,t){const n=Vt(i);return n.headers=xn(e.headers,n.headers||{},t.headers||{}),t.data!==void 0&&(n.data=t.data),t.signal&&(n.signal=t.signal),e.httpAgent&&(n.httpAgent=e.httpAgent),e.httpsAgent&&(n.httpsAgent=e.httpsAgent),e.digest&&(n._digest=e.digest),typeof e.withCredentials=="boolean"&&(n.withCredentials=e.withCredentials),n}function Qt(i){const e=(wn||(wn=new Gs),wn);return e.patchInline("request",t=>e.patchInline("fetch",Js,t.url,function(n){let s={};const o={method:n.method};if(n.headers&&(s=xn(s,n.headers)),n.data!==void 0){const[r,a]=function(l){if(typeof l=="string")return[l,{}];if(er(l))return[l,{}];if(Zs(l))return[l,{}];if(l&&typeof l=="object")return[JSON.stringify(l),{"content-type":"application/json"}];throw new Error("Unable to convert request body: Unexpected body type: "+typeof l)}(n.data);o.body=r,s=xn(s,a)}return n.signal&&(o.signal=n.signal),n.withCredentials&&(o.credentials="include"),o.headers=s,o}(t)),i)}var nr=se(285);const $t=i=>{if(typeof i!="string")throw new TypeError("invalid pattern");if(i.length>65536)throw new TypeError("pattern is too long")},ir={"[:alnum:]":["\\p{L}\\p{Nl}\\p{Nd}",!0],"[:alpha:]":["\\p{L}\\p{Nl}",!0],"[:ascii:]":["\\x00-\\x7f",!1],"[:blank:]":["\\p{Zs}\\t",!0],"[:cntrl:]":["\\p{Cc}",!0],"[:digit:]":["\\p{Nd}",!0],"[:graph:]":["\\p{Z}\\p{C}",!0,!0],"[:lower:]":["\\p{Ll}",!0],"[:print:]":["\\p{C}",!0],"[:punct:]":["\\p{P}",!0],"[:space:]":["\\p{Z}\\t\\r\\n\\v\\f",!0],"[:upper:]":["\\p{Lu}",!0],"[:word:]":["\\p{L}\\p{Nl}\\p{Nd}\\p{Pc}",!0],"[:xdigit:]":["A-Fa-f0-9",!1]},Ct=i=>i.replace(/[[\]\\-]/g,"\\$&"),ai=i=>i.join(""),sr=(i,e)=>{const t=e;if(i.charAt(t)!=="[")throw new Error("not in a brace expression");const n=[],s=[];let o=t+1,r=!1,a=!1,l=!1,u=!1,h=t,d="";e:for(;o<i.length;){const p=i.charAt(o);if(p!=="!"&&p!=="^"||o!==t+1){if(p==="]"&&r&&!l){h=o+1;break}if(r=!0,p!=="\\"||l){if(p==="["&&!l){for(const[m,[b,v,y]]of Object.entries(ir))if(i.startsWith(m,o)){if(d)return["$.",!1,i.length-t,!0];o+=m.length,y?s.push(b):n.push(b),a=a||v;continue e}}l=!1,d?(p>d?n.push(Ct(d)+"-"+Ct(p)):p===d&&n.push(Ct(p)),d="",o++):i.startsWith("-]",o+1)?(n.push(Ct(p+"-")),o+=2):i.startsWith("-",o+1)?(d=p,o+=2):(n.push(Ct(p)),o++)}else l=!0,o++}else u=!0,o++}if(h<o)return["",!1,0,!1];if(!n.length&&!s.length)return["$.",!1,i.length-t,!0];if(s.length===0&&n.length===1&&/^\\?.$/.test(n[0])&&!u)return[(c=n[0].length===2?n[0].slice(-1):n[0],c.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")),!1,h-t,!1];var c;const f="["+(u?"^":"")+ai(n)+"]",g="["+(u?"":"^")+ai(s)+"]";return[n.length&&s.length?"("+f+"|"+g+")":n.length?f:g,a,h-t,!0]},At=function(i){let{windowsPathsNoEscape:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e?i.replace(/\[([^\/\\])\]/g,"$1"):i.replace(/((?!\\).|^)\[([^\/\\])\]/g,"$1$2").replace(/\\([^\/])/g,"$1")},rr=new Set(["!","?","+","*","@"]),li=i=>rr.has(i),An="(?!\\.)",or=new Set(["[","."]),ar=new Set(["..","."]),lr=new Set("().*{}+?[]^$\\!"),kn="[^/]",ui=kn+"*?",hi=kn+"+?",we=class we{constructor(e,t){be(this,nn);be(this,Rt);pe(this,"type");be(this,fe,void 0);be(this,ge,void 0);be(this,Qe,!1);be(this,oe,[]);be(this,de,void 0);be(this,Ke,void 0);be(this,ot,void 0);be(this,Ze,!1);be(this,Fe,void 0);be(this,at,void 0);be(this,Mt,!1);let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.type=e,e&&ue(this,ge,!0),ue(this,de,t),ue(this,fe,P(this,de)?P(P(this,de),fe):this),ue(this,Fe,P(this,fe)===this?n:P(P(this,fe),Fe)),ue(this,ot,P(this,fe)===this?[]:P(P(this,fe),ot)),e!=="!"||P(P(this,fe),Ze)||P(this,ot).push(this),ue(this,Ke,P(this,de)?P(P(this,de),oe).length:0)}get hasMagic(){if(P(this,ge)!==void 0)return P(this,ge);for(const e of P(this,oe))if(typeof e!="string"&&(e.type||e.hasMagic))return ue(this,ge,!0);return P(this,ge)}toString(){return P(this,at)!==void 0?P(this,at):this.type?ue(this,at,this.type+"("+P(this,oe).map(e=>String(e)).join("|")+")"):ue(this,at,P(this,oe).map(e=>String(e)).join(""))}push(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(const s of t)if(s!==""){if(typeof s!="string"&&!(s instanceof we&&P(s,de)===this))throw new Error("invalid part: "+s);P(this,oe).push(s)}}toJSON(){var t;const e=this.type===null?P(this,oe).slice().map(n=>typeof n=="string"?n:n.toJSON()):[this.type,...P(this,oe).map(n=>n.toJSON())];return this.isStart()&&!this.type&&e.unshift([]),this.isEnd()&&(this===P(this,fe)||P(P(this,fe),Ze)&&((t=P(this,de))==null?void 0:t.type)==="!")&&e.push({}),e}isStart(){var t;if(P(this,fe)===this)return!0;if(!((t=P(this,de))!=null&&t.isStart()))return!1;if(P(this,Ke)===0)return!0;const e=P(this,de);for(let n=0;n<P(this,Ke);n++){const s=P(e,oe)[n];if(!(s instanceof we&&s.type==="!"))return!1}return!0}isEnd(){var t,n,s;if(P(this,fe)===this||((t=P(this,de))==null?void 0:t.type)==="!")return!0;if(!((n=P(this,de))!=null&&n.isEnd()))return!1;if(!this.type)return(s=P(this,de))==null?void 0:s.isEnd();const e=P(this,de)?P(P(this,de),oe).length:0;return P(this,Ke)===e-1}copyIn(e){typeof e=="string"?this.push(e):this.push(e.clone(this))}clone(e){const t=new we(this.type,e);for(const n of P(this,oe))t.copyIn(n);return t}static fromGlob(e){var s;let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const n=new we(null,void 0,t);return $e(s=we,vt,tn).call(s,e,n,0,t),n}toMMPattern(){if(this!==P(this,fe))return P(this,fe).toMMPattern();const e=this.toString(),[t,n,s,o]=this.toRegExpSource();if(!(s||P(this,ge)||P(this,Fe).nocase&&!P(this,Fe).nocaseMagicOnly&&e.toUpperCase()!==e.toLowerCase()))return n;const r=(P(this,Fe).nocase?"i":"")+(o?"u":"");return Object.assign(new RegExp(`^${t}$`,r),{_src:t,_glob:e})}get options(){return P(this,Fe)}toRegExpSource(e){var l;const t=e??!!P(this,Fe).dot;if(P(this,fe)===this&&$e(this,nn,Ki).call(this),!this.type){const u=this.isStart()&&this.isEnd(),h=P(this,oe).map(f=>{var v;const[g,p,m,b]=typeof f=="string"?$e(v=we,sn,Zi).call(v,f,P(this,ge),u):f.toRegExpSource(e);return ue(this,ge,P(this,ge)||m),ue(this,Qe,P(this,Qe)||b),g}).join("");let d="";if(this.isStart()&&typeof P(this,oe)[0]=="string"&&(P(this,oe).length!==1||!ar.has(P(this,oe)[0]))){const f=or,g=t&&f.has(h.charAt(0))||h.startsWith("\\.")&&f.has(h.charAt(2))||h.startsWith("\\.\\.")&&f.has(h.charAt(4)),p=!t&&!e&&f.has(h.charAt(0));d=g?"(?!(?:^|/)\\.\\.?(?:$|/))":p?An:""}let c="";return this.isEnd()&&P(P(this,fe),Ze)&&((l=P(this,de))==null?void 0:l.type)==="!"&&(c="(?:$|\\/)"),[d+h+c,At(h),ue(this,ge,!!P(this,ge)),P(this,Qe)]}const n=this.type==="*"||this.type==="+",s=this.type==="!"?"(?:(?!(?:":"(?:";let o=$e(this,Rt,Dn).call(this,t);if(this.isStart()&&this.isEnd()&&!o&&this.type!=="!"){const u=this.toString();return ue(this,oe,[u]),this.type=null,ue(this,ge,void 0),[u,At(this.toString()),!1,!1]}let r=!n||e||t?"":$e(this,Rt,Dn).call(this,!0);r===o&&(r=""),r&&(o=`(?:${o})(?:${r})*?`);let a="";return a=this.type==="!"&&P(this,Mt)?(this.isStart()&&!t?An:"")+hi:s+o+(this.type==="!"?"))"+(!this.isStart()||t||e?"":An)+ui+")":this.type==="@"?")":this.type==="?"?")?":this.type==="+"&&r?")":this.type==="*"&&r?")?":`)${this.type}`),[a,At(o),ue(this,ge,!!P(this,ge)),P(this,Qe)]}};fe=new WeakMap,ge=new WeakMap,Qe=new WeakMap,oe=new WeakMap,de=new WeakMap,Ke=new WeakMap,ot=new WeakMap,Ze=new WeakMap,Fe=new WeakMap,at=new WeakMap,Mt=new WeakMap,nn=new WeakSet,Ki=function(){if(this!==P(this,fe))throw new Error("should only call on root");if(P(this,Ze))return this;let e;for(this.toString(),ue(this,Ze,!0);e=P(this,ot).pop();){if(e.type!=="!")continue;let t=e,n=P(t,de);for(;n;){for(let s=P(t,Ke)+1;!n.type&&s<P(n,oe).length;s++)for(const o of P(e,oe)){if(typeof o=="string")throw new Error("string part in extglob AST??");o.copyIn(P(n,oe)[s])}t=n,n=P(t,de)}}return this},vt=new WeakSet,tn=function(e,t,n,s){var f,g;let o=!1,r=!1,a=-1,l=!1;if(t.type===null){let p=n,m="";for(;p<e.length;){const b=e.charAt(p++);if(o||b==="\\")o=!o,m+=b;else if(r)p===a+1?b!=="^"&&b!=="!"||(l=!0):b!=="]"||p===a+2&&l||(r=!1),m+=b;else if(b!=="[")if(s.noext||!li(b)||e.charAt(p)!=="(")m+=b;else{t.push(m),m="";const v=new we(b,t);p=$e(f=we,vt,tn).call(f,e,v,p,s),t.push(v)}else r=!0,a=p,l=!1,m+=b}return t.push(m),p}let u=n+1,h=new we(null,t);const d=[];let c="";for(;u<e.length;){const p=e.charAt(u++);if(o||p==="\\")o=!o,c+=p;else if(r)u===a+1?p!=="^"&&p!=="!"||(l=!0):p!=="]"||u===a+2&&l||(r=!1),c+=p;else if(p!=="[")if(li(p)&&e.charAt(u)==="("){h.push(c),c="";const m=new we(p,h);h.push(m),u=$e(g=we,vt,tn).call(g,e,m,u,s)}else if(p!=="|"){if(p===")")return c===""&&P(t,oe).length===0&&ue(t,Mt,!0),h.push(c),c="",t.push(...d,h),u;c+=p}else h.push(c),c="",d.push(h),h=new we(null,t);else r=!0,a=u,l=!1,c+=p}return t.type=null,ue(t,ge,void 0),ue(t,oe,[e.substring(n-1)]),u},Rt=new WeakSet,Dn=function(e){return P(this,oe).map(t=>{if(typeof t=="string")throw new Error("string type in extglob ast??");const[n,s,o,r]=t.toRegExpSource(e);return ue(this,Qe,P(this,Qe)||r),n}).filter(t=>!(this.isStart()&&this.isEnd()&&!t)).join("|")},sn=new WeakSet,Zi=function(e,t){let n=arguments.length>2&&arguments[2]!==void 0&&arguments[2],s=!1,o="",r=!1;for(let a=0;a<e.length;a++){const l=e.charAt(a);if(s)s=!1,o+=(lr.has(l)?"\\":"")+l;else if(l!=="\\"){if(l==="["){const[u,h,d,c]=sr(e,a);if(d){o+=u,r=r||h,a+=d-1,t=t||c;continue}}l!=="*"?l!=="?"?o+=l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):(o+=kn,t=!0):(o+=n&&e==="*"?hi:ui,t=!0)}else a===e.length-1?o+="\\\\":s=!0}return[o,At(e),!!t,r]},be(we,vt),be(we,sn);let Ht=we;const xe=function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return $t(e),!(!t.nocomment&&e.charAt(0)==="#")&&new Jt(e,t).match(i)},ur=/^\*+([^+@!?\*\[\(]*)$/,hr=i=>e=>!e.startsWith(".")&&e.endsWith(i),cr=i=>e=>e.endsWith(i),dr=i=>(i=i.toLowerCase(),e=>!e.startsWith(".")&&e.toLowerCase().endsWith(i)),pr=i=>(i=i.toLowerCase(),e=>e.toLowerCase().endsWith(i)),fr=/^\*+\.\*+$/,gr=i=>!i.startsWith(".")&&i.includes("."),mr=i=>i!=="."&&i!==".."&&i.includes("."),vr=/^\.\*+$/,yr=i=>i!=="."&&i!==".."&&i.startsWith("."),br=/^\*+$/,wr=i=>i.length!==0&&!i.startsWith("."),xr=i=>i.length!==0&&i!=="."&&i!=="..",Er=/^\?+([^+@!?\*\[\(]*)?$/,Cr=i=>{let[e,t=""]=i;const n=ci([e]);return t?(t=t.toLowerCase(),s=>n(s)&&s.toLowerCase().endsWith(t)):n},Ar=i=>{let[e,t=""]=i;const n=di([e]);return t?(t=t.toLowerCase(),s=>n(s)&&s.toLowerCase().endsWith(t)):n},kr=i=>{let[e,t=""]=i;const n=di([e]);return t?s=>n(s)&&s.endsWith(t):n},Sr=i=>{let[e,t=""]=i;const n=ci([e]);return t?s=>n(s)&&s.endsWith(t):n},ci=i=>{let[e]=i;const t=e.length;return n=>n.length===t&&!n.startsWith(".")},di=i=>{let[e]=i;const t=e.length;return n=>n.length===t&&n!=="."&&n!==".."},pi=typeof process=="object"&&process?typeof process.env=="object"&&process.env&&{}.__MINIMATCH_TESTING_PLATFORM__||process.platform:"posix";xe.sep=pi==="win32"?"\\":"/";const Te=Symbol("globstar **");xe.GLOBSTAR=Te,xe.filter=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return t=>xe(t,i,e)};const Ne=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Object.assign({},i,e)};xe.defaults=i=>{if(!i||typeof i!="object"||!Object.keys(i).length)return xe;const e=xe;return Object.assign(function(t,n){return e(t,n,Ne(i,arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}))},{Minimatch:class extends e.Minimatch{constructor(t){super(t,Ne(i,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}))}static defaults(t){return e.defaults(Ne(i,t)).Minimatch}},AST:class extends e.AST{constructor(t,n){super(t,n,Ne(i,arguments.length>2&&arguments[2]!==void 0?arguments[2]:{}))}static fromGlob(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.AST.fromGlob(t,Ne(i,n))}},unescape:function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.unescape(t,Ne(i,n))},escape:function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.escape(t,Ne(i,n))},filter:function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.filter(t,Ne(i,n))},defaults:t=>e.defaults(Ne(i,t)),makeRe:function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.makeRe(t,Ne(i,n))},braceExpand:function(t){let n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e.braceExpand(t,Ne(i,n))},match:function(t,n){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return e.match(t,n,Ne(i,s))},sep:e.sep,GLOBSTAR:Te})};const fi=function(i){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return $t(i),e.nobrace||!/\{(?:(?!\{).)*\}/.test(i)?[i]:nr(i)};xe.braceExpand=fi,xe.makeRe=function(i){return new Jt(i,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}).makeRe()},xe.match=function(i,e){const t=new Jt(e,arguments.length>2&&arguments[2]!==void 0?arguments[2]:{});return i=i.filter(n=>t.match(n)),t.options.nonull&&!i.length&&i.push(e),i};const gi=/[?*]|[+@!]\(.*?\)|\[|\]/;class Jt{constructor(e){pe(this,"options");pe(this,"set");pe(this,"pattern");pe(this,"windowsPathsNoEscape");pe(this,"nonegate");pe(this,"negate");pe(this,"comment");pe(this,"empty");pe(this,"preserveMultipleSlashes");pe(this,"partial");pe(this,"globSet");pe(this,"globParts");pe(this,"nocase");pe(this,"isWindows");pe(this,"platform");pe(this,"windowsNoMagicRoot");pe(this,"regexp");let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};$t(e),t=t||{},this.options=t,this.pattern=e,this.platform=t.platform||pi,this.isWindows=this.platform==="win32",this.windowsPathsNoEscape=!!t.windowsPathsNoEscape||t.allowWindowsEscape===!1,this.windowsPathsNoEscape&&(this.pattern=this.pattern.replace(/\\/g,"/")),this.preserveMultipleSlashes=!!t.preserveMultipleSlashes,this.regexp=null,this.negate=!1,this.nonegate=!!t.nonegate,this.comment=!1,this.empty=!1,this.partial=!!t.partial,this.nocase=!!this.options.nocase,this.windowsNoMagicRoot=t.windowsNoMagicRoot!==void 0?t.windowsNoMagicRoot:!(!this.isWindows||!this.nocase),this.globSet=[],this.globParts=[],this.set=[],this.make()}hasMagic(){if(this.options.magicalBraces&&this.set.length>1)return!0;for(const e of this.set)for(const t of e)if(typeof t!="string")return!0;return!1}debug(){}make(){const e=this.pattern,t=this.options;if(!t.nocomment&&e.charAt(0)==="#")return void(this.comment=!0);if(!e)return void(this.empty=!0);this.parseNegate(),this.globSet=[...new Set(this.braceExpand())],t.debug&&(this.debug=function(){return console.error(...arguments)}),this.debug(this.pattern,this.globSet);const n=this.globSet.map(o=>this.slashSplit(o));this.globParts=this.preprocess(n),this.debug(this.pattern,this.globParts);let s=this.globParts.map((o,r,a)=>{if(this.isWindows&&this.windowsNoMagicRoot){const l=!(o[0]!==""||o[1]!==""||o[2]!=="?"&&gi.test(o[2])||gi.test(o[3])),u=/^[a-z]:/i.test(o[0]);if(l)return[...o.slice(0,4),...o.slice(4).map(h=>this.parse(h))];if(u)return[o[0],...o.slice(1).map(h=>this.parse(h))]}return o.map(l=>this.parse(l))});if(this.debug(this.pattern,s),this.set=s.filter(o=>o.indexOf(!1)===-1),this.isWindows)for(let o=0;o<this.set.length;o++){const r=this.set[o];r[0]===""&&r[1]===""&&this.globParts[o][2]==="?"&&typeof r[3]=="string"&&/^[a-z]:$/i.test(r[3])&&(r[2]="?")}this.debug(this.pattern,this.set)}preprocess(e){if(this.options.noglobstar)for(let n=0;n<e.length;n++)for(let s=0;s<e[n].length;s++)e[n][s]==="**"&&(e[n][s]="*");const{optimizationLevel:t=1}=this.options;return t>=2?(e=this.firstPhasePreProcess(e),e=this.secondPhasePreProcess(e)):e=t>=1?this.levelOneOptimize(e):this.adjascentGlobstarOptimize(e),e}adjascentGlobstarOptimize(e){return e.map(t=>{let n=-1;for(;(n=t.indexOf("**",n+1))!==-1;){let s=n;for(;t[s+1]==="**";)s++;s!==n&&t.splice(n,s-n)}return t})}levelOneOptimize(e){return e.map(t=>(t=t.reduce((n,s)=>{const o=n[n.length-1];return s==="**"&&o==="**"?n:s===".."&&o&&o!==".."&&o!=="."&&o!=="**"?(n.pop(),n):(n.push(s),n)},[])).length===0?[""]:t)}levelTwoFileOptimize(e){Array.isArray(e)||(e=this.slashSplit(e));let t=!1;do{if(t=!1,!this.preserveMultipleSlashes){for(let s=1;s<e.length-1;s++){const o=e[s];s===1&&o===""&&e[0]===""||o!=="."&&o!==""||(t=!0,e.splice(s,1),s--)}e[0]!=="."||e.length!==2||e[1]!=="."&&e[1]!==""||(t=!0,e.pop())}let n=0;for(;(n=e.indexOf("..",n+1))!==-1;){const s=e[n-1];s&&s!=="."&&s!==".."&&s!=="**"&&(t=!0,e.splice(n-1,2),n-=2)}}while(t);return e.length===0?[""]:e}firstPhasePreProcess(e){let t=!1;do{t=!1;for(let n of e){let s=-1;for(;(s=n.indexOf("**",s+1))!==-1;){let r=s;for(;n[r+1]==="**";)r++;r>s&&n.splice(s+1,r-s);let a=n[s+1];const l=n[s+2],u=n[s+3];if(a!==".."||!l||l==="."||l===".."||!u||u==="."||u==="..")continue;t=!0,n.splice(s,1);const h=n.slice(0);h[s]="**",e.push(h),s--}if(!this.preserveMultipleSlashes){for(let r=1;r<n.length-1;r++){const a=n[r];r===1&&a===""&&n[0]===""||a!=="."&&a!==""||(t=!0,n.splice(r,1),r--)}n[0]!=="."||n.length!==2||n[1]!=="."&&n[1]!==""||(t=!0,n.pop())}let o=0;for(;(o=n.indexOf("..",o+1))!==-1;){const r=n[o-1];if(r&&r!=="."&&r!==".."&&r!=="**"){t=!0;const a=o===1&&n[o+1]==="**"?["."]:[];n.splice(o-1,2,...a),n.length===0&&n.push(""),o-=2}}}}while(t);return e}secondPhasePreProcess(e){for(let t=0;t<e.length-1;t++)for(let n=t+1;n<e.length;n++){const s=this.partsMatch(e[t],e[n],!this.preserveMultipleSlashes);if(s){e[t]=[],e[n]=s;break}}return e.filter(t=>t.length)}partsMatch(e,t){let n=arguments.length>2&&arguments[2]!==void 0&&arguments[2],s=0,o=0,r=[],a="";for(;s<e.length&&o<t.length;)if(e[s]===t[o])r.push(a==="b"?t[o]:e[s]),s++,o++;else if(n&&e[s]==="**"&&t[o]===e[s+1])r.push(e[s]),s++;else if(n&&t[o]==="**"&&e[s]===t[o+1])r.push(t[o]),o++;else if(e[s]!=="*"||!t[o]||!this.options.dot&&t[o].startsWith(".")||t[o]==="**"){if(t[o]!=="*"||!e[s]||!this.options.dot&&e[s].startsWith(".")||e[s]==="**"||a==="a")return!1;a="b",r.push(t[o]),s++,o++}else{if(a==="b")return!1;a="a",r.push(e[s]),s++,o++}return e.length===t.length&&r}parseNegate(){if(this.nonegate)return;const e=this.pattern;let t=!1,n=0;for(let s=0;s<e.length&&e.charAt(s)==="!";s++)t=!t,n++;n&&(this.pattern=e.slice(n)),this.negate=t}matchOne(e,t){let n=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const s=this.options;if(this.isWindows){const p=typeof e[0]=="string"&&/^[a-z]:$/i.test(e[0]),m=!p&&e[0]===""&&e[1]===""&&e[2]==="?"&&/^[a-z]:$/i.test(e[3]),b=typeof t[0]=="string"&&/^[a-z]:$/i.test(t[0]),v=m?3:p?0:void 0,y=!b&&t[0]===""&&t[1]===""&&t[2]==="?"&&typeof t[3]=="string"&&/^[a-z]:$/i.test(t[3])?3:b?0:void 0;if(typeof v=="number"&&typeof y=="number"){const[w,x]=[e[v],t[y]];w.toLowerCase()===x.toLowerCase()&&(t[y]=w,y>v?t=t.slice(y):v>y&&(e=e.slice(v)))}}const{optimizationLevel:o=1}=this.options;o>=2&&(e=this.levelTwoFileOptimize(e)),this.debug("matchOne",this,{file:e,pattern:t}),this.debug("matchOne",e.length,t.length);for(var r=0,a=0,l=e.length,u=t.length;r<l&&a<u;r++,a++){this.debug("matchOne loop");var h=t[a],d=e[r];if(this.debug(t,h,d),h===!1)return!1;if(h===Te){this.debug("GLOBSTAR",[t,h,d]);var c=r,f=a+1;if(f===u){for(this.debug("** at the end");r<l;r++)if(e[r]==="."||e[r]===".."||!s.dot&&e[r].charAt(0)===".")return!1;return!0}for(;c<l;){var g=e[c];if(this.debug(`
globstar while`,e,c,t,f,g),this.matchOne(e.slice(c),t.slice(f),n))return this.debug("globstar found match!",c,l,g),!0;if(g==="."||g===".."||!s.dot&&g.charAt(0)==="."){this.debug("dot detected!",e,c,t,f);break}this.debug("globstar swallow a segment, and continue"),c++}return!(!n||(this.debug(`
>>> no match, partial?`,e,c,t,f),c!==l))}let p;if(typeof h=="string"?(p=d===h,this.debug("string match",h,d,p)):(p=h.test(d),this.debug("pattern match",h,d,p)),!p)return!1}if(r===l&&a===u)return!0;if(r===l)return n;if(a===u)return r===l-1&&e[r]==="";throw new Error("wtf?")}braceExpand(){return fi(this.pattern,this.options)}parse(e){$t(e);const t=this.options;if(e==="**")return Te;if(e==="")return"";let n,s=null;(n=e.match(br))?s=t.dot?xr:wr:(n=e.match(ur))?s=(t.nocase?t.dot?pr:dr:t.dot?cr:hr)(n[1]):(n=e.match(Er))?s=(t.nocase?t.dot?Ar:Cr:t.dot?kr:Sr)(n):(n=e.match(fr))?s=t.dot?mr:gr:(n=e.match(vr))&&(s=yr);const o=Ht.fromGlob(e,this.options).toMMPattern();return s&&typeof o=="object"&&Reflect.defineProperty(o,"test",{value:s}),o}makeRe(){if(this.regexp||this.regexp===!1)return this.regexp;const e=this.set;if(!e.length)return this.regexp=!1,this.regexp;const t=this.options,n=t.noglobstar?"[^/]*?":t.dot?"(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?":"(?:(?!(?:\\/|^)\\.).)*?",s=new Set(t.nocase?["i"]:[]);let o=e.map(l=>{const u=l.map(h=>{if(h instanceof RegExp)for(const d of h.flags.split(""))s.add(d);return typeof h=="string"?h.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"):h===Te?Te:h._src});return u.forEach((h,d)=>{const c=u[d+1],f=u[d-1];h===Te&&f!==Te&&(f===void 0?c!==void 0&&c!==Te?u[d+1]="(?:\\/|"+n+"\\/)?"+c:u[d]=n:c===void 0?u[d-1]=f+"(?:\\/|"+n+")?":c!==Te&&(u[d-1]=f+"(?:\\/|\\/"+n+"\\/)"+c,u[d+1]=Te))}),u.filter(h=>h!==Te).join("/")}).join("|");const[r,a]=e.length>1?["(?:",")"]:["",""];o="^"+r+o+a+"$",this.negate&&(o="^(?!"+o+").+$");try{this.regexp=new RegExp(o,[...s].join(""))}catch{this.regexp=!1}return this.regexp}slashSplit(e){return this.preserveMultipleSlashes?e.split("/"):this.isWindows&&/^\/\/[^\/]+/.test(e)?["",...e.split(/\/+/)]:e.split(/\/+/)}match(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.partial;if(this.debug("match",e,this.pattern),this.comment)return!1;if(this.empty)return e==="";if(e==="/"&&t)return!0;const n=this.options;this.isWindows&&(e=e.split("\\").join("/"));const s=this.slashSplit(e);this.debug(this.pattern,"split",s);const o=this.set;this.debug(this.pattern,"set",o);let r=s[s.length-1];if(!r)for(let a=s.length-2;!r&&a>=0;a--)r=s[a];for(let a=0;a<o.length;a++){const l=o[a];let u=s;if(n.matchBase&&l.length===1&&(u=[r]),this.matchOne(u,l,t))return!!n.flipNegate||!this.negate}return!n.flipNegate&&this.negate}static defaults(e){return xe.defaults(e).Minimatch}}function Sn(i){const e=new Error(`${arguments.length>1&&arguments[1]!==void 0?arguments[1]:""}Invalid response: ${i.status} ${i.statusText}`);return e.status=i.status,e.response=i,e}function De(i,e){const{status:t}=e;if(t===401&&i.digest)return e;if(t>=400)throw Sn(e);return e}function Pn(i,e){return arguments.length>2&&arguments[2]!==void 0&&arguments[2]?{data:e,headers:i.headers?qs(i.headers):{},status:i.status,statusText:i.statusText}:e}xe.AST=Ht,xe.Minimatch=Jt,xe.escape=function(i){let{windowsPathsNoEscape:e=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return e?i.replace(/[?*()[\]]/g,"[$&]"):i.replace(/[?*()[\]\\]/g,"\\$&")},xe.unescape=At,Pr=function(i,e,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=ze({url:Re(i.remoteURL,Me(e)),method:"COPY",headers:{Destination:Re(i.remoteURL,Me(t)),Overwrite:n.overwrite===!1?"F":"T",Depth:n.shallow?"0":"infinity"}},i,n);return r=function(a){De(i,a)},(o=Le(s,i))&&o.then||(o=Promise.resolve(o)),r?o.then(r):o;var o,r};var Pr;const Ir={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(i,e){return e},attributeValueProcessor:function(i,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(i,e,t){return i},captureMetaData:!1},mi=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Tr=new RegExp("^["+mi+"]["+mi+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$");function vi(i,e){const t=[];let n=e.exec(i);for(;n;){const s=[];s.startIndex=e.lastIndex-n[0].length;const o=n.length;for(let r=0;r<o;r++)s.push(n[r]);t.push(s),n=e.exec(i)}return t}const Yt=function(i){return Tr.exec(i)!=null};let In;In=typeof Symbol!="function"?"@@xmlMetadata":Symbol("XML Node Metadata");class tt{constructor(e){this.tagname=e,this.child=[],this[":@"]={}}add(e,t){e==="__proto__"&&(e="#__proto__"),this.child.push({[e]:t})}addChild(e,t){e.tagname==="__proto__"&&(e.tagname="#__proto__"),e[":@"]&&Object.keys(e[":@"]).length>0?this.child.push({[e.tagname]:e.child,":@":e[":@"]}):this.child.push({[e.tagname]:e.child}),t!==void 0&&(this.child[this.child.length-1][In]={startIndex:t})}static getMetaDataSymbol(){return In}}class Nr{constructor(e){this.suppressValidationErr=!e}readDocType(e,t){const n={};if(e[t+3]!=="O"||e[t+4]!=="C"||e[t+5]!=="T"||e[t+6]!=="Y"||e[t+7]!=="P"||e[t+8]!=="E")throw new Error("Invalid Tag instead of DOCTYPE");{t+=9;let s=1,o=!1,r=!1,a="";for(;t<e.length;t++)if(e[t]!=="<"||r)if(e[t]===">"){if(r?e[t-1]==="-"&&e[t-2]==="-"&&(r=!1,s--):s--,s===0)break}else e[t]==="["?o=!0:a+=e[t];else{if(o&&nt(e,"!ENTITY",t)){let l,u;t+=7,[l,u,t]=this.readEntityExp(e,t+1,this.suppressValidationErr),u.indexOf("&")===-1&&(n[l]={regx:RegExp(`&${l};`,"g"),val:u})}else if(o&&nt(e,"!ELEMENT",t)){t+=8;const{index:l}=this.readElementExp(e,t+1);t=l}else if(o&&nt(e,"!ATTLIST",t))t+=8;else if(o&&nt(e,"!NOTATION",t)){t+=9;const{index:l}=this.readNotationExp(e,t+1,this.suppressValidationErr);t=l}else{if(!nt(e,"!--",t))throw new Error("Invalid DOCTYPE");r=!0}s++,a=""}if(s!==0)throw new Error("Unclosed DOCTYPE")}return{entities:n,i:t}}readEntityExp(e,t){t=Se(e,t);let n="";for(;t<e.length&&!/\s/.test(e[t])&&e[t]!=='"'&&e[t]!=="'";)n+=e[t],t++;if(kt(n),t=Se(e,t),!this.suppressValidationErr){if(e.substring(t,t+6).toUpperCase()==="SYSTEM")throw new Error("External entities are not supported");if(e[t]==="%")throw new Error("Parameter entities are not supported")}let s="";return[t,s]=this.readIdentifierVal(e,t,"entity"),[n,s,--t]}readNotationExp(e,t){t=Se(e,t);let n="";for(;t<e.length&&!/\s/.test(e[t]);)n+=e[t],t++;!this.suppressValidationErr&&kt(n),t=Se(e,t);const s=e.substring(t,t+6).toUpperCase();if(!this.suppressValidationErr&&s!=="SYSTEM"&&s!=="PUBLIC")throw new Error(`Expected SYSTEM or PUBLIC, found "${s}"`);t+=s.length,t=Se(e,t);let o=null,r=null;if(s==="PUBLIC")[t,o]=this.readIdentifierVal(e,t,"publicIdentifier"),e[t=Se(e,t)]!=='"'&&e[t]!=="'"||([t,r]=this.readIdentifierVal(e,t,"systemIdentifier"));else if(s==="SYSTEM"&&([t,r]=this.readIdentifierVal(e,t,"systemIdentifier"),!this.suppressValidationErr&&!r))throw new Error("Missing mandatory system identifier for SYSTEM notation");return{notationName:n,publicIdentifier:o,systemIdentifier:r,index:--t}}readIdentifierVal(e,t,n){let s="";const o=e[t];if(o!=='"'&&o!=="'")throw new Error(`Expected quoted string, found "${o}"`);for(t++;t<e.length&&e[t]!==o;)s+=e[t],t++;if(e[t]!==o)throw new Error(`Unterminated ${n} value`);return[++t,s]}readElementExp(e,t){t=Se(e,t);let n="";for(;t<e.length&&!/\s/.test(e[t]);)n+=e[t],t++;if(!this.suppressValidationErr&&!Yt(n))throw new Error(`Invalid element name: "${n}"`);let s="";if(e[t=Se(e,t)]==="E"&&nt(e,"MPTY",t))t+=4;else if(e[t]==="A"&&nt(e,"NY",t))t+=2;else if(e[t]==="("){for(t++;t<e.length&&e[t]!==")";)s+=e[t],t++;if(e[t]!==")")throw new Error("Unterminated content model")}else if(!this.suppressValidationErr)throw new Error(`Invalid Element Expression, found "${e[t]}"`);return{elementName:n,contentModel:s.trim(),index:t}}readAttlistExp(e,t){t=Se(e,t);let n="";for(;t<e.length&&!/\s/.test(e[t]);)n+=e[t],t++;kt(n),t=Se(e,t);let s="";for(;t<e.length&&!/\s/.test(e[t]);)s+=e[t],t++;if(!kt(s))throw new Error(`Invalid attribute name: "${s}"`);t=Se(e,t);let o="";if(e.substring(t,t+8).toUpperCase()==="NOTATION"){if(o="NOTATION",e[t=Se(e,t+=8)]!=="(")throw new Error(`Expected '(', found "${e[t]}"`);t++;let a=[];for(;t<e.length&&e[t]!==")";){let l="";for(;t<e.length&&e[t]!=="|"&&e[t]!==")";)l+=e[t],t++;if(l=l.trim(),!kt(l))throw new Error(`Invalid notation name: "${l}"`);a.push(l),e[t]==="|"&&(t++,t=Se(e,t))}if(e[t]!==")")throw new Error("Unterminated list of notations");t++,o+=" ("+a.join("|")+")"}else{for(;t<e.length&&!/\s/.test(e[t]);)o+=e[t],t++;const a=["CDATA","ID","IDREF","IDREFS","ENTITY","ENTITIES","NMTOKEN","NMTOKENS"];if(!this.suppressValidationErr&&!a.includes(o.toUpperCase()))throw new Error(`Invalid attribute type: "${o}"`)}t=Se(e,t);let r="";return e.substring(t,t+8).toUpperCase()==="#REQUIRED"?(r="#REQUIRED",t+=8):e.substring(t,t+7).toUpperCase()==="#IMPLIED"?(r="#IMPLIED",t+=7):[t,r]=this.readIdentifierVal(e,t,"ATTLIST"),{elementName:n,attributeName:s,attributeType:o,defaultValue:r,index:t}}}const Se=(i,e)=>{for(;e<i.length&&/\s/.test(i[e]);)e++;return e};function nt(i,e,t){for(let n=0;n<e.length;n++)if(e[n]!==i[t+n+1])return!1;return!0}function kt(i){if(Yt(i))return i;throw new Error(`Invalid entity name ${i}`)}const Or=/^[-+]?0x[a-fA-F0-9]+$/,Mr=/^([\-\+])?(0*)([0-9]*(\.[0-9]*)?)$/,Rr={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0},jr=/^([-+])?(0*)(\d*(\.\d*)?[eE][-\+]?\d+)$/;function yi(i){return typeof i=="function"?i:Array.isArray(i)?e=>{for(const t of i)if(typeof t=="string"&&e===t||t instanceof RegExp&&t.test(e))return!0}:()=>!1}class Br{constructor(e){if(this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"},num_dec:{regex:/&#([0-9]{1,7});/g,val:(t,n)=>wi(n,10,"&#")},num_hex:{regex:/&#x([0-9a-fA-F]{1,6});/g,val:(t,n)=>wi(n,16,"&#x")}},this.addExternalEntities=Lr,this.parseXml=Wr,this.parseTextData=zr,this.resolveNameSpace=Dr,this.buildAttributesMap=_r,this.isItStopNode=$r,this.replaceEntitiesValue=Vr,this.readStopNodeData=Hr,this.saveTextToParentTag=Qr,this.addChild=Ur,this.ignoreAttributesFn=yi(this.options.ignoreAttributes),this.options.stopNodes&&this.options.stopNodes.length>0){this.stopNodesExact=new Set,this.stopNodesWildcard=new Set;for(let t=0;t<this.options.stopNodes.length;t++){const n=this.options.stopNodes[t];typeof n=="string"&&(n.startsWith("*.")?this.stopNodesWildcard.add(n.substring(2)):this.stopNodesExact.add(n))}}}}function Lr(i){const e=Object.keys(i);for(let t=0;t<e.length;t++){const n=e[t];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:i[n]}}}function zr(i,e,t,n,s,o,r){if(i!==void 0&&(this.options.trimValues&&!n&&(i=i.trim()),i.length>0)){r||(i=this.replaceEntitiesValue(i));const a=this.options.tagValueProcessor(e,i,t,s,o);return a==null?i:typeof a!=typeof i||a!==i?a:this.options.trimValues||i.trim()===i?bi(i,this.options.parseTagValue,this.options.numberParseOptions):i}}function Dr(i){if(this.options.removeNSPrefix){const e=i.split(":"),t=i.charAt(0)==="/"?"/":"";if(e[0]==="xmlns")return"";e.length===2&&(i=t+e[1])}return i}const Fr=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function _r(i,e){if(this.options.ignoreAttributes!==!0&&typeof i=="string"){const t=vi(i,Fr),n=t.length,s={};for(let o=0;o<n;o++){const r=this.resolveNameSpace(t[o][1]);if(this.ignoreAttributesFn(r,e))continue;let a=t[o][4],l=this.options.attributeNamePrefix+r;if(r.length)if(this.options.transformAttributeName&&(l=this.options.transformAttributeName(l)),l==="__proto__"&&(l="#__proto__"),a!==void 0){this.options.trimValues&&(a=a.trim()),a=this.replaceEntitiesValue(a);const u=this.options.attributeValueProcessor(r,a,e);s[l]=u==null?a:typeof u!=typeof a||u!==a?u:bi(a,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[l]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){const o={};return o[this.options.attributesGroupName]=s,o}return s}}const Wr=function(i){i=i.replace(/\r\n?/g,`
`);const e=new tt("!xml");let t=e,n="",s="";const o=new Nr(this.options.processEntities);for(let r=0;r<i.length;r++)if(i[r]==="<")if(i[r+1]==="/"){const a=it(i,">",r,"Closing Tag is not closed.");let l=i.substring(r+2,a).trim();if(this.options.removeNSPrefix){const d=l.indexOf(":");d!==-1&&(l=l.substr(d+1))}this.options.transformTagName&&(l=this.options.transformTagName(l)),t&&(n=this.saveTextToParentTag(n,t,s));const u=s.substring(s.lastIndexOf(".")+1);if(l&&this.options.unpairedTags.indexOf(l)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${l}>`);let h=0;u&&this.options.unpairedTags.indexOf(u)!==-1?(h=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):h=s.lastIndexOf("."),s=s.substring(0,h),t=this.tagsNodeStack.pop(),n="",r=a}else if(i[r+1]==="?"){let a=Tn(i,r,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,t,s),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){const l=new tt(a.tagName);l.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(l[":@"]=this.buildAttributesMap(a.tagExp,s)),this.addChild(t,l,s,r)}r=a.closeIndex+1}else if(i.substr(r+1,3)==="!--"){const a=it(i,"-->",r+4,"Comment is not closed.");if(this.options.commentPropName){const l=i.substring(r+4,a-2);n=this.saveTextToParentTag(n,t,s),t.add(this.options.commentPropName,[{[this.options.textNodeName]:l}])}r=a}else if(i.substr(r+1,2)==="!D"){const a=o.readDocType(i,r);this.docTypeEntities=a.entities,r=a.i}else if(i.substr(r+1,2)==="!["){const a=it(i,"]]>",r,"CDATA is not closed.")-2,l=i.substring(r+9,a);n=this.saveTextToParentTag(n,t,s);let u=this.parseTextData(l,t.tagname,s,!0,!1,!0,!0);u==null&&(u=""),this.options.cdataPropName?t.add(this.options.cdataPropName,[{[this.options.textNodeName]:l}]):t.add(this.options.textNodeName,u),r=a+2}else{let a=Tn(i,r,this.options.removeNSPrefix),l=a.tagName;const u=a.rawTagName;let h=a.tagExp,d=a.attrExpPresent,c=a.closeIndex;if(this.options.transformTagName){const p=this.options.transformTagName(l);h===l&&(h=p),l=p}t&&n&&t.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,t,s,!1));const f=t;f&&this.options.unpairedTags.indexOf(f.tagname)!==-1&&(t=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),l!==e.tagname&&(s+=s?"."+l:l);const g=r;if(this.isItStopNode(this.stopNodesExact,this.stopNodesWildcard,s,l)){let p="";if(h.length>0&&h.lastIndexOf("/")===h.length-1)l[l.length-1]==="/"?(l=l.substr(0,l.length-1),s=s.substr(0,s.length-1),h=l):h=h.substr(0,h.length-1),r=a.closeIndex;else if(this.options.unpairedTags.indexOf(l)!==-1)r=a.closeIndex;else{const b=this.readStopNodeData(i,u,c+1);if(!b)throw new Error(`Unexpected end of ${u}`);r=b.i,p=b.tagContent}const m=new tt(l);l!==h&&d&&(m[":@"]=this.buildAttributesMap(h,s)),p&&(p=this.parseTextData(p,l,s,!0,d,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),m.add(this.options.textNodeName,p),this.addChild(t,m,s,g)}else{if(h.length>0&&h.lastIndexOf("/")===h.length-1){if(l[l.length-1]==="/"?(l=l.substr(0,l.length-1),s=s.substr(0,s.length-1),h=l):h=h.substr(0,h.length-1),this.options.transformTagName){const m=this.options.transformTagName(l);h===l&&(h=m),l=m}const p=new tt(l);l!==h&&d&&(p[":@"]=this.buildAttributesMap(h,s)),this.addChild(t,p,s,g),s=s.substr(0,s.lastIndexOf("."))}else{const p=new tt(l);this.tagsNodeStack.push(t),l!==h&&d&&(p[":@"]=this.buildAttributesMap(h,s)),this.addChild(t,p,s,g),t=p}n="",r=c}}else n+=i[r];return e.child};function Ur(i,e,t,n){this.options.captureMetaData||(n=void 0);const s=this.options.updateTag(e.tagname,t,e[":@"]);s===!1||(typeof s=="string"&&(e.tagname=s),i.addChild(e,n))}const Vr=function(i){if(this.options.processEntities){for(let e in this.docTypeEntities){const t=this.docTypeEntities[e];i=i.replace(t.regx,t.val)}for(let e in this.lastEntities){const t=this.lastEntities[e];i=i.replace(t.regex,t.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const t=this.htmlEntities[e];i=i.replace(t.regex,t.val)}i=i.replace(this.ampEntity.regex,this.ampEntity.val)}return i};function Qr(i,e,t,n){return i&&(n===void 0&&(n=e.child.length===0),(i=this.parseTextData(i,e.tagname,t,!1,!!e[":@"]&&Object.keys(e[":@"]).length!==0,n))!==void 0&&i!==""&&e.add(this.options.textNodeName,i),i=""),i}function $r(i,e,t,n){return!(!e||!e.has(n))||!(!i||!i.has(t))}function it(i,e,t,n){const s=i.indexOf(e,t);if(s===-1)throw new Error(n);return s+e.length-1}function Tn(i,e,t){const n=function(h,d){let c,f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:">",g="";for(let p=d;p<h.length;p++){let m=h[p];if(c)m===c&&(c="");else if(m==='"'||m==="'")c=m;else if(m===f[0]){if(!f[1])return{data:g,index:p};if(h[p+1]===f[1])return{data:g,index:p}}else m==="	"&&(m=" ");g+=m}}(i,e+1,arguments.length>3&&arguments[3]!==void 0?arguments[3]:">");if(!n)return;let s=n.data;const o=n.index,r=s.search(/\s/);let a=s,l=!0;r!==-1&&(a=s.substring(0,r),s=s.substring(r+1).trimStart());const u=a;if(t){const h=a.indexOf(":");h!==-1&&(a=a.substr(h+1),l=a!==n.data.substr(h+1))}return{tagName:a,tagExp:s,closeIndex:o,attrExpPresent:l,rawTagName:u}}function Hr(i,e,t){const n=t;let s=1;for(;t<i.length;t++)if(i[t]==="<")if(i[t+1]==="/"){const o=it(i,">",t,`${e} is not closed`);if(i.substring(t+2,o).trim()===e&&(s--,s===0))return{tagContent:i.substring(n,t),i:o};t=o}else if(i[t+1]==="?")t=it(i,"?>",t+1,"StopNode is not closed.");else if(i.substr(t+1,3)==="!--")t=it(i,"-->",t+3,"StopNode is not closed.");else if(i.substr(t+1,2)==="![")t=it(i,"]]>",t,"StopNode is not closed.")-2;else{const o=Tn(i,t,">");o&&((o&&o.tagName)===e&&o.tagExp[o.tagExp.length-1]!=="/"&&s++,t=o.closeIndex)}}function bi(i,e,t){if(e&&typeof i=="string"){const n=i.trim();return n==="true"||n!=="false"&&function(s){let o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(o=Object.assign({},Rr,o),!s||typeof s!="string")return s;let r=s.trim();if(o.skipLike!==void 0&&o.skipLike.test(r))return s;if(s==="0")return 0;if(o.hex&&Or.test(r))return function(l){if(parseInt)return parseInt(l,16);if(Number.parseInt)return Number.parseInt(l,16);if(window&&window.parseInt)return window.parseInt(l,16);throw new Error("parseInt, Number.parseInt, window.parseInt are not supported")}(r);if(r.includes("e")||r.includes("E"))return function(l,u,h){if(!h.eNotation)return l;const d=u.match(jr);if(d){let c=d[1]||"";const f=d[3].indexOf("e")===-1?"E":"e",g=d[2],p=c?l[g.length+1]===f:l[g.length]===f;return g.length>1&&p?l:g.length!==1||!d[3].startsWith(`.${f}`)&&d[3][0]!==f?h.leadingZeros&&!p?(u=(d[1]||"")+d[3],Number(u)):l:Number(u)}return l}(s,r,o);{const l=Mr.exec(r);if(l){const u=l[1]||"",h=l[2];let d=((a=l[3])&&a.indexOf(".")!==-1&&((a=a.replace(/0+$/,""))==="."?a="0":a[0]==="."?a="0"+a:a[a.length-1]==="."&&(a=a.substring(0,a.length-1))),a);const c=u?s[h.length+1]===".":s[h.length]===".";if(!o.leadingZeros&&(h.length>1||h.length===1&&!c))return s;{const f=Number(r),g=String(f);if(f===0)return f;if(g.search(/[eE]/)!==-1)return o.eNotation?f:s;if(r.indexOf(".")!==-1)return g==="0"||g===d||g===`${u}${d}`?f:s;let p=h?d:r;return h?p===g||u+p===g?f:s:p===g||p===u+g?f:s}}return s}var a}(i,t)}return i!==void 0?i:""}function wi(i,e,t){const n=Number.parseInt(i,e);return n>=0&&n<=1114111?String.fromCodePoint(n):t+i+";"}const Nn=tt.getMetaDataSymbol();function Jr(i,e){return xi(i,e)}function xi(i,e,t){let n;const s={};for(let o=0;o<i.length;o++){const r=i[o],a=Yr(r);let l="";if(l=t===void 0?a:t+"."+a,a===e.textNodeName)n===void 0?n=r[a]:n+=""+r[a];else{if(a===void 0)continue;if(r[a]){let u=xi(r[a],e,l);const h=qr(u,e);r[Nn]!==void 0&&(u[Nn]=r[Nn]),r[":@"]?Gr(u,r[":@"],l,e):Object.keys(u).length!==1||u[e.textNodeName]===void 0||e.alwaysCreateTextNode?Object.keys(u).length===0&&(e.alwaysCreateTextNode?u[e.textNodeName]="":u=""):u=u[e.textNodeName],s[a]!==void 0&&s.hasOwnProperty(a)?(Array.isArray(s[a])||(s[a]=[s[a]]),s[a].push(u)):e.isArray(a,l,h)?s[a]=[u]:s[a]=u}}}return typeof n=="string"?n.length>0&&(s[e.textNodeName]=n):n!==void 0&&(s[e.textNodeName]=n),s}function Yr(i){const e=Object.keys(i);for(let t=0;t<e.length;t++){const n=e[t];if(n!==":@")return n}}function Gr(i,e,t,n){if(e){const s=Object.keys(e),o=s.length;for(let r=0;r<o;r++){const a=s[r];n.isArray(a,t+"."+a,!0,!0)?i[a]=[e[a]]:i[a]=e[a]}}}function qr(i,e){const{textNodeName:t}=e,n=Object.keys(i).length;return n===0||!(n!==1||!i[t]&&typeof i[t]!="boolean"&&i[t]!==0)}const Xr={allowBooleanAttributes:!1,unpairedTags:[]};function Ei(i){return i===" "||i==="	"||i===`
`||i==="\r"}function Ci(i,e){const t=e;for(;e<i.length;e++)if(!(i[e]!="?"&&i[e]!=" ")){const n=i.substr(t,e-t);if(e>5&&n==="xml")return he("InvalidXml","XML declaration allowed only at the start of the document.",Ee(i,e));if(i[e]=="?"&&i[e+1]==">"){e++;break}}return e}function Ai(i,e){if(i.length>e+5&&i[e+1]==="-"&&i[e+2]==="-"){for(e+=3;e<i.length;e++)if(i[e]==="-"&&i[e+1]==="-"&&i[e+2]===">"){e+=2;break}}else if(i.length>e+8&&i[e+1]==="D"&&i[e+2]==="O"&&i[e+3]==="C"&&i[e+4]==="T"&&i[e+5]==="Y"&&i[e+6]==="P"&&i[e+7]==="E"){let t=1;for(e+=8;e<i.length;e++)if(i[e]==="<")t++;else if(i[e]===">"&&(t--,t===0))break}else if(i.length>e+9&&i[e+1]==="["&&i[e+2]==="C"&&i[e+3]==="D"&&i[e+4]==="A"&&i[e+5]==="T"&&i[e+6]==="A"&&i[e+7]==="["){for(e+=8;e<i.length;e++)if(i[e]==="]"&&i[e+1]==="]"&&i[e+2]===">"){e+=2;break}}return e}function Kr(i,e){let t="",n="",s=!1;for(;e<i.length;e++){if(i[e]==='"'||i[e]==="'")n===""?n=i[e]:n!==i[e]||(n="");else if(i[e]===">"&&n===""){s=!0;break}t+=i[e]}return n===""&&{value:t,index:e,tagClosed:s}}const Zr=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function ki(i,e){const t=vi(i,Zr),n={};for(let s=0;s<t.length;s++){if(t[s][1].length===0)return he("InvalidAttr","Attribute '"+t[s][2]+"' has no space in starting.",St(t[s]));if(t[s][3]!==void 0&&t[s][4]===void 0)return he("InvalidAttr","Attribute '"+t[s][2]+"' is without value.",St(t[s]));if(t[s][3]===void 0&&!e.allowBooleanAttributes)return he("InvalidAttr","boolean attribute '"+t[s][2]+"' is not allowed.",St(t[s]));const o=t[s][2];if(!to(o))return he("InvalidAttr","Attribute '"+o+"' is an invalid name.",St(t[s]));if(n.hasOwnProperty(o))return he("InvalidAttr","Attribute '"+o+"' is repeated.",St(t[s]));n[o]=1}return!0}function eo(i,e){if(i[++e]===";")return-1;if(i[e]==="#")return function(n,s){let o=/\d/;for(n[s]==="x"&&(s++,o=/[\da-fA-F]/);s<n.length;s++){if(n[s]===";")return s;if(!n[s].match(o))break}return-1}(i,++e);let t=0;for(;e<i.length;e++,t++)if(!(i[e].match(/\w/)&&t<20)){if(i[e]===";")break;return-1}return e}function he(i,e,t){return{err:{code:i,msg:e,line:t.line||t,col:t.col}}}function to(i){return Yt(i)}function Ee(i,e){const t=i.substring(0,e).split(/\r?\n/);return{line:t.length,col:t[t.length-1].length+1}}function St(i){return i.startIndex+i[1].length}class Si{constructor(e){this.externalEntities={},this.options=function(t){return Object.assign({},Ir,t)}(e)}parse(e,t){if(typeof e!="string"&&e.toString)e=e.toString();else if(typeof e!="string")throw new Error("XML data is accepted in String or Bytes[] form.");if(t){t===!0&&(t={});const o=function(r,a){a=Object.assign({},Xr,a);const l=[];let u=!1,h=!1;r[0]==="\uFEFF"&&(r=r.substr(1));for(let d=0;d<r.length;d++)if(r[d]==="<"&&r[d+1]==="?"){if(d+=2,d=Ci(r,d),d.err)return d}else{if(r[d]!=="<"){if(Ei(r[d]))continue;return he("InvalidChar","char '"+r[d]+"' is not expected.",Ee(r,d))}{let c=d;if(d++,r[d]==="!"){d=Ai(r,d);continue}{let f=!1;r[d]==="/"&&(f=!0,d++);let g="";for(;d<r.length&&r[d]!==">"&&r[d]!==" "&&r[d]!=="	"&&r[d]!==`
`&&r[d]!=="\r";d++)g+=r[d];if(g=g.trim(),g[g.length-1]==="/"&&(g=g.substring(0,g.length-1),d--),!Yt(g)){let b;return b=g.trim().length===0?"Invalid space after '<'.":"Tag '"+g+"' is an invalid name.",he("InvalidTag",b,Ee(r,d))}const p=Kr(r,d);if(p===!1)return he("InvalidAttr","Attributes for '"+g+"' have open quote.",Ee(r,d));let m=p.value;if(d=p.index,m[m.length-1]==="/"){const b=d-m.length;m=m.substring(0,m.length-1);const v=ki(m,a);if(v!==!0)return he(v.err.code,v.err.msg,Ee(r,b+v.err.line));u=!0}else if(f){if(!p.tagClosed)return he("InvalidTag","Closing tag '"+g+"' doesn't have proper closing.",Ee(r,d));if(m.trim().length>0)return he("InvalidTag","Closing tag '"+g+"' can't have attributes or invalid starting.",Ee(r,c));if(l.length===0)return he("InvalidTag","Closing tag '"+g+"' has not been opened.",Ee(r,c));{const b=l.pop();if(g!==b.tagName){let v=Ee(r,b.tagStartPos);return he("InvalidTag","Expected closing tag '"+b.tagName+"' (opened in line "+v.line+", col "+v.col+") instead of closing tag '"+g+"'.",Ee(r,c))}l.length==0&&(h=!0)}}else{const b=ki(m,a);if(b!==!0)return he(b.err.code,b.err.msg,Ee(r,d-m.length+b.err.line));if(h===!0)return he("InvalidXml","Multiple possible root nodes found.",Ee(r,d));a.unpairedTags.indexOf(g)!==-1||l.push({tagName:g,tagStartPos:c}),u=!0}for(d++;d<r.length;d++)if(r[d]==="<"){if(r[d+1]==="!"){d++,d=Ai(r,d);continue}if(r[d+1]!=="?")break;if(d=Ci(r,++d),d.err)return d}else if(r[d]==="&"){const b=eo(r,d);if(b==-1)return he("InvalidChar","char '&' is not expected.",Ee(r,d));d=b}else if(h===!0&&!Ei(r[d]))return he("InvalidXml","Extra text at the end",Ee(r,d));r[d]==="<"&&d--}}}return u?l.length==1?he("InvalidTag","Unclosed tag '"+l[0].tagName+"'.",Ee(r,l[0].tagStartPos)):!(l.length>0)||he("InvalidXml","Invalid '"+JSON.stringify(l.map(d=>d.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):he("InvalidXml","Start tag expected.",1)}(e,t);if(o!==!0)throw Error(`${o.err.msg}:${o.err.line}:${o.err.col}`)}const n=new Br(this.options);n.addExternalEntities(this.externalEntities);const s=n.parseXml(e);return this.options.preserveOrder||s===void 0?s:Jr(s,this.options)}addEntity(e,t){if(t.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(t==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}static getMetaDataSymbol(){return tt.getMetaDataSymbol()}}var no=se(829),Ve=se.n(no),ft=function(i){return i.Array="array",i.Object="object",i.Original="original",i}(ft||{});function Pi(i,e){if(!i.endsWith("propstat.prop.displayname"))return e}function Gt(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ft.Original;const n=Ve().get(i,e);return t==="array"&&Array.isArray(n)===!1?[n]:t==="object"&&Array.isArray(n)?n[0]:n}function io(i,e){return e=e??{attributeNamePrefix:"@",attributeParsers:[],tagParsers:[Pi]},new Promise(t=>{t(function(n){const{multistatus:s}=n;if(s==="")return{multistatus:{response:[]}};if(!s)throw new Error("Invalid response: No root multistatus found");const o={multistatus:Array.isArray(s)?s[0]:s};return Ve().set(o,"multistatus.response",Gt(o,"multistatus.response",ft.Array)),Ve().set(o,"multistatus.response",Ve().get(o,"multistatus.response").map(r=>function(a){const l=Object.assign({},a);return l.status?Ve().set(l,"status",Gt(l,"status",ft.Object)):(Ve().set(l,"propstat",Gt(l,"propstat",ft.Object)),Ve().set(l,"propstat.prop",Gt(l,"propstat.prop",ft.Object))),l}(r))),o}(function(n){let{attributeNamePrefix:s,attributeParsers:o,tagParsers:r}=n;return new Si({allowBooleanAttributes:!0,attributeNamePrefix:s,textNodeName:"text",ignoreAttributes:!1,removeNSPrefix:!0,numberParseOptions:{hex:!0,leadingZeros:!1},attributeValueProcessor(a,l,u){for(const h of o)try{const d=h(u,l);if(d!==l)return d}catch{}return l},tagValueProcessor(a,l,u){for(const h of r)try{const d=h(u,l);if(d!==l)return d}catch{}return l}})}(e).parse(i)))})}function so(i,e){let t=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const{getlastmodified:n=null,getcontentlength:s="0",resourcetype:o=null,getcontenttype:r=null,getetag:a=null}=i,l=o&&typeof o=="object"&&o.collection!==void 0?"directory":"file",u={filename:e,basename:Gn().basename(e),lastmod:n,size:parseInt(s,10),type:l,etag:typeof a=="string"?a.replace(/"/g,""):null};return l==="file"&&(u.mime=r&&typeof r=="string"?r.split(";")[0]:""),t&&(i.displayname!==void 0&&(i.displayname=String(i.displayname)),u.props=i),u}function Ol(i){switch(String(i)){case"-3":return"unlimited";case"-2":case"-1":return"unknown";default:return parseInt(String(i),10)}}function On(i,e,t){return t?e?e(i):i:(i&&i.then||(i=Promise.resolve(i)),e?i.then(e):i)}const ro=function(i){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(i.apply(this,e))}catch(n){return Promise.reject(n)}}}(function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{details:n=!1}=t,s=ze({url:Re(i.remoteURL,Me(e)),method:"PROPFIND",headers:{Accept:"text/plain,application/xml",Depth:"0"}},i,t);return On(Le(s,i),function(o){return De(i,o),On(o.text(),function(r){return On(io(r,i.parsing),function(a){const l=function(u,h){let d=arguments.length>2&&arguments[2]!==void 0&&arguments[2],c=null;try{u.multistatus.response[0].propstat&&(c=u.multistatus.response[0])}catch{}if(!c)throw new Error("Failed getting item stat: bad response");const{propstat:{prop:f,status:g}}=c,[p,m,b]=g.split(" ",3),v=parseInt(m,10);if(v>=400){const y=new Error(`Invalid response: ${v} ${b}`);throw y.status=v,y}return so(f,yn(h),d)}(a,e,n);return Pn(o,l,n)})})})});function Ii(i,e,t){return t?e?e(i):i:(i&&i.then||(i=Promise.resolve(i)),e?i.then(e):i)}const oo=Ti(function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=function(o){if(!o||o==="/")return[];let r=o;const a=[];do a.push(r),r=Gn().dirname(r);while(r&&r!=="/");return a}(yn(e));n.sort((o,r)=>o.length>r.length?1:r.length>o.length?-1:0);let s=!1;return function(o,r){if(typeof o[Oi]=="function"){let g=function(p){try{for(;!(a=h.next()).done;)if((p=r(a.value))&&p.then){if(!Mi(p))return void p.then(g,u||(u=Ce.bind(null,l=new gt,2)));p=p.v}l?Ce(l,1,p):l=p}catch(m){Ce(l||(l=new gt),2,m)}};var a,l,u,h=o[Oi]();if(g(),h.return){var d=function(p){try{a.done||h.return()}catch{}return p};if(l&&l.then)return l.then(d,function(p){throw d(p)});d()}return l}if(!("length"in o))throw new TypeError("Object is not iterable");for(var c=[],f=0;f<o.length;f++)c.push(o[f]);return function(g,p,m){var b,v,y=-1;return function w(x){try{for(;++y<g.length&&(!m||!m());)if((x=p(y))&&x.then){if(!Mi(x))return void x.then(w,v||(v=Ce.bind(null,b=new gt,2)));x=x.v}b?Ce(b,1,x):b=x}catch(k){Ce(b||(b=new gt),2,k)}}(),b}(c,function(g){return r(c[g])},function(){return!1})}(n,function(o){return r=function(){return function(l,u){try{var h=Ii(ro(i,o),function(d){if(d.type!=="directory")throw new Error(`Path includes a file: ${e}`)})}catch(d){return u(d)}return h&&h.then?h.then(void 0,u):h}(0,function(l){const u=l;return function(){if(u.status===404)return s=!0,Ni(Ri(i,o,{...t,recursive:!1}));throw l}()})},(a=function(){if(s)return Ni(Ri(i,o,{...t,recursive:!1}))}())&&a.then?a.then(r):r();var r,a})});function Ti(i){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(i.apply(this,e))}catch(n){return Promise.reject(n)}}}function ao(){}function Ni(i,e){if(!e)return i&&i.then?i.then(ao):Promise.resolve()}const Oi=typeof Symbol<"u"?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function Ce(i,e,t){if(!i.s){if(t instanceof gt){if(!t.s)return void(t.o=Ce.bind(null,i,e));1&e&&(e=t.s),t=t.v}if(t&&t.then)return void t.then(Ce.bind(null,i,e),Ce.bind(null,i,2));i.s=e,i.v=t;const n=i.o;n&&n(i)}}const gt=function(){function i(){}return i.prototype.then=function(e,t){const n=new i,s=this.s;if(s){const o=1&s?e:t;if(o){try{Ce(n,1,o(this.v))}catch(r){Ce(n,2,r)}return n}return this}return this.o=function(o){try{const r=o.v;1&o.s?Ce(n,1,e?e(r):r):t?Ce(n,1,t(r)):Ce(n,2,r)}catch(r){Ce(n,2,r)}},n},i}();function Mi(i){return i instanceof gt&&1&i.s}const Ri=Ti(function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(t.recursive===!0)return oo(i,e,t);const n=ze({url:Re(i.remoteURL,(s=Me(e),s.endsWith("/")?s:s+"/")),method:"MKCOL"},i,t);var s;return Ii(Le(n,i),function(o){De(i,o)})});var lo=se(388);se.n(lo);function Ml(i,e,t){return t?e?e(i):i:(i&&i.then||(i=Promise.resolve(i)),e?i.then(e):i)}function Mn(i){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(i.apply(this,e))}catch(n){return Promise.reject(n)}}}const uo=Mn(function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=ze({url:Re(i.remoteURL,Me(e)),method:"GET",headers:{Accept:"text/plain"},transformResponse:[co]},i,t);return qt(Le(n,i),function(s){return De(i,s),qt(s.text(),function(o){return Pn(s,o,t.details)})})});function qt(i,e,t){return t?e?e(i):i:(i&&i.then||(i=Promise.resolve(i)),e?i.then(e):i)}const ho=Mn(function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=ze({url:Re(i.remoteURL,Me(e)),method:"GET"},i,t);return qt(Le(n,i),function(s){let o;return De(i,s),function(r,a){var l=r();return l&&l.then?l.then(a):a()}(function(){return qt(s.arrayBuffer(),function(r){o=r})},function(){return Pn(s,o,t.details)})})}),co=(Mn(function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{format:n="binary"}=t;if(n!=="binary"&&n!=="text")throw new pt({info:{code:Et.InvalidOutputFormat}},`Invalid output format: ${n}`);return n==="text"?uo(i,e,t):ho(i,e,t)}),i=>i);function po(i,e){let t="";return e.format&&e.indentBy.length>0&&(t=`
`),ji(i,e,"",t)}function ji(i,e,t,n){let s="",o=!1;for(let r=0;r<i.length;r++){const a=i[r],l=fo(a);if(l===void 0)continue;let u="";if(u=t.length===0?l:`${t}.${l}`,l===e.textNodeName){let f=a[l];go(u,e)||(f=e.tagValueProcessor(l,f),f=Li(f,e)),o&&(s+=n),s+=f,o=!1;continue}if(l===e.cdataPropName){o&&(s+=n),s+=`<![CDATA[${a[l][0][e.textNodeName]}]]>`,o=!1;continue}if(l===e.commentPropName){s+=n+`<!--${a[l][0][e.textNodeName]}-->`,o=!0;continue}if(l[0]==="?"){const f=Bi(a[":@"],e),g=l==="?xml"?"":n;let p=a[l][0][e.textNodeName];p=p.length!==0?" "+p:"",s+=g+`<${l}${p}${f}?>`,o=!0;continue}let h=n;h!==""&&(h+=e.indentBy);const d=n+`<${l}${Bi(a[":@"],e)}`,c=ji(a[l],e,u,h);e.unpairedTags.indexOf(l)!==-1?e.suppressUnpairedNode?s+=d+">":s+=d+"/>":c&&c.length!==0||!e.suppressEmptyNode?c&&c.endsWith(">")?s+=d+`>${c}${n}</${l}>`:(s+=d+">",c&&n!==""&&(c.includes("/>")||c.includes("</"))?s+=n+e.indentBy+c+n:s+=c,s+=`</${l}>`):s+=d+"/>",o=!0}return s}function fo(i){const e=Object.keys(i);for(let t=0;t<e.length;t++){const n=e[t];if(i.hasOwnProperty(n)&&n!==":@")return n}}function Bi(i,e){let t="";if(i&&!e.ignoreAttributes)for(let n in i){if(!i.hasOwnProperty(n))continue;let s=e.attributeValueProcessor(n,i[n]);s=Li(s,e),s===!0&&e.suppressBooleanAttributes?t+=` ${n.substr(e.attributeNamePrefix.length)}`:t+=` ${n.substr(e.attributeNamePrefix.length)}="${s}"`}return t}function go(i,e){let t=(i=i.substr(0,i.length-e.textNodeName.length-1)).substr(i.lastIndexOf(".")+1);for(let n in e.stopNodes)if(e.stopNodes[n]===i||e.stopNodes[n]==="*."+t)return!0;return!1}function Li(i,e){if(i&&i.length>0&&e.processEntities)for(let t=0;t<e.entities.length;t++){const n=e.entities[t];i=i.replace(n.regex,n.val)}return i}const mo={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(i,e){return e},attributeValueProcessor:function(i,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function qe(i){this.options=Object.assign({},mo,i),this.options.ignoreAttributes===!0||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.ignoreAttributesFn=yi(this.options.ignoreAttributes),this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=bo),this.processTextOrObjNode=vo,this.options.format?(this.indentate=yo,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}function vo(i,e,t,n){const s=this.j2x(i,t+1,n.concat(e));return i[this.options.textNodeName]!==void 0&&Object.keys(i).length===1?this.buildTextValNode(i[this.options.textNodeName],e,s.attrStr,t):this.buildObjectNode(s.val,e,s.attrStr,t)}function yo(i){return this.options.indentBy.repeat(i)}function bo(i){return!(!i.startsWith(this.options.attributeNamePrefix)||i===this.options.textNodeName)&&i.substr(this.attrPrefixLen)}function wo(i){return new qe({attributeNamePrefix:"@_",format:!0,ignoreAttributes:!1,suppressEmptyNode:!0}).build(zi({lockinfo:{"@_xmlns:d":"DAV:",lockscope:{exclusive:{}},locktype:{write:{}},owner:{href:i}}},"d"))}function zi(i,e){const t={...i};for(const n in t)t.hasOwnProperty(n)&&(t[n]&&typeof t[n]=="object"&&n.indexOf(":")===-1?(t[`${e}:${n}`]=zi(t[n],e),delete t[n]):/^@_/.test(n)===!1&&(t[`${e}:${n}`]=t[n],delete t[n]));return t}function Rn(i,e,t){return t?e?e(i):i:(i&&i.then||(i=Promise.resolve(i)),e?i.then(e):i)}function Di(i){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(i.apply(this,e))}catch(n){return Promise.reject(n)}}}qe.prototype.build=function(i){return this.options.preserveOrder?po(i,this.options):(Array.isArray(i)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(i={[this.options.arrayNodeName]:i}),this.j2x(i,0,[]).val)},qe.prototype.j2x=function(i,e,t){let n="",s="";const o=t.join(".");for(let r in i)if(Object.prototype.hasOwnProperty.call(i,r))if(i[r]===void 0)this.isAttribute(r)&&(s+="");else if(i[r]===null)this.isAttribute(r)||r===this.options.cdataPropName?s+="":r[0]==="?"?s+=this.indentate(e)+"<"+r+"?"+this.tagEndChar:s+=this.indentate(e)+"<"+r+"/"+this.tagEndChar;else if(i[r]instanceof Date)s+=this.buildTextValNode(i[r],r,"",e);else if(typeof i[r]!="object"){const a=this.isAttribute(r);if(a&&!this.ignoreAttributesFn(a,o))n+=this.buildAttrPairStr(a,""+i[r]);else if(!a)if(r===this.options.textNodeName){let l=this.options.tagValueProcessor(r,""+i[r]);s+=this.replaceEntitiesValue(l)}else s+=this.buildTextValNode(i[r],r,"",e)}else if(Array.isArray(i[r])){const a=i[r].length;let l="",u="";for(let h=0;h<a;h++){const d=i[r][h];if(d!==void 0)if(d===null)r[0]==="?"?s+=this.indentate(e)+"<"+r+"?"+this.tagEndChar:s+=this.indentate(e)+"<"+r+"/"+this.tagEndChar;else if(typeof d=="object")if(this.options.oneListGroup){const c=this.j2x(d,e+1,t.concat(r));l+=c.val,this.options.attributesGroupName&&d.hasOwnProperty(this.options.attributesGroupName)&&(u+=c.attrStr)}else l+=this.processTextOrObjNode(d,r,e,t);else if(this.options.oneListGroup){let c=this.options.tagValueProcessor(r,d);c=this.replaceEntitiesValue(c),l+=c}else l+=this.buildTextValNode(d,r,"",e)}this.options.oneListGroup&&(l=this.buildObjectNode(l,r,u,e)),s+=l}else if(this.options.attributesGroupName&&r===this.options.attributesGroupName){const a=Object.keys(i[r]),l=a.length;for(let u=0;u<l;u++)n+=this.buildAttrPairStr(a[u],""+i[r][a[u]])}else s+=this.processTextOrObjNode(i[r],r,e,t);return{attrStr:n,val:s}},qe.prototype.buildAttrPairStr=function(i,e){return e=this.options.attributeValueProcessor(i,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&e==="true"?" "+i:" "+i+'="'+e+'"'},qe.prototype.buildObjectNode=function(i,e,t,n){if(i==="")return e[0]==="?"?this.indentate(n)+"<"+e+t+"?"+this.tagEndChar:this.indentate(n)+"<"+e+t+this.closeTag(e)+this.tagEndChar;{let s="</"+e+this.tagEndChar,o="";return e[0]==="?"&&(o="?",s=""),!t&&t!==""||i.indexOf("<")!==-1?this.options.commentPropName!==!1&&e===this.options.commentPropName&&o.length===0?this.indentate(n)+`<!--${i}-->`+this.newLine:this.indentate(n)+"<"+e+t+o+this.tagEndChar+i+this.indentate(n)+s:this.indentate(n)+"<"+e+t+o+">"+i+s}},qe.prototype.closeTag=function(i){let e="";return this.options.unpairedTags.indexOf(i)!==-1?this.options.suppressUnpairedNode||(e="/"):e=this.options.suppressEmptyNode?"/":`></${i}`,e},qe.prototype.buildTextValNode=function(i,e,t,n){if(this.options.cdataPropName!==!1&&e===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${i}]]>`+this.newLine;if(this.options.commentPropName!==!1&&e===this.options.commentPropName)return this.indentate(n)+`<!--${i}-->`+this.newLine;if(e[0]==="?")return this.indentate(n)+"<"+e+t+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(e,i);return s=this.replaceEntitiesValue(s),s===""?this.indentate(n)+"<"+e+t+this.closeTag(e)+this.tagEndChar:this.indentate(n)+"<"+e+t+">"+s+"</"+e+this.tagEndChar}},qe.prototype.replaceEntitiesValue=function(i){if(i&&i.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const t=this.options.entities[e];i=i.replace(t.regex,t.val)}return i},Di(function(i,e,t){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const s=ze({url:Re(i.remoteURL,Me(e)),method:"UNLOCK",headers:{"Lock-Token":t}},i,n);return Rn(Le(s,i),function(o){if(De(i,o),o.status!==204&&o.status!==200)throw Sn(o)})}),Di(function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const{refreshToken:n,timeout:s=xo}=t,o={Accept:"text/plain,application/xml",Timeout:s};n&&(o.If=n);const r=ze({url:Re(i.remoteURL,Me(e)),method:"LOCK",headers:o,data:wo(i.contactHref)},i,t);return Rn(Le(r,i),function(a){return De(i,a),Rn(a.text(),function(l){const u=(c=l,new Si({removeNSPrefix:!0,parseAttributeValue:!0,parseTagValue:!0}).parse(c)),h=Ve().get(u,"prop.lockdiscovery.activelock.locktoken.href"),d=Ve().get(u,"prop.lockdiscovery.activelock.timeout");var c;if(!h)throw Sn(a,"No lock token received: ");return{token:h,serverTimeout:d}})})});const xo="Infinite, Second-4100000000";function Rl(i,e,t){return t?e?e(i):i:(i&&i.then||(i=Promise.resolve(i)),e?i.then(e):i)}function jl(i,e,t){return t?e?e(i):i:(i&&i.then||(i=Promise.resolve(i)),e?i.then(e):i)}var Bl=se(172);const Eo=function(i){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(i.apply(this,e))}catch(n){return Promise.reject(n)}}}(function(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=ze({url:Re(i.remoteURL,Me(e)),method:"OPTIONS"},i,t);return o=function(r){try{De(i,r)}catch(a){throw a}return{compliance:(r.headers.get("DAV")??"").split(",").map(a=>a.trim()),server:r.headers.get("Server")??""}},(s=Le(n,i))&&s.then||(s=Promise.resolve(s)),o?s.then(o):s;var s,o});function Pt(i,e,t){return t?e?e(i):i:(i&&i.then||(i=Promise.resolve(i)),e?i.then(e):i)}const Co=jn(function(i,e,t,n,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(t>n||t<0)throw new pt({info:{code:Et.InvalidUpdateRange}},`Invalid update range ${t} for partial update`);const r={"Content-Type":"application/octet-stream","Content-Length":""+(n-t+1),"Content-Range":`bytes ${t}-${n}/*`},a=ze({url:Re(i.remoteURL,Me(e)),method:"PUT",headers:r,data:s},i,o);return Pt(Le(a,i),function(l){De(i,l)})});function Fi(i,e){var t=i();return t&&t.then?t.then(e):e(t)}const Ao=jn(function(i,e,t,n,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};if(t>n||t<0)throw new pt({info:{code:Et.InvalidUpdateRange}},`Invalid update range ${t} for partial update`);const r={"Content-Type":"application/x-sabredav-partialupdate","Content-Length":""+(n-t+1),"X-Update-Range":`bytes=${t}-${n}`},a=ze({url:Re(i.remoteURL,Me(e)),method:"PATCH",headers:r,data:s},i,o);return Pt(Le(a,i),function(l){De(i,l)})});function jn(i){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];try{return Promise.resolve(i.apply(this,e))}catch(n){return Promise.reject(n)}}}jn(function(i,e,t,n,s){let o=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{};return Pt(Eo(i,e,o),function(r){let a=!1;return Fi(function(){if(r.compliance.includes("sabredav-partialupdate"))return Pt(Ao(i,e,t,n,s,o),function(l){return a=!0,l})},function(l){let u=!1;return a?l:Fi(function(){if(r.server.includes("Apache")&&r.compliance.includes("<http://apache.org/dav/propset/fs/1>"))return Pt(Co(i,e,t,n,s,o),function(h){return u=!0,h})},function(h){if(u)return h;throw new pt({info:{code:Et.NotSupported}},"Not supported")})})})});const ko="https://github.com/perry-mitchell/webdav-client/blob/master/LOCK_CONTACT.md",Xt=i=>(dn("data-v-68c7066b"),i=i(),pn(),i),So=Xt(()=>E("div",{class:"tick-line"},null,-1)),Po={class:"tick-label"},Io=["onClick"],To={class:"flex items-center justify-center py-[10px]"},No=Xt(()=>E("span",{class:"block w-full h-full"},null,-1)),Oo=Xt(()=>E("div",{class:"line"},null,-1)),Mo=Xt(()=>E("div",{class:"line"},null,-1)),Pe=100,Ro={__name:"index",props:{duration:Number,segments:Array,minScale:{type:Number,default:.2},maxScale:{type:Number,default:100},currentTime:Number,index:Number},emits:["seek","addRegion","optimize","updateThrow"],setup(i,{expose:e,emit:t}){const n=i,s=N(!1),o=N(null),r=N(!1),a=t,l=N(20),u=N(0),h=N(!1),d=N(0),c=N(0),f=N(null),g=N(0),p=N(0),m=N(0);let b=!1;const v=He(()=>n.duration*l.value+100),y=async()=>{s.value||(s.value=!0,await a("optimize",()=>{s.value=!1}))},w=B=>{a("updateThrow",B)},x=()=>{const B=document.querySelector(".timeline-container");B&&(g.value=B.clientWidth,p.value=Pe)},k=He(()=>{const B=function(F){return F>=80?1:F>=40?5:F>=20?10:F>=10?30:F>=5?60:F>=1?300:1800}(l.value),j=[],Y=Math.max(0,(-u.value-Pe)/l.value),ee=Math.min(n.duration,(-u.value+g.value-Pe)/l.value);for(let F=Math.floor(Y/B)*B;F<=ee;F+=B)j.push({position:F*l.value+Pe,label:Ge(F)});return j.length>0&&(j[j.length-1].position,l.value),n.duration-.01&&j.push({position:n.duration*l.value+Pe,label:Ge(n.duration)}),j});function C(B){if(!n.duration)return;const j=Math.sign(B.deltaY);if(j===0)return;const Y=-j,ee=l.value+.1*Y,F=Math.min(n.maxScale,Math.max(m.value,ee));if(F!==l.value){const J=(p.value-u.value-Pe)/l.value;l.value=F;const ae=n.duration*F+200;if(ae>=g.value){const Oe=g.value-ae;u.value=Math.min(0,Math.max(Oe,p.value-J*F-Pe))}}}function R(B){h.value=!0,b=!1,r.value=!1,d.value=B.clientX,c.value=u.value}function S(B){if(!n.duration)return;const j=document.querySelector(".timeline-container");if(!j)return;const Y=j.getBoundingClientRect(),ee=B.clientX-d.value,F=Math.abs(ee);if(h.value&&!r.value&&F>5&&(r.value=!0,b=!0,o.value=null),r.value){const J=c.value+ee,ae=0,Oe=g.value-(n.duration*l.value+200);u.value=Math.min(ae,Math.max(Oe,J))}else h.value||(o.value=B.clientX-Y.left)}function _(){h.value=!1,r.value=!1,a("seek",A())}function te(){h.value=!1,r.value=!1,o.value=null}function U(B){n.segments[B].is_delete||B!==f.value&&(f.value=B,a("addRegion",B))}function A(){const B=(p.value-u.value-Pe)/l.value;return Math.max(0,Math.min(n.duration,B)).toFixed(2)}function z(B){if(b||!n.duration)return;const j=document.querySelector(".timeline-container");if(!j)return;const Y=j.getBoundingClientRect(),ee=(B.clientX-Y.left-u.value-Pe)/l.value,F=Math.max(0,Math.min(n.duration,ee));a("seek",F),p.value=F*l.value+u.value+Pe}function V(){if(o.value===null)return null;const B=(o.value-u.value-Pe)/l.value;return Math.max(0,Math.min(n.duration,B)).toFixed(2)}return Dt(()=>{x(),window.addEventListener("resize",x)}),ys(()=>{window.removeEventListener("resize",x)}),He(()=>p.value),N(!1),Ft(()=>n.currentTime,B=>{n.duration!==0&&(p.value=B*l.value+u.value+Pe)}),e({init:(B,j=0)=>{u.value=0,d.value=0,c.value=0,f.value=null,p.value=Pe,o.value=null,h.value=!1,r.value=!1,b=!1,x(),l.value=function(Y){if(!Y||!g.value)return n.minScale;const ee=(g.value-200)/Y;return m.value=ee,Math.max(ee,n.minScale)}(B),setTimeout(()=>{!f.value&&n.segments.length>0&&U(j)},3e3)},jumpVideoToIndex:B=>{U(B)},reset:()=>{f.value=null}}),(B,j)=>{const Y=le("el-button"),ee=le("el-popover");return L(),q("div",{class:"timeline-container",onWheel:Vn(C,["prevent"]),onMousedown:R,onMousemove:S,onMouseup:_,onMouseleave:te,onClick:z},[E("div",{class:"timeline",style:Ue({width:Math.max(v.value+200,g.value)+"px",transform:`translateX(${u.value}px)`})},[(L(!0),q(Je,null,dt(k.value,(F,J)=>(L(),q("div",{key:J,class:_t(["tick",{active:J===0||J===k.value.length-1}]),style:Ue({left:F.position+"px"})},[So,E("div",Po,me(F.label),1)],6))),128)),(L(!0),q(Je,null,dt(i.segments,(F,J)=>(L(),q("div",{key:J,class:_t(["segment",{selected:f.value===J,is_delete:F.is_delete}]),style:Ue({left:F.start*l.value+Pe+"px",width:(F.end-F.start)*l.value+"px"}),onClick:Vn(ae=>U(J),["stop"])},[W(ee,{visible:f.value===J,placement:"bottom",effect:"light",width:i.segments.length>0&&J>=0&&!i.segments[J].optimized?200:80},{reference:D(()=>[No]),default:D(()=>[E("div",To,[i.segments.length>0&&J>=0&&!i.segments[J].optimized?(L(),ve(Y,{key:0,type:"primary",size:"small",onClick:y,loading:s.value},{default:D(()=>[X("\u4F18\u5316\u7247\u6BB5")]),_:1},8,["loading"])):ye("",!0),i.segments[J].throw?(L(),ve(Y,{key:2,type:"primary",size:"small",onClick:j[1]||(j[1]=ae=>w(!1))},{default:D(()=>[X("\u62FE\u53D6\u7247\u6BB5")]),_:1})):(L(),ve(Y,{key:1,type:"danger",size:"small",onClick:j[0]||(j[0]=ae=>w(!0))},{default:D(()=>[X("\u4E22\u5F03\u7247\u6BB5")]),_:1}))])]),_:2},1032,["visible","width"])],14,Io))),128))],4),o.value!==null?(L(),q("div",{key:0,class:"hover-playhead",style:Ue({left:o.value+"px"})},[E("p",null,me(M(Ge)(V())),1),Oo],4)):ye("",!0),i.duration?(L(),q("div",{key:1,class:"playhead",style:Ue({left:p.value+"px"})},[E("p",null,me(M(Ge)(A())),1),Mo],4)):ye("",!0)],32)}}},jo=gn(Ro,[["__scopeId","data-v-68c7066b"]]),Bn=i=>(dn("data-v-c14b87c9"),i=i(),pn(),i),Bo=[Bn(()=>E("svg",{t:"1748417848263",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9331",width:"20",height:"20"},[E("path",{d:"M204.8 0h614.4a102.4 102.4 0 0 1 102.4 102.4v512L512 1024l-409.6-409.6v-512A102.4 102.4 0 0 1 204.8 0z","p-id":"9332"})],-1))],Lo=[Bn(()=>E("svg",{t:"1748417848263",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"9331",width:"20",height:"20"},[E("path",{d:"M204.8 0h614.4a102.4 102.4 0 0 1 102.4 102.4v512L512 1024l-409.6-409.6v-512A102.4 102.4 0 0 1 204.8 0z","p-id":"9332"})],-1))],zo={class:"time"},Do=["title"],Fo={class:"time"},_o=[Bn(()=>E("div",{class:"m-auto absolute top-0 left-0 h-[100%] flex flex-col w-full items-center justify-center"},[E("svg",{t:"1749628339929",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"18394",width:"100",height:"100"},[E("path",{d:"M745.192727 823.854545c8.843636 8.378182 20.014545 12.101818 31.650909 12.101819 12.567273 0 25.134545-5.12 34.443637-14.894546 17.221818-19.083636 16.290909-48.407273-2.792728-65.629091l-16.756363-15.36s0-0.465455 0.465454-0.465454l-57.716363-53.061818c-12.101818-11.170909-13.032727-30.254545-1.861818-42.821819s30.254545-13.032727 42.821818-1.861818l94.021818 86.109091c3.258182 1.396364 6.516364 1.861818 9.774545 1.861818 7.447273 0 14.894545-3.258182 20.48-8.843636 10.24-11.170909 9.774545-28.858182-1.861818-39.563636l-61.905454-56.785455c4.189091-21.876364 6.516364-44.683636 6.516363-67.490909 0-195.956364-158.72-354.676364-354.676363-354.676364-67.490909 0-130.792727 19.083636-184.785455 51.665455l32.581818 29.789091c9.309091 8.843636 10.24 23.272727 1.396364 33.047272-4.654545 5.12-10.705455 7.447273-17.221818 7.447273-5.585455 0-11.170909-1.861818-15.825455-6.050909l-69.818182-64.232727c-9.309091-6.516364-22.341818-5.585455-30.72 3.258182-8.843636 9.309091-7.912727 24.203636 1.396364 33.047272l24.669091 22.807273-0.465455 0.465455 37.701819 34.909091c13.032727 12.101818 13.963636 32.581818 1.861818 46.08-6.516364 6.981818-15.36 10.705455-24.203637 10.705454-7.912727 0-15.825455-2.792727-21.876363-8.378182L165.236364 343.04c-18.152727-8.843636-40.494545-5.585455-54.923637 10.24-17.221818 19.083636-16.290909 48.407273 2.792728 65.629091l35.374545 32.581818c-10.24 33.047273-15.825455 68.421818-15.825455 105.192727 0 122.414545 61.905455 229.934545 155.927273 293.701819h397.498182c16.756364-11.170909 32.581818-24.203636 47.010909-38.167273l12.101818 11.636363z",fill:"#E5E5E5","p-id":"18395"}),E("path",{d:"M162.909091 215.505455m-24.203636 0a24.203636 24.203636 0 1 0 48.407272 0 24.203636 24.203636 0 1 0-48.407272 0Z",fill:"#E5E5E5","p-id":"18396"}),E("path",{d:"M938.821818 762.88m-24.203636 0a24.203636 24.203636 0 1 0 48.407273 0 24.203636 24.203636 0 1 0-48.407273 0Z",fill:"#E5E5E5","p-id":"18397"}),E("path",{d:"M627.898182 835.956364H341.178182c-13.498182 0-24.203636-10.705455-24.203637-24.203637V433.338182c0-13.498182 10.705455-24.203636 24.203637-24.203637h286.72c13.498182 0 24.203636 10.705455 24.203636 24.203637v378.414545c0 13.032727-11.170909 24.203636-24.203636 24.203637z",fill:"#FFFFFF","p-id":"18398"}),E("path",{d:"M627.898182 842.938182H341.178182c-17.221818 0-31.185455-13.963636-31.185455-31.185455V433.338182c0-17.221818 13.963636-31.185455 31.185455-31.185455h286.72c17.221818 0 31.185455 13.963636 31.185454 31.185455v378.414545c0 17.221818-13.963636 31.185455-31.185454 31.185455zM341.178182 416.116364c-9.309091 0-17.221818 7.912727-17.221818 17.221818v378.414545c0 9.309091 7.912727 17.221818 17.221818 17.221818h286.72c9.309091 0 17.221818-7.912727 17.221818-17.221818V433.338182c0-9.309091-7.912727-17.221818-17.221818-17.221818H341.178182z",fill:"#B7B7B7","p-id":"18399"}),E("path",{d:"M380.276364 496.174545h167.098181c3.723636 0 6.981818-3.258182 6.981819-6.981818s-3.258182-6.981818-6.981819-6.981818H380.276364c-3.723636 0-6.981818 3.258182-6.981819 6.981818s3.258182 6.981818 6.981819 6.981818zM565.061818 543.650909H380.276364c-3.723636 0-6.981818 3.258182-6.981819 6.981818s3.258182 6.981818 6.981819 6.981818h184.785454c3.723636 0 6.981818-3.258182 6.981818-6.981818s-3.258182-6.981818-6.981818-6.981818zM472.901818 605.090909H380.276364c-3.723636 0-6.981818 3.258182-6.981819 6.981818s3.258182 6.981818 6.981819 6.981818h92.16c3.723636 0 6.981818-3.258182 6.981818-6.981818s-2.792727-6.981818-6.516364-6.981818z",fill:"#B7B7B7","p-id":"18400"}),E("path",{d:"M479.883636 734.487273m-65.163636 0a65.163636 65.163636 0 1 0 130.327273 0 65.163636 65.163636 0 1 0-130.327273 0Z",fill:"#FFFFFF","p-id":"18401"}),E("path",{d:"M479.883636 806.632727c-40.029091 0-72.145455-32.581818-72.145454-72.145454s32.581818-72.145455 72.145454-72.145455 72.145455 32.581818 72.145455 72.145455-32.116364 72.145455-72.145455 72.145454z m0-130.792727c-32.116364 0-58.181818 26.065455-58.181818 58.181818s26.065455 58.181818 58.181818 58.181818 58.181818-26.065455 58.181819-58.181818-26.065455-58.181818-58.181819-58.181818z",fill:"#B7B7B7","p-id":"18402"}),E("path",{d:"M525.498182 782.894545l27.927273 27.461819",fill:"#FFFFFF","p-id":"18403"}),E("path",{d:"M552.96 817.803636c-1.861818 0-3.723636-0.465455-5.12-1.861818l-27.927273-27.461818c-2.792727-2.792727-2.792727-6.981818 0-9.774545 2.792727-2.792727 6.981818-2.792727 9.774546 0l27.927272 27.461818c2.792727 2.792727 2.792727 6.981818 0 9.774545-0.930909 0.930909-2.792727 1.861818-4.654545 1.861818z",fill:"#B7B7B7","p-id":"18404"}),E("path",{d:"M611.607273 835.956364l-37.701818-38.167273c-8.843636-9.309091-23.738182-9.309091-33.047273 0-9.309091 8.843636-9.309091 23.738182 0 33.047273l37.701818 38.167272c4.654545 4.654545 10.705455 6.981818 16.756364 6.981819 6.050909 0 11.636364-2.327273 16.290909-6.516364 8.843636-9.774545 9.309091-24.203636 0-33.512727z",fill:"#B7B7B7","p-id":"18405"}),E("path",{d:"M463.127273 389.585455H403.083636c-3.723636 0-6.516364 2.792727-6.516363 6.516363v30.254546c0 3.723636 2.792727 6.516364 6.516363 6.516363h162.443637c3.723636 0 6.516364-2.792727 6.516363-6.516363v-30.254546c0-3.723636-2.792727-6.516364-6.516363-6.516363h-58.647273v-3.723637c0-12.101818-9.774545-21.876364-21.876364-21.876363s-21.876364 9.774545-21.876363 21.876363v3.723637z",fill:"#FFFFFF","p-id":"18406"}),E("path",{d:"M565.527273 437.527273H403.083636c-6.050909 0-11.170909-5.12-11.170909-11.170909v-30.254546c0-6.050909 5.12-11.170909 11.170909-11.170909h55.389091c0.465455-14.429091 12.101818-26.065455 26.530909-26.065454s26.530909 11.636364 26.530909 26.065454h53.992728c6.050909 0 11.170909 5.12 11.170909 11.170909v30.254546c0 6.050909-4.654545 11.170909-11.170909 11.170909z m-162.443637-43.287273c-0.930909 0-1.861818 0.930909-1.861818 1.861818v30.254546c0 0.930909 0.930909 1.861818 1.861818 1.861818h162.443637c0.930909 0 1.861818-0.930909 1.861818-1.861818v-30.254546c0-0.930909-0.930909-1.861818-1.861818-1.861818h-63.301818v-8.378182c0-9.774545-7.912727-17.221818-17.221819-17.221818-9.774545 0-17.221818 7.912727-17.221818 17.221818v8.378182H403.083636z",fill:"#B7B7B7","p-id":"18407"}),E("path",{d:"M741.469091 861.090909H151.272727c-2.792727 0-4.654545-1.861818-4.654545-4.654545s1.861818-4.654545 4.654545-4.654546h590.661818c2.792727 0 4.654545 1.861818 4.654546 4.654546s-2.327273 4.654545-5.12 4.654545z",fill:"#B7B7B7","p-id":"18408"}),E("path",{d:"M448.232727 904.378182H230.4c-2.792727 0-4.654545-1.861818-4.654545-4.654546s1.861818-4.654545 4.654545-4.654545h218.298182c2.792727 0 4.654545 1.861818 4.654545 4.654545s-2.327273 4.654545-5.12 4.654546z",fill:"#B7B7B7","p-id":"18409"}),E("path",{d:"M513.396364 904.378182h-27.461819c-2.792727 0-4.654545-1.861818-4.654545-4.654546s1.861818-4.654545 4.654545-4.654545h27.461819c2.792727 0 4.654545 1.861818 4.654545 4.654545s-2.327273 4.654545-4.654545 4.654546z",fill:"#B7B7B7","p-id":"18410"}),E("path",{d:"M525.498182 242.967273c-13.963636 0-25.134545 11.170909-25.134546 25.134545s11.170909 25.134545 25.134546 25.134546 25.134545-11.170909 25.134545-25.134546-11.636364-25.134545-25.134545-25.134545z m0 43.287272c-9.774545 0-18.152727-7.912727-18.152727-18.152727s7.912727-18.152727 18.152727-18.152727 18.152727 7.912727 18.152727 18.152727-8.378182 18.152727-18.152727 18.152727zM676.770909 99.141818c0-13.963636-11.170909-25.134545-25.134545-25.134545s-25.134545 11.170909-25.134546 25.134545c0 13.963636 11.170909 25.134545 25.134546 25.134546s25.134545-11.636364 25.134545-25.134546z m-24.669091 17.687273c-9.774545 0-18.152727-7.912727-18.152727-18.152727 0-9.774545 7.912727-18.152727 18.152727-18.152728s18.152727 7.912727 18.152727 18.152728c-0.465455 10.24-8.378182 18.152727-18.152727 18.152727zM208.523636 416.581818c-13.963636 0-25.134545 11.170909-25.134545 25.134546s11.170909 25.134545 25.134545 25.134545 25.134545-11.170909 25.134546-25.134545-11.170909-25.134545-25.134546-25.134546z m0 42.821818c-9.774545 0-18.152727-7.912727-18.152727-18.152727s7.912727-18.152727 18.152727-18.152727 18.152727 7.912727 18.152728 18.152727-8.378182 18.152727-18.152728 18.152727zM395.636364 145.221818h-12.101819v-12.101818c0-1.861818-1.396364-3.723636-3.723636-3.723636s-2.792727 2.327273-2.792727 4.189091v12.101818h-12.101818c-1.861818 0-3.723636 1.396364-3.723637 3.723636 0 1.861818 1.396364 3.258182 3.723637 3.258182H377.018182v12.101818c0 1.861818 1.396364 3.723636 3.723636 3.723636s3.723636-1.396364 3.723637-3.723636v-12.101818H395.636364c1.861818 0 3.723636-1.396364 3.723636-3.258182 0-2.327273-1.861818-4.189091-3.723636-4.189091zM756.829091 212.247273H744.727273V200.145455c0-1.861818-1.396364-3.723636-3.723637-3.723637s-3.723636 1.396364-3.723636 3.723637v12.101818H726.109091c-1.861818 0-3.723636 1.396364-3.723636 3.723636s1.396364 3.723636 3.723636 3.723636h12.101818v12.101819c0 1.861818 1.396364 3.723636 3.723636 3.723636s3.723636-1.396364 3.723637-3.723636v-12.101819h12.101818c1.861818 0 3.723636-1.396364 3.723636-3.723636s-2.327273-3.723636-4.654545-3.723636zM690.269091 341.178182h-8.378182v-8.378182c0-1.861818-1.396364-3.723636-3.723636-3.723636s-3.723636 1.396364-3.723637 3.723636v8.378182h-8.378181c-1.861818 0-3.723636 1.396364-3.723637 3.723636s1.396364 3.723636 3.723637 3.723637h8.378181v8.378181c0 1.861818 1.396364 3.723636 3.723637 3.723637s3.723636-1.396364 3.723636-3.723637v-8.378181h8.378182c1.861818 0 3.723636-1.396364 3.723636-3.723637s-1.861818-3.723636-3.723636-3.723636zM220.625455 559.010909h-8.378182v-8.378182c0-1.861818-1.396364-3.723636-3.723637-3.723636s-3.723636 1.396364-3.723636 3.723636v8.378182h-8.378182c-1.861818 0-3.723636 1.396364-3.723636 3.723636s1.396364 3.723636 3.723636 3.723637H204.8v8.378182c0 1.861818 1.396364 3.723636 3.723636 3.723636s3.723636-1.396364 3.723637-3.723636v-8.378182h8.378182c1.861818 0 3.723636-1.396364 3.723636-3.723637s-1.861818-3.723636-3.723636-3.723636z",fill:"#A5A5A5","p-id":"18411"}),E("path",{d:"M822.923636 861.090909h-47.941818c-2.792727 0-4.654545-1.861818-4.654545-4.654545s1.861818-4.654545 4.654545-4.654546h47.941818c2.792727 0 4.654545 1.861818 4.654546 4.654546s-1.861818 4.654545-4.654546 4.654545z",fill:"#B7B7B7","p-id":"18412"}),E("path",{d:"M710.283636 904.378182h-167.098181c-2.792727 0-4.654545-1.861818-4.654546-4.654546s1.861818-4.654545 4.654546-4.654545h167.098181c2.792727 0 4.654545 1.861818 4.654546 4.654545s-1.861818 4.654545-4.654546 4.654546z",fill:"#B7B7B7","p-id":"18413"})]),E("div",{class:"text-[#999] text-[14px] text-center"},"\u6682\u65E0\u5B57\u5E55")],-1))],Wo=Wt({__name:"index",props:{danmaku:Array,currentTime:Number},emits:["selectionChange","update"],setup(i,{expose:e,emit:t}){const n=i,s=t,o=N([]),r=N(null),a=N(null),l=N(-1),u=N(-1),h=N(null),d=N(0),c=N(20),f=N(0),g=N(0);Ft([l,u],()=>{f.value=l.value*d.value+c.value,g.value=(u.value+1)*d.value+c.value}),He(()=>n.danmaku.findIndex(U=>n.currentTime>=U.start&&n.currentTime<=U.end));const p=N(null),m=He(()=>p.value!=null?p.value*d.value+d.value/2+c.value:null),b=N(null),v=He(()=>b.value!=null?b.value*d.value+d.value/2+c.value:0),y=()=>{p.value=null},w=U=>{const A=a.value.getBoundingClientRect().top,z=U.clientY-A-c.value,V=Math.floor(z/d.value);V>=0&&V<n.danmaku.length?p.value=V:p.value=null},x=()=>{p.value!=null&&(b.value=p.value)},k=U=>{var V,B;const A=((V=n.danmaku[U])==null?void 0:V.time)??0,z=((B=n.danmaku[U+1])==null?void 0:B.time)??1/0;return n.currentTime>=A&&n.currentTime<z},C=U=>U>=l.value&&U<=u.value;function R(){Qn(()=>{if(l.value!==-1&&o.value[l.value]){if(h.value||o.value.length===0)return;o.value[l.value].scrollIntoView({behavior:"smooth",block:"center"})}})}function S(U){h.value=U,document.addEventListener("mousemove",_),document.addEventListener("mouseup",te)}const _=U=>{const A=a.value.getBoundingClientRect(),z=U.clientY-A.top+a.value.scrollTop-c.value;let V=Math.round(z/d.value);V=Math.max(0,Math.min(V,n.danmaku.length-1)),h.value==="start"?l.value=Math.min(V,u.value):h.value==="end"&&(u.value=Math.max(V,l.value)),l.value=Math.max(0,l.value),u.value=Math.min(n.danmaku.length-1,u.value)};function te(){s("update",n.danmaku[l.value].start/1e3,n.danmaku[u.value].end/1e3),h.value=null,document.removeEventListener("mousemove",_),document.removeEventListener("mouseup",te)}return bs(()=>{o.value[0]&&(d.value=o.value[0].getBoundingClientRect().height)}),Dt(()=>{const U=window.getComputedStyle(a.value),A=parseFloat(U.paddingTop);c.value=isNaN(A)?0:A,R()}),Ft(()=>n.currentTime,R),e({setSelectedRange:(U,A,z=!0)=>{const{startIndex:V,endIndex:B}=function(j,Y,ee){let F=-1,J=-1;for(let ne=0;ne<j.length;ne++){const re=j[ne];if(F===-1&&re.start<=Y&&Y<=re.end&&(F=ne),J===-1&&re.start<=ee&&ee<=re.end&&(J=ne),F!==-1&&J!==-1)break}if(F===-1){let ne=1/0;for(let re=0;re<j.length;re++){const _e=Math.abs(j[re].start-Y);_e<ne&&(ne=_e,F=re)}}if(J===-1){let ne=1/0;for(let re=0;re<j.length;re++){const _e=Math.abs(j[re].end-ee);_e<ne&&(ne=_e,J=re)}}const ae=j.slice(F,J+1),Oe=ae.map(ne=>ne.text).join(" ");return{startIndex:F,endIndex:J,matchedSegments:ae,mergedText:Oe}}(n.danmaku,U,A);l.value=V,u.value=B,z&&R()},clear:()=>{l.value=-1,u.value=-1}}),(U,A)=>{var z;return((z=i.danmaku)==null?void 0:z.length)>0?(L(),q("div",{key:0,class:"danmaku-container",ref_key:"container",ref:a},[M(m)!==null?(L(),q("div",{key:0,class:"hover-line !hidden",style:Ue({top:M(m)+"px"})},null,4)):ye("",!0),b.value!==null?(L(),q("div",{key:1,class:"marker-line !hidden",style:Ue({top:M(v)+"px"})},null,4)):ye("",!0),l.value>=0?(L(),q("div",{key:2,class:"slider-arrow top",style:Ue({top:f.value+"px"}),onMousedown:A[0]||(A[0]=V=>S("start"))},Bo,36)):ye("",!0),l.value>=0?(L(),q("div",{key:3,class:"slider-arrow bottom",style:Ue({top:g.value+"px"}),onMousedown:A[1]||(A[1]=V=>S("end"))},Lo,36)):ye("",!0),E("div",{class:"danmaku-list",ref_key:"list",ref:r,onMousemove:w,onMouseleave:y,onClick:x},[(L(!0),q(Je,null,dt(i.danmaku,(V,B)=>(L(),q("div",{key:B,ref_for:!0,ref:j=>o.value[B]=j,class:_t(["danmaku-line",{active:k(B),selected:C(B)}])},[E("div",zo,me(M(Ge)(V.start/1e3)),1),E("div",{class:"text",title:V.text},me(V.text),9,Do),E("div",Fo,me(M(Ge)(V.end/1e3)),1)],2))),128))],544)],512)):(L(),q("div",{key:1,class:"danmaku-container",ref_key:"container",ref:a},_o,512))}}}),Uo=gn(Wo,[["__scopeId","data-v-c14b87c9"]]);function Ae(i,e,t,n){return new(t||(t=Promise))(function(s,o){function r(u){try{l(n.next(u))}catch(h){o(h)}}function a(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){var h;u.done?s(u.value):(h=u.value,h instanceof t?h:new t(function(d){d(h)})).then(r,a)}l((n=n.apply(i,e||[])).next())})}typeof SuppressedError=="function"&&SuppressedError;let It=class{constructor(){this.listeners={}}on(i,e,t){if(this.listeners[i]||(this.listeners[i]=new Set),t==null?void 0:t.once){const n=(...s)=>{this.un(i,n),e(...s)};return this.listeners[i].add(n),()=>this.un(i,n)}return this.listeners[i].add(e),()=>this.un(i,e)}un(i,e){var t;(t=this.listeners[i])===null||t===void 0||t.delete(e)}once(i,e){return this.on(i,e,{once:!0})}unAll(){this.listeners={}}emit(i,...e){this.listeners[i]&&this.listeners[i].forEach(t=>t(...e))}};const Kt={decode:function(i,e){return Ae(this,void 0,void 0,function*(){const t=new AudioContext({sampleRate:e});try{return yield t.decodeAudioData(i)}finally{t.close()}})},createBuffer:function(i,e){if(!i||i.length===0)throw new Error("channelData must be a non-empty array");if(e<=0)throw new Error("duration must be greater than 0");if(typeof i[0]=="number"&&(i=[i]),!i[0]||i[0].length===0)throw new Error("channelData must contain non-empty channel arrays");(function(n){const s=n[0];if(s.some(o=>o>1||o<-1)){const o=s.length;let r=0;for(let a=0;a<o;a++){const l=Math.abs(s[a]);l>r&&(r=l)}for(const a of n)for(let l=0;l<o;l++)a[l]/=r}})(i);const t=i.map(n=>n instanceof Float32Array?n:Float32Array.from(n));return{duration:e,length:t[0].length,sampleRate:t[0].length/e,numberOfChannels:t.length,getChannelData:n=>{const s=t[n];if(!s)throw new Error(`Channel ${n} not found`);return s},copyFromChannel:AudioBuffer.prototype.copyFromChannel,copyToChannel:AudioBuffer.prototype.copyToChannel}}};function _i(i,e){const t=e.xmlns?document.createElementNS(e.xmlns,i):document.createElement(i);for(const[n,s]of Object.entries(e))if(n==="children"&&s)for(const[o,r]of Object.entries(s))r instanceof Node?t.appendChild(r):typeof r=="string"?t.appendChild(document.createTextNode(r)):t.appendChild(_i(o,r));else n==="style"?Object.assign(t.style,s):n==="textContent"?t.textContent=s:t.setAttribute(n,s.toString());return t}function Wi(i,e,t){const n=_i(i,e||{});return t==null||t.appendChild(n),n}var Vo=Object.freeze({__proto__:null,createElement:Wi,default:Wi});const Qo={fetchBlob:function(i,e,t){return Ae(this,void 0,void 0,function*(){const n=yield fetch(i,t);if(n.status>=400)throw new Error(`Failed to fetch ${i}: ${n.status} (${n.statusText})`);return function(s,o){Ae(this,void 0,void 0,function*(){if(!s.body||!s.headers)return;const r=s.body.getReader(),a=Number(s.headers.get("Content-Length"))||0;let l=0;const u=h=>{l+=(h==null?void 0:h.length)||0;const d=Math.round(l/a*100);o(d)};try{for(;;){const h=yield r.read();if(h.done)break;u(h.value)}}catch(h){console.warn("Progress tracking error:",h)}})}(n.clone(),e),n.blob()})}};function ce(i){let e=i;const t=new Set;return{get value(){return e},set(n){Object.is(e,n)||(e=n,t.forEach(s=>s(e)))},update(n){this.set(n(e))},subscribe:n=>(t.add(n),()=>t.delete(n))}}function st(i,e){const t=ce(i());return e.forEach(n=>n.subscribe(()=>{const s=i();Object.is(t.value,s)||t.set(s)})),{get value(){return t.value},subscribe:n=>t.subscribe(n)}}function Xe(i,e){let t;const n=()=>{t&&(t(),t=void 0),t=i()},s=e.map(o=>o.subscribe(n));return n(),()=>{t&&(t(),t=void 0),s.forEach(o=>o())}}class $o extends It{get isPlayingSignal(){return this._isPlaying}get currentTimeSignal(){return this._currentTime}get durationSignal(){return this._duration}get volumeSignal(){return this._volume}get mutedSignal(){return this._muted}get playbackRateSignal(){return this._playbackRate}get seekingSignal(){return this._seeking}constructor(e){super(),this.isExternalMedia=!1,this.reactiveMediaEventCleanups=[],e.media?(this.media=e.media,this.isExternalMedia=!0):this.media=document.createElement("audio"),this._isPlaying=ce(!1),this._currentTime=ce(0),this._duration=ce(0),this._volume=ce(this.media.volume),this._muted=ce(this.media.muted),this._playbackRate=ce(this.media.playbackRate||1),this._seeking=ce(!1),this.setupReactiveMediaEvents(),e.mediaControls&&(this.media.controls=!0),e.autoplay&&(this.media.autoplay=!0),e.playbackRate!=null&&this.onMediaEvent("canplay",()=>{e.playbackRate!=null&&(this.media.playbackRate=e.playbackRate)},{once:!0})}setupReactiveMediaEvents(){this.reactiveMediaEventCleanups.push(this.onMediaEvent("play",()=>{this._isPlaying.set(!0)})),this.reactiveMediaEventCleanups.push(this.onMediaEvent("pause",()=>{this._isPlaying.set(!1)})),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ended",()=>{this._isPlaying.set(!1)})),this.reactiveMediaEventCleanups.push(this.onMediaEvent("timeupdate",()=>{this._currentTime.set(this.media.currentTime)})),this.reactiveMediaEventCleanups.push(this.onMediaEvent("durationchange",()=>{this._duration.set(this.media.duration||0)})),this.reactiveMediaEventCleanups.push(this.onMediaEvent("loadedmetadata",()=>{this._duration.set(this.media.duration||0)})),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeking",()=>{this._seeking.set(!0)})),this.reactiveMediaEventCleanups.push(this.onMediaEvent("seeked",()=>{this._seeking.set(!1)})),this.reactiveMediaEventCleanups.push(this.onMediaEvent("volumechange",()=>{this._volume.set(this.media.volume),this._muted.set(this.media.muted)})),this.reactiveMediaEventCleanups.push(this.onMediaEvent("ratechange",()=>{this._playbackRate.set(this.media.playbackRate)}))}onMediaEvent(e,t,n){return this.media.addEventListener(e,t,n),()=>this.media.removeEventListener(e,t,n)}getSrc(){return this.media.currentSrc||this.media.src||""}revokeSrc(){const e=this.getSrc();e.startsWith("blob:")&&URL.revokeObjectURL(e)}canPlayType(e){return this.media.canPlayType(e)!==""}setSrc(e,t){const n=this.getSrc();if(e&&n===e)return;this.revokeSrc();const s=t instanceof Blob&&(this.canPlayType(t.type)||!e)?URL.createObjectURL(t):e;if(n&&this.media.removeAttribute("src"),s||e)try{this.media.src=s}catch{this.media.src=e}}destroy(){this.reactiveMediaEventCleanups.forEach(e=>e()),this.reactiveMediaEventCleanups=[],this.isExternalMedia||(this.media.pause(),this.revokeSrc(),this.media.removeAttribute("src"),this.media.load(),this.media.remove())}setMediaElement(e){this.reactiveMediaEventCleanups.forEach(t=>t()),this.reactiveMediaEventCleanups=[],this.media=e,this.setupReactiveMediaEvents()}play(){return Ae(this,void 0,void 0,function*(){try{return yield this.media.play()}catch(e){if(e instanceof DOMException&&e.name==="AbortError")return;throw e}})}pause(){this.media.pause()}isPlaying(){return!this.media.paused&&!this.media.ended}setTime(e){this.media.currentTime=Math.max(0,Math.min(e,this.getDuration()))}getDuration(){return this.media.duration}getCurrentTime(){return this.media.currentTime}getVolume(){return this.media.volume}setVolume(e){this.media.volume=e}getMuted(){return this.media.muted}setMuted(e){this.media.muted=e}getPlaybackRate(){return this.media.playbackRate}isSeeking(){return this.media.seeking}setPlaybackRate(e,t){t!=null&&(this.media.preservesPitch=t),this.media.playbackRate=e}getMediaElement(){return this.media}setSinkId(e){return this.media.setSinkId(e)}}function Ho({maxTop:i,maxBottom:e,halfHeight:t,vScale:n,barMinHeight:s=0,barAlign:o}){let r=Math.round(i*t*n),a=r+Math.round(e*t*n)||1;return a<s&&(a=s,o||(r=a/2)),{topHeight:r,totalHeight:a}}function Jo({barAlign:i,halfHeight:e,topHeight:t,totalHeight:n,canvasHeight:s}){return i==="top"?0:i==="bottom"?s-n:e-t}function Ui(i,e,t){const n=e-i.left,s=t-i.top;return[n/i.width,s/i.height]}function Vi(i){return!!(i.barWidth||i.barGap||i.barAlign)}function Qi(i,e){if(!Vi(e))return i;const t=e.barWidth||.5,n=t+(e.barGap||t/2);return n===0?i:Math.floor(i/n)*n}function $i({scrollLeft:i,totalWidth:e,numCanvases:t}){if(e===0)return[0];const n=i/e,s=Math.floor(n*t);return[s-1,s,s+1]}function Hi(i){const e=i._cleanup;typeof e=="function"&&e()}class Yo extends It{constructor(e,t){super(),this.timeouts=[],this.isScrollable=!1,this.audioData=null,this.resizeObserver=null,this.lastContainerWidth=0,this.isDragging=!1,this.subscriptions=[],this.unsubscribeOnScroll=[],this.dragStream=null,this.scrollStream=null,this.subscriptions=[],this.options=e;const n=this.parentFromOptionsContainer(e.container);this.parent=n;const[s,o]=this.initHtml();n.appendChild(s),this.container=s,this.scrollContainer=o.querySelector(".scroll"),this.wrapper=o.querySelector(".wrapper"),this.canvasWrapper=o.querySelector(".canvases"),this.progressWrapper=o.querySelector(".progress"),this.cursor=o.querySelector(".cursor"),t&&o.appendChild(t),this.initEvents()}parentFromOptionsContainer(e){let t;if(typeof e=="string"?t=document.querySelector(e):e instanceof HTMLElement&&(t=e),!t)throw new Error("Container not found");return t}initEvents(){this.wrapper.addEventListener("click",t=>{const n=this.wrapper.getBoundingClientRect(),[s,o]=Ui(n,t.clientX,t.clientY);this.emit("click",s,o)}),this.wrapper.addEventListener("dblclick",t=>{const n=this.wrapper.getBoundingClientRect(),[s,o]=Ui(n,t.clientX,t.clientY);this.emit("dblclick",s,o)}),this.options.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.scrollStream=function(t){const n=ce({scrollLeft:t.scrollLeft,scrollWidth:t.scrollWidth,clientWidth:t.clientWidth}),s=st(()=>function(a){const{scrollLeft:l,scrollWidth:u,clientWidth:h}=a;if(u===0)return{startX:0,endX:1};const d=l/u,c=(l+h)/u;return{startX:Math.max(0,Math.min(1,d)),endX:Math.max(0,Math.min(1,c))}}(n.value),[n]),o=st(()=>function(a){return{left:a.scrollLeft,right:a.scrollLeft+a.clientWidth}}(n.value),[n]),r=()=>{n.set({scrollLeft:t.scrollLeft,scrollWidth:t.scrollWidth,clientWidth:t.clientWidth})};return t.addEventListener("scroll",r,{passive:!0}),{scrollData:n,percentages:s,bounds:o,cleanup:()=>{t.removeEventListener("scroll",r),Hi(n)}}}(this.scrollContainer);const e=Xe(()=>{const{startX:t,endX:n}=this.scrollStream.percentages.value,{left:s,right:o}=this.scrollStream.bounds.value;this.emit("scroll",t,n,s,o)},[this.scrollStream.percentages,this.scrollStream.bounds]);if(this.subscriptions.push(e),typeof ResizeObserver=="function"){const t=this.createDelay(100);this.resizeObserver=new ResizeObserver(()=>{t().then(()=>this.onContainerResize()).catch(()=>{})}),this.resizeObserver.observe(this.scrollContainer)}}onContainerResize(){const e=this.parent.clientWidth;e===this.lastContainerWidth&&this.options.height!=="auto"||(this.lastContainerWidth=e,this.reRender(),this.emit("resize"))}initDrag(){if(this.dragStream)return;this.dragStream=function(t,n={}){const{threshold:s=3,mouseButton:o=0,touchDelay:r=100}=n,a=ce(null),l=new Map,u=matchMedia("(pointer: coarse)").matches;let h=()=>{};const d=c=>{if(c.button!==o||(l.set(c.pointerId,c),l.size>1))return;let f=c.clientX,g=c.clientY,p=!1;const m=Date.now(),b=t.getBoundingClientRect(),{left:v,top:y}=b,w=S=>{if(S.defaultPrevented||l.size>1||u&&Date.now()-m<r)return;const _=S.clientX,te=S.clientY,U=_-f,A=te-g;(p||Math.abs(U)>s||Math.abs(A)>s)&&(S.preventDefault(),S.stopPropagation(),p||(a.set({type:"start",x:f-v,y:g-y}),p=!0),a.set({type:"move",x:_-v,y:te-y,deltaX:U,deltaY:A}),f=_,g=te)},x=S=>{if(l.delete(S.pointerId),p){const _=S.clientX,te=S.clientY;a.set({type:"end",x:_-v,y:te-y})}h()},k=S=>{l.delete(S.pointerId),S.relatedTarget&&S.relatedTarget!==document.documentElement||x(S)},C=S=>{p&&(S.stopPropagation(),S.preventDefault())},R=S=>{S.defaultPrevented||l.size>1||p&&S.preventDefault()};document.addEventListener("pointermove",w),document.addEventListener("pointerup",x),document.addEventListener("pointerout",k),document.addEventListener("pointercancel",k),document.addEventListener("touchmove",R,{passive:!1}),document.addEventListener("click",C,{capture:!0}),h=()=>{document.removeEventListener("pointermove",w),document.removeEventListener("pointerup",x),document.removeEventListener("pointerout",k),document.removeEventListener("pointercancel",k),document.removeEventListener("touchmove",R),setTimeout(()=>{document.removeEventListener("click",C,{capture:!0})},10)}};return t.addEventListener("pointerdown",d),{signal:a,cleanup:()=>{h(),t.removeEventListener("pointerdown",d),l.clear(),Hi(a)}}}(this.wrapper);const e=Xe(()=>{const t=this.dragStream.signal.value;if(!t)return;const n=this.wrapper.getBoundingClientRect().width,s=(o=t.x/n)<0?0:o>1?1:o;var o;t.type==="start"?(this.isDragging=!0,this.emit("dragstart",s)):t.type==="move"?this.emit("drag",s):t.type==="end"&&(this.isDragging=!1,this.emit("dragend",s))},[this.dragStream.signal]);this.subscriptions.push(e)}initHtml(){const e=document.createElement("div"),t=e.attachShadow({mode:"open"}),n=this.options.cspNonce&&typeof this.options.cspNonce=="string"?this.options.cspNonce.replace(/"/g,""):"";return t.innerHTML=`
      <style${n?` nonce="${n}"`:""}>
        :host {
          user-select: none;
          min-width: 1px;
        }
        :host audio {
          display: block;
          width: 100%;
        }
        :host .scroll {
          overflow-x: auto;
          overflow-y: hidden;
          width: 100%;
          position: relative;
        }
        :host .noScrollbar {
          scrollbar-color: transparent;
          scrollbar-width: none;
        }
        :host .noScrollbar::-webkit-scrollbar {
          display: none;
          -webkit-appearance: none;
        }
        :host .wrapper {
          position: relative;
          overflow: visible;
          z-index: 2;
        }
        :host .canvases {
          min-height: ${this.getHeight(this.options.height,this.options.splitChannels)}px;
          pointer-events: none;
        }
        :host .canvases > div {
          position: relative;
        }
        :host canvas {
          display: block;
          position: absolute;
          top: 0;
          image-rendering: pixelated;
        }
        :host .progress {
          pointer-events: none;
          position: absolute;
          z-index: 2;
          top: 0;
          left: 0;
          width: 0;
          height: 100%;
          overflow: hidden;
        }
        :host .progress > div {
          position: relative;
        }
        :host .cursor {
          pointer-events: none;
          position: absolute;
          z-index: 5;
          top: 0;
          left: 0;
          height: 100%;
          border-radius: 2px;
        }
      </style>

      <div class="scroll" part="scroll">
        <div class="wrapper" part="wrapper">
          <div class="canvases" part="canvases"></div>
          <div class="progress" part="progress"></div>
          <div class="cursor" part="cursor"></div>
        </div>
      </div>
    `,[e,t]}setOptions(e){if(this.options.container!==e.container){const t=this.parentFromOptionsContainer(e.container);t.appendChild(this.container),this.parent=t}e.dragToSeek!==!0&&typeof this.options.dragToSeek!="object"||this.initDrag(),this.options=e,this.reRender()}getWrapper(){return this.wrapper}getWidth(){return this.scrollContainer.clientWidth}getScroll(){return this.scrollContainer.scrollLeft}setScroll(e){this.scrollContainer.scrollLeft=e}setScrollPercentage(e){const{scrollWidth:t}=this.scrollContainer,n=t*e;this.setScroll(n)}destroy(){var e;this.subscriptions.forEach(t=>t()),this.container.remove(),this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null),(e=this.unsubscribeOnScroll)===null||e===void 0||e.forEach(t=>t()),this.unsubscribeOnScroll=[],this.dragStream&&(this.dragStream.cleanup(),this.dragStream=null),this.scrollStream&&(this.scrollStream.cleanup(),this.scrollStream=null)}createDelay(e=10){let t,n;const s=()=>{t&&(clearTimeout(t),t=void 0),n&&(n(),n=void 0)};return this.timeouts.push(s),()=>new Promise((o,r)=>{s(),n=r,t=setTimeout(()=>{t=void 0,n=void 0,o()},e)})}getHeight(e,t){var n;const s=((n=this.audioData)===null||n===void 0?void 0:n.numberOfChannels)||1;return function({optionsHeight:o,optionsSplitChannels:r,parentHeight:a,numberOfChannels:l,defaultHeight:u=128}){if(o==null)return u;const h=Number(o);if(!isNaN(h))return h;if(o==="auto"){const d=a||u;return r!=null&&r.every(c=>!c.overlay)?d/l:d}return u}({optionsHeight:e,optionsSplitChannels:t,parentHeight:this.parent.clientHeight,numberOfChannels:s,defaultHeight:128})}convertColorValues(e,t){return function(n,s,o){if(!Array.isArray(n))return n||"";if(n.length===0)return"#999";if(n.length<2)return n[0]||"";const r=document.createElement("canvas"),a=r.getContext("2d"),l=o??r.height*s,u=a.createLinearGradient(0,0,0,l||s),h=1/(n.length-1);return n.forEach((d,c)=>{u.addColorStop(c*h,d)}),u}(e,this.getPixelRatio(),t==null?void 0:t.canvas.height)}getPixelRatio(){return e=window.devicePixelRatio,Math.max(1,e||1);var e}renderBarWaveform(e,t,n,s){const{width:o,height:r}=n.canvas,{halfHeight:a,barWidth:l,barRadius:u,barIndexScale:h,barSpacing:d,barMinHeight:c}=function({width:g,height:p,length:m,options:b,pixelRatio:v}){const y=p/2,w=b.barWidth?b.barWidth*v:1,x=b.barGap?b.barGap*v:b.barWidth?w/2:0,k=w+x||1;return{halfHeight:y,barWidth:w,barGap:x,barRadius:b.barRadius||0,barMinHeight:b.barMinHeight?b.barMinHeight*v:0,barIndexScale:m>0?g/k/m:0,barSpacing:k}}({width:o,height:r,length:(e[0]||[]).length,options:t,pixelRatio:this.getPixelRatio()}),f=function({channelData:g,barIndexScale:p,barSpacing:m,barWidth:b,halfHeight:v,vScale:y,canvasHeight:w,barAlign:x,barMinHeight:k}){const C=g[0]||[],R=g[1]||C,S=C.length,_=[];let te=0,U=0,A=0;for(let z=0;z<=S;z++){const V=Math.round(z*p);if(V>te){const{topHeight:Y,totalHeight:ee}=Ho({maxTop:U,maxBottom:A,halfHeight:v,vScale:y,barMinHeight:k,barAlign:x}),F=Jo({barAlign:x,halfHeight:v,topHeight:Y,totalHeight:ee,canvasHeight:w});_.push({x:te*m,y:F,width:b,height:ee}),te=V,U=0,A=0}const B=Math.abs(C[z]||0),j=Math.abs(R[z]||0);B>U&&(U=B),j>A&&(A=j)}return _}({channelData:e,barIndexScale:h,barSpacing:d,barWidth:l,halfHeight:a,vScale:s,canvasHeight:r,barAlign:t.barAlign,barMinHeight:c});n.beginPath();for(const g of f)u&&"roundRect"in n?n.roundRect(g.x,g.y,g.width,g.height,u):n.rect(g.x,g.y,g.width,g.height);n.fill(),n.closePath()}renderLineWaveform(e,t,n,s){const{width:o,height:r}=n.canvas,a=function({channelData:l,width:u,height:h,vScale:d}){const c=h/2,f=l[0]||[];return[f,l[1]||f].map((g,p)=>{const m=g.length,b=m?u/m:0,v=c,y=p===0?-1:1,w=[{x:0,y:v}];let x=0,k=0;for(let C=0;C<=m;C++){const R=Math.round(C*b);if(R>x){const _=v+(Math.round(k*c*d)||1)*y;w.push({x,y:_}),x=R,k=0}const S=Math.abs(g[C]||0);S>k&&(k=S)}return w.push({x,y:v}),w})}({channelData:e,width:o,height:r,vScale:s});n.beginPath();for(const l of a)if(l.length){n.moveTo(l[0].x,l[0].y);for(let u=1;u<l.length;u++){const h=l[u];n.lineTo(h.x,h.y)}}n.fill(),n.closePath()}renderWaveform(e,t,n){if(n.fillStyle=this.convertColorValues(t.waveColor,n),t.renderFunction)return void t.renderFunction(e,n);const s=function({channelData:o,barHeight:r,normalize:a,maxPeak:l}){var u;const h=r||1;if(!a)return h;const d=o[0];if(!d||d.length===0)return h;let c=l??0;if(!l)for(let f=0;f<d.length;f++){const g=(u=d[f])!==null&&u!==void 0?u:0,p=Math.abs(g);p>c&&(c=p)}return c?h/c:h}({channelData:e,barHeight:t.barHeight,normalize:t.normalize,maxPeak:t.maxPeak});Vi(t)?this.renderBarWaveform(e,t,n,s):this.renderLineWaveform(e,t,n,s)}renderSingleCanvas(e,t,n,s,o,r,a){const l=this.getPixelRatio(),u=document.createElement("canvas");u.width=Math.round(n*l),u.height=Math.round(s*l),u.style.width=`${n}px`,u.style.height=`${s}px`,u.style.left=`${Math.round(o)}px`,r.appendChild(u);const h=u.getContext("2d");if(t.renderFunction?(h.fillStyle=this.convertColorValues(t.waveColor,h),t.renderFunction(e,h)):this.renderWaveform(e,t,h),u.width>0&&u.height>0){const d=u.cloneNode(),c=d.getContext("2d");c.drawImage(u,0,0),c.globalCompositeOperation="source-in",c.fillStyle=this.convertColorValues(t.progressColor,c),c.fillRect(0,0,u.width,u.height),a.appendChild(d)}}renderMultiCanvas(e,t,n,s,o,r){const a=this.getPixelRatio(),{clientWidth:l}=this.scrollContainer,u=n/a,h=function({clientWidth:g,totalWidth:p,options:m}){return Qi(Math.min(8e3,g,p),m)}({clientWidth:l,totalWidth:u,options:t});let d={};if(h===0)return;const c=g=>{if(g<0||g>=f||d[g])return;d[g]=!0;const p=g*h;let m=Math.min(u-p,h);if(m=Qi(m,t),m<=0)return;const b=function({channelData:v,offset:y,clampedWidth:w,totalWidth:x}){return v.map(k=>{const C=Math.floor(y/x*k.length),R=Math.floor((y+w)/x*k.length);return k.slice(C,R)})}({channelData:e,offset:p,clampedWidth:m,totalWidth:u});this.renderSingleCanvas(b,t,m,s,p,o,r)},f=Math.ceil(u/h);if(this.isScrollable){if($i({scrollLeft:this.scrollContainer.scrollLeft,totalWidth:u,numCanvases:f}).forEach(g=>c(g)),f>1){const g=this.on("scroll",()=>{const{scrollLeft:p}=this.scrollContainer;Object.keys(d).length>10&&(o.innerHTML="",r.innerHTML="",d={}),$i({scrollLeft:p,totalWidth:u,numCanvases:f}).forEach(m=>c(m))});this.unsubscribeOnScroll.push(g)}}else for(let g=0;g<f;g++)c(g)}renderChannel(e,t,n,s){var{overlay:o}=t,r=function(h,d){var c={};for(var f in h)Object.prototype.hasOwnProperty.call(h,f)&&d.indexOf(f)<0&&(c[f]=h[f]);if(h!=null&&typeof Object.getOwnPropertySymbols=="function"){var g=0;for(f=Object.getOwnPropertySymbols(h);g<f.length;g++)d.indexOf(f[g])<0&&Object.prototype.propertyIsEnumerable.call(h,f[g])&&(c[f[g]]=h[f[g]])}return c}(t,["overlay"]);const a=document.createElement("div"),l=this.getHeight(r.height,r.splitChannels);a.style.height=`${l}px`,o&&s>0&&(a.style.marginTop=`-${l}px`),this.canvasWrapper.style.minHeight=`${l}px`,this.canvasWrapper.appendChild(a);const u=a.cloneNode();this.progressWrapper.appendChild(u),this.renderMultiCanvas(e,r,n,l,a,u)}render(e){return Ae(this,void 0,void 0,function*(){var t;this.timeouts.forEach(u=>u()),this.timeouts=[],this.canvasWrapper.innerHTML="",this.progressWrapper.innerHTML="",this.options.width!=null&&(this.scrollContainer.style.width=typeof this.options.width=="number"?`${this.options.width}px`:this.options.width);const n=this.getPixelRatio(),s=this.scrollContainer.clientWidth,{scrollWidth:o,isScrollable:r,useParentWidth:a,width:l}=function({duration:u,minPxPerSec:h=0,parentWidth:d,fillParent:c,pixelRatio:f}){const g=Math.ceil(u*h),p=g>d,m=!!(c&&!p);return{scrollWidth:g,isScrollable:p,useParentWidth:m,width:(m?d:g)*f}}({duration:e.duration,minPxPerSec:this.options.minPxPerSec||0,parentWidth:s,fillParent:this.options.fillParent,pixelRatio:n});if(this.isScrollable=r,this.wrapper.style.width=a?"100%":`${o}px`,this.scrollContainer.style.overflowX=this.isScrollable?"auto":"hidden",this.scrollContainer.classList.toggle("noScrollbar",!!this.options.hideScrollbar),this.cursor.style.backgroundColor=`${this.options.cursorColor||this.options.progressColor}`,this.cursor.style.width=`${this.options.cursorWidth}px`,this.audioData=e,this.emit("render"),this.options.splitChannels)for(let u=0;u<e.numberOfChannels;u++){const h=Object.assign(Object.assign({},this.options),(t=this.options.splitChannels)===null||t===void 0?void 0:t[u]);this.renderChannel([e.getChannelData(u)],h,l,u)}else{const u=[e.getChannelData(0)];e.numberOfChannels>1&&u.push(e.getChannelData(1)),this.renderChannel(u,this.options,l,0)}Promise.resolve().then(()=>this.emit("rendered"))})}reRender(){if(this.unsubscribeOnScroll.forEach(n=>n()),this.unsubscribeOnScroll=[],!this.audioData)return;const{scrollWidth:e}=this.scrollContainer,{right:t}=this.progressWrapper.getBoundingClientRect();if(this.render(this.audioData),this.isScrollable&&e!==this.scrollContainer.scrollWidth){const{right:n}=this.progressWrapper.getBoundingClientRect(),s=function(o){const r=2*o;return(r<0?Math.floor(r):Math.ceil(r))/2}(n-t);this.scrollContainer.scrollLeft+=s}}zoom(e){this.options.minPxPerSec=e,this.reRender()}scrollIntoView(e,t=!1){const{scrollLeft:n,scrollWidth:s,clientWidth:o}=this.scrollContainer,r=e*s,a=n,l=n+o,u=o/2;if(this.isDragging)r+30>l?this.scrollContainer.scrollLeft+=30:r-30<a&&(this.scrollContainer.scrollLeft-=30);else{(r<a||r>l)&&(this.scrollContainer.scrollLeft=r-(this.options.autoCenter?u:0));const h=r-n-u;t&&this.options.autoCenter&&h>0&&(this.scrollContainer.scrollLeft+=h)}}renderProgress(e,t){if(isNaN(e))return;const n=100*e;this.canvasWrapper.style.clipPath=`polygon(${n}% 0%, 100% 0%, 100% 100%, ${n}% 100%)`,this.progressWrapper.style.width=`${n}%`,this.cursor.style.left=`${n}%`,this.cursor.style.transform=this.options.cursorWidth?`translateX(-${e*this.options.cursorWidth}px)`:"",this.isScrollable&&this.options.autoScroll&&this.audioData&&this.audioData.duration>0&&this.scrollIntoView(e,t)}exportImage(e,t,n){return Ae(this,void 0,void 0,function*(){const s=this.canvasWrapper.querySelectorAll("canvas");if(!s.length)throw new Error("No waveform data");if(n==="dataURL"){const o=Array.from(s).map(r=>r.toDataURL(e,t));return Promise.resolve(o)}return Promise.all(Array.from(s).map(o=>new Promise((r,a)=>{o.toBlob(l=>{l?r(l):a(new Error("Could not export image"))},e,t)})))})}}class Go extends It{constructor(){super(...arguments),this.animationFrameId=null,this.isRunning=!1}start(){if(this.isRunning)return;this.isRunning=!0;const e=()=>{this.isRunning&&(this.emit("tick"),this.animationFrameId=requestAnimationFrame(e))};e()}stop(){this.isRunning=!1,this.animationFrameId!==null&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null)}destroy(){this.stop()}}class Ln extends It{constructor(e=new AudioContext){super(),this.bufferNode=null,this.playStartTime=0,this.playedDuration=0,this._muted=!1,this._playbackRate=1,this._duration=void 0,this.buffer=null,this.currentSrc="",this.paused=!0,this.crossOrigin=null,this.seeking=!1,this.autoplay=!1,this.addEventListener=this.on,this.removeEventListener=this.un,this.audioContext=e,this.gainNode=this.audioContext.createGain(),this.gainNode.connect(this.audioContext.destination)}load(){return Ae(this,void 0,void 0,function*(){})}get src(){return this.currentSrc}set src(e){if(this.currentSrc=e,this._duration=void 0,!e)return this.buffer=null,void this.emit("emptied");fetch(e).then(t=>{if(t.status>=400)throw new Error(`Failed to fetch ${e}: ${t.status} (${t.statusText})`);return t.arrayBuffer()}).then(t=>this.currentSrc!==e?null:this.audioContext.decodeAudioData(t)).then(t=>{this.currentSrc===e&&(this.buffer=t,this.emit("loadedmetadata"),this.emit("canplay"),this.autoplay&&this.play())}).catch(t=>{console.error("WebAudioPlayer load error:",t)})}_play(){if(!this.paused)return;this.paused=!1,this.bufferNode&&(this.bufferNode.onended=null,this.bufferNode.disconnect()),this.bufferNode=this.audioContext.createBufferSource(),this.buffer&&(this.bufferNode.buffer=this.buffer),this.bufferNode.playbackRate.value=this._playbackRate,this.bufferNode.connect(this.gainNode);let e=this.playedDuration*this._playbackRate;(e>=this.duration||e<0)&&(e=0,this.playedDuration=0),this.bufferNode.start(this.audioContext.currentTime,e),this.playStartTime=this.audioContext.currentTime,this.bufferNode.onended=()=>{this.currentTime>=this.duration&&(this.pause(),this.emit("ended"))}}_pause(){var e;this.paused=!0,(e=this.bufferNode)===null||e===void 0||e.stop(),this.playedDuration+=this.audioContext.currentTime-this.playStartTime}play(){return Ae(this,void 0,void 0,function*(){this.paused&&(this._play(),this.emit("play"))})}pause(){this.paused||(this._pause(),this.emit("pause"))}stopAt(e){const t=e-this.currentTime,n=this.bufferNode;n==null||n.stop(this.audioContext.currentTime+t),n==null||n.addEventListener("ended",()=>{n===this.bufferNode&&(this.bufferNode=null,this.pause())},{once:!0})}setSinkId(e){return Ae(this,void 0,void 0,function*(){return this.audioContext.setSinkId(e)})}get playbackRate(){return this._playbackRate}set playbackRate(e){this._playbackRate=e,this.bufferNode&&(this.bufferNode.playbackRate.value=e)}get currentTime(){return(this.paused?this.playedDuration:this.playedDuration+(this.audioContext.currentTime-this.playStartTime))*this._playbackRate}set currentTime(e){const t=!this.paused;t&&this._pause(),this.playedDuration=e/this._playbackRate,t&&this._play(),this.emit("seeking"),this.emit("timeupdate")}get duration(){var e,t;return(e=this._duration)!==null&&e!==void 0?e:((t=this.buffer)===null||t===void 0?void 0:t.duration)||0}set duration(e){this._duration=e}get volume(){return this.gainNode.gain.value}set volume(e){this.gainNode.gain.value=e,this.emit("volumechange")}get muted(){return this._muted}set muted(e){this._muted!==e&&(this._muted=e,this._muted?this.gainNode.disconnect():this.gainNode.connect(this.audioContext.destination))}canPlayType(e){return/^(audio|video)\//.test(e)}getGainNode(){return this.gainNode}getChannelData(){const e=[];if(!this.buffer)return e;const t=this.buffer.numberOfChannels;for(let n=0;n<t;n++)e.push(this.buffer.getChannelData(n));return e}removeAttribute(e){switch(e){case"src":this.src="";break;case"playbackRate":this.playbackRate=0;break;case"currentTime":this.currentTime=0;break;case"duration":this.duration=0;break;case"volume":this.volume=0;break;case"muted":this.muted=!1}}}const qo={waveColor:"#999",progressColor:"#555",cursorWidth:1,minPxPerSec:0,fillParent:!0,interact:!0,dragToSeek:!1,autoScroll:!0,autoCenter:!0,sampleRate:8e3};class Ot extends $o{static create(e){return new Ot(e)}getState(){return this.wavesurferState}getRenderer(){return this.renderer}constructor(e){const t=e.media||(e.backend==="WebAudio"?new Ln:void 0);super({media:t,mediaControls:e.mediaControls,autoplay:e.autoplay,playbackRate:e.audioRate}),this.plugins=[],this.decodedData=null,this.stopAtPosition=null,this.subscriptions=[],this.mediaSubscriptions=[],this.abortController=null,this.reactiveCleanups=[],this.options=Object.assign({},qo,e);const{state:n,actions:s}=function(a){var l,u,h,d,c,f;const g=(l=a==null?void 0:a.currentTime)!==null&&l!==void 0?l:ce(0),p=(u=a==null?void 0:a.duration)!==null&&u!==void 0?u:ce(0),m=(h=a==null?void 0:a.isPlaying)!==null&&h!==void 0?h:ce(!1),b=(d=a==null?void 0:a.isSeeking)!==null&&d!==void 0?d:ce(!1),v=(c=a==null?void 0:a.volume)!==null&&c!==void 0?c:ce(1),y=(f=a==null?void 0:a.playbackRate)!==null&&f!==void 0?f:ce(1),w=ce(null),x=ce(null),k=ce(""),C=ce(0),R=ce(0),S=st(()=>!m.value,[m]),_=st(()=>w.value!==null,[w]),te=st(()=>_.value&&p.value>0,[_,p]),U=st(()=>g.value,[g]),A=st(()=>p.value>0?g.value/p.value:0,[g,p]);return{state:{currentTime:g,duration:p,isPlaying:m,isPaused:S,isSeeking:b,volume:v,playbackRate:y,audioBuffer:w,peaks:x,url:k,zoom:C,scrollPosition:R,canPlay:_,isReady:te,progress:U,progressPercent:A},actions:{setCurrentTime:z=>{const V=Math.max(0,Math.min(p.value||1/0,z));g.set(V)},setDuration:z=>{p.set(Math.max(0,z))},setPlaying:z=>{m.set(z)},setSeeking:z=>{b.set(z)},setVolume:z=>{const V=Math.max(0,Math.min(1,z));v.set(V)},setPlaybackRate:z=>{const V=Math.max(.1,Math.min(16,z));y.set(V)},setAudioBuffer:z=>{w.set(z),z&&p.set(z.duration)},setPeaks:z=>{x.set(z)},setUrl:z=>{k.set(z)},setZoom:z=>{C.set(Math.max(0,z))},setScrollPosition:z=>{R.set(Math.max(0,z))}}}}({isPlaying:this.isPlayingSignal,currentTime:this.currentTimeSignal,duration:this.durationSignal,volume:this.volumeSignal,playbackRate:this.playbackRateSignal,isSeeking:this.seekingSignal});this.wavesurferState=n,this.wavesurferActions=s,this.timer=new Go;const o=t?void 0:this.getMediaElement();this.renderer=new Yo(this.options,o),this.initPlayerEvents(),this.initRendererEvents(),this.initTimerEvents(),this.initReactiveState(),this.initPlugins();const r=this.options.url||this.getSrc()||"";Promise.resolve().then(()=>{this.emit("init");const{peaks:a,duration:l}=this.options;(r||a&&l)&&this.load(r,a,l).catch(u=>{this.emit("error",u instanceof Error?u:new Error(String(u)))})})}updateProgress(e=this.getCurrentTime()){return this.renderer.renderProgress(e/this.getDuration(),this.isPlaying()),e}initTimerEvents(){this.subscriptions.push(this.timer.on("tick",()=>{if(!this.isSeeking()){const e=this.updateProgress();this.emit("timeupdate",e),this.emit("audioprocess",e),this.stopAtPosition!=null&&this.isPlaying()&&e>=this.stopAtPosition&&this.pause()}}))}initReactiveState(){this.reactiveCleanups.push(function(e,t){const n=[];n.push(Xe(()=>{const r=e.isPlaying.value;t.emit(r?"play":"pause")},[e.isPlaying])),n.push(Xe(()=>{const r=e.currentTime.value;t.emit("timeupdate",r),e.isPlaying.value&&t.emit("audioprocess",r)},[e.currentTime,e.isPlaying])),n.push(Xe(()=>{e.isSeeking.value&&t.emit("seeking",e.currentTime.value)},[e.isSeeking,e.currentTime]));let s=!1;n.push(Xe(()=>{e.isReady.value&&!s&&(s=!0,t.emit("ready",e.duration.value))},[e.isReady,e.duration]));let o=!1;return n.push(Xe(()=>{const r=e.isPlaying.value,a=e.currentTime.value,l=e.duration.value,u=l>0&&a>=l;o&&!r&&u&&t.emit("finish"),o=r&&u},[e.isPlaying,e.currentTime,e.duration])),n.push(Xe(()=>{const r=e.zoom.value;r>0&&t.emit("zoom",r)},[e.zoom])),()=>{n.forEach(r=>r())}}(this.wavesurferState,{emit:this.emit.bind(this)}))}initPlayerEvents(){this.isPlaying()&&(this.emit("play"),this.timer.start()),this.mediaSubscriptions.push(this.onMediaEvent("timeupdate",()=>{const e=this.updateProgress();this.emit("timeupdate",e)}),this.onMediaEvent("play",()=>{this.emit("play"),this.timer.start()}),this.onMediaEvent("pause",()=>{this.emit("pause"),this.timer.stop(),this.stopAtPosition=null}),this.onMediaEvent("emptied",()=>{this.timer.stop(),this.stopAtPosition=null}),this.onMediaEvent("ended",()=>{this.emit("timeupdate",this.getDuration()),this.emit("finish"),this.stopAtPosition=null}),this.onMediaEvent("seeking",()=>{this.emit("seeking",this.getCurrentTime())}),this.onMediaEvent("error",()=>{var e;this.emit("error",(e=this.getMediaElement().error)!==null&&e!==void 0?e:new Error("Media error")),this.stopAtPosition=null}))}initRendererEvents(){this.subscriptions.push(this.renderer.on("click",(e,t)=>{this.options.interact&&(this.seekTo(e),this.emit("interaction",e*this.getDuration()),this.emit("click",e,t))}),this.renderer.on("dblclick",(e,t)=>{this.emit("dblclick",e,t)}),this.renderer.on("scroll",(e,t,n,s)=>{const o=this.getDuration();this.emit("scroll",e*o,t*o,n,s)}),this.renderer.on("render",()=>{this.emit("redraw")}),this.renderer.on("rendered",()=>{this.emit("redrawcomplete")}),this.renderer.on("dragstart",e=>{this.emit("dragstart",e)}),this.renderer.on("dragend",e=>{this.emit("dragend",e)}),this.renderer.on("resize",()=>{this.emit("resize")}));{let e;const t=this.renderer.on("drag",n=>{var s;if(!this.options.interact)return;this.renderer.renderProgress(n),clearTimeout(e);let o=0;const r=this.options.dragToSeek;this.isPlaying()?o=0:r===!0?o=200:r&&typeof r=="object"&&(o=(s=r.debounceTime)!==null&&s!==void 0?s:200),e=setTimeout(()=>{this.seekTo(n)},o),this.emit("interaction",n*this.getDuration()),this.emit("drag",n)});this.subscriptions.push(()=>{clearTimeout(e),t()})}}initPlugins(){var e;!((e=this.options.plugins)===null||e===void 0)&&e.length&&this.options.plugins.forEach(t=>{this.registerPlugin(t)})}unsubscribePlayerEvents(){this.mediaSubscriptions.forEach(e=>e()),this.mediaSubscriptions=[]}setOptions(e){this.options=Object.assign({},this.options,e),e.duration&&!e.peaks&&(this.decodedData=Kt.createBuffer(this.exportPeaks(),e.duration)),e.peaks&&e.duration&&(this.decodedData=Kt.createBuffer(e.peaks,e.duration)),this.renderer.setOptions(this.options),e.audioRate&&this.setPlaybackRate(e.audioRate),e.mediaControls!=null&&(this.getMediaElement().controls=e.mediaControls)}registerPlugin(e){if(this.plugins.includes(e))return e;e._init(this),this.plugins.push(e);const t=e.once("destroy",()=>{this.plugins=this.plugins.filter(n=>n!==e),this.subscriptions=this.subscriptions.filter(n=>n!==t)});return this.subscriptions.push(t),e}unregisterPlugin(e){this.plugins=this.plugins.filter(t=>t!==e),e.destroy()}getWrapper(){return this.renderer.getWrapper()}getWidth(){return this.renderer.getWidth()}getScroll(){return this.renderer.getScroll()}setScroll(e){return this.renderer.setScroll(e)}setScrollTime(e){const t=e/this.getDuration();this.renderer.setScrollPercentage(t)}getActivePlugins(){return this.plugins}loadAudio(e,t,n,s){return Ae(this,void 0,void 0,function*(){var o;if(this.emit("load",e),!this.options.media&&this.isPlaying()&&this.pause(),this.decodedData=null,this.stopAtPosition=null,(o=this.abortController)===null||o===void 0||o.abort(),this.abortController=null,!t&&!n){const a=this.options.fetchParams||{};window.AbortController&&!a.signal&&(this.abortController=new AbortController,a.signal=this.abortController.signal);const l=h=>this.emit("loading",h);t=yield Qo.fetchBlob(e,l,a);const u=this.options.blobMimeType;u&&(t=new Blob([t],{type:u}))}this.setSrc(e,t);const r=yield new Promise(a=>{const l=s||this.getDuration();l?a(l):this.mediaSubscriptions.push(this.onMediaEvent("loadedmetadata",()=>a(this.getDuration()),{once:!0}))});if(!e&&!t){const a=this.getMediaElement();a instanceof Ln&&(a.duration=r)}if(n)this.decodedData=Kt.createBuffer(n,r||0);else if(t){const a=yield t.arrayBuffer();this.decodedData=yield Kt.decode(a,this.options.sampleRate)}this.decodedData&&(this.emit("decode",this.getDuration()),this.renderer.render(this.decodedData)),this.emit("ready",this.getDuration())})}load(e,t,n){return Ae(this,void 0,void 0,function*(){try{return yield this.loadAudio(e,void 0,t,n)}catch(s){throw this.emit("error",s),s}})}loadBlob(e,t,n){return Ae(this,void 0,void 0,function*(){try{return yield this.loadAudio("",e,t,n)}catch(s){throw this.emit("error",s),s}})}zoom(e){if(!this.decodedData)throw new Error("No audio loaded");this.renderer.zoom(e),this.emit("zoom",e)}getDecodedData(){return this.decodedData}exportPeaks({channels:e=2,maxLength:t=8e3,precision:n=1e4}={}){if(!this.decodedData)throw new Error("The audio has not been decoded yet");const s=Math.min(e,this.decodedData.numberOfChannels),o=[];for(let r=0;r<s;r++){const a=this.decodedData.getChannelData(r),l=[],u=a.length/t;for(let h=0;h<t;h++){const d=a.slice(Math.floor(h*u),Math.ceil((h+1)*u));let c=0;for(let f=0;f<d.length;f++){const g=d[f];Math.abs(g)>Math.abs(c)&&(c=g)}l.push(Math.round(c*n)/n)}o.push(l)}return o}getDuration(){let e=super.getDuration()||0;return e!==0&&e!==1/0||!this.decodedData||(e=this.decodedData.duration),e}toggleInteraction(e){this.options.interact=e}setTime(e){this.stopAtPosition=null,super.setTime(e),this.updateProgress(e),this.emit("timeupdate",e)}seekTo(e){const t=this.getDuration()*e;this.setTime(t)}play(e,t){const n=Object.create(null,{play:{get:()=>super.play}});return Ae(this,void 0,void 0,function*(){e!=null&&this.setTime(e);const s=yield n.play.call(this);return t!=null&&(this.media instanceof Ln?this.media.stopAt(t):this.stopAtPosition=t),s})}playPause(){return Ae(this,void 0,void 0,function*(){return this.isPlaying()?this.pause():this.play()})}stop(){this.pause(),this.setTime(0)}skip(e){this.setTime(this.getCurrentTime()+e)}empty(){this.load("",[[0]],.001)}setMediaElement(e){this.unsubscribePlayerEvents(),super.setMediaElement(e),this.initPlayerEvents()}exportImage(){return Ae(this,arguments,void 0,function*(e="image/png",t=1,n="dataURL"){return this.renderer.exportImage(e,t,n)})}destroy(){var e;this.emit("destroy"),(e=this.abortController)===null||e===void 0||e.abort(),this.plugins.forEach(t=>t.destroy()),this.subscriptions.forEach(t=>t()),this.unsubscribePlayerEvents(),this.reactiveCleanups.forEach(t=>t()),this.reactiveCleanups=[],this.timer.destroy(),this.renderer.destroy(),super.destroy()}}Ot.BasePlugin=class extends It{constructor(i){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=i}onInit(){}_init(i){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=i,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(i=>i()),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}},Ot.dom=Vo;let Ji=class{constructor(){this.listeners={}}on(i,e,t){if(this.listeners[i]||(this.listeners[i]=new Set),t==null?void 0:t.once){const n=(...s)=>{this.un(i,n),e(...s)};return this.listeners[i].add(n),()=>this.un(i,n)}return this.listeners[i].add(e),()=>this.un(i,e)}un(i,e){var t;(t=this.listeners[i])===null||t===void 0||t.delete(e)}once(i,e){return this.on(i,e,{once:!0})}unAll(){this.listeners={}}emit(i,...e){this.listeners[i]&&this.listeners[i].forEach(t=>t(...e))}},Xo=class extends Ji{constructor(i){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=i}onInit(){}_init(i){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=i,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(i=>i()),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}};function Yi(i,e){const t=e.xmlns?document.createElementNS(e.xmlns,i):document.createElement(i);for(const[n,s]of Object.entries(e))if(n==="children"&&s)for(const[o,r]of Object.entries(s))r instanceof Node?t.appendChild(r):typeof r=="string"?t.appendChild(document.createTextNode(r)):t.appendChild(Yi(o,r));else n==="style"?Object.assign(t.style,s):n==="textContent"?t.textContent=s:t.setAttribute(n,s.toString());return t}function Tt(i,e,t){const n=Yi(i,e||{});return t==null||t.appendChild(n),n}function Gi(i){let e=i;const t=new Set;return{get value(){return e},set(n){Object.is(e,n)||(e=n,t.forEach(s=>s(e)))},update(n){this.set(n(e))},subscribe:n=>(t.add(n),()=>t.delete(n))}}function Zt(i,e){let t;const n=()=>{t&&(t(),t=void 0),t=i()},s=e.map(o=>o.subscribe(n));return n(),()=>{t&&(t(),t=void 0),s.forEach(o=>o())}}function mt(i,e){const t=Gi(null),n=s=>{t.set(s)};return i.addEventListener(e,n),t._cleanup=()=>{i.removeEventListener(e,n)},t}function rt(i){const e=i._cleanup;typeof e=="function"&&e()}function en(i,e={}){const{threshold:t=3,mouseButton:n=0,touchDelay:s=100}=e,o=Gi(null),r=new Map,a=matchMedia("(pointer: coarse)").matches;let l=()=>{};const u=h=>{if(h.button!==n||(r.set(h.pointerId,h),r.size>1))return;let d=h.clientX,c=h.clientY,f=!1;const g=Date.now(),p=i.getBoundingClientRect(),{left:m,top:b}=p,v=C=>{if(C.defaultPrevented||r.size>1||a&&Date.now()-g<s)return;const R=C.clientX,S=C.clientY,_=R-d,te=S-c;(f||Math.abs(_)>t||Math.abs(te)>t)&&(C.preventDefault(),C.stopPropagation(),f||(o.set({type:"start",x:d-m,y:c-b}),f=!0),o.set({type:"move",x:R-m,y:S-b,deltaX:_,deltaY:te}),d=R,c=S)},y=C=>{if(r.delete(C.pointerId),f){const R=C.clientX,S=C.clientY;o.set({type:"end",x:R-m,y:S-b})}l()},w=C=>{r.delete(C.pointerId),C.relatedTarget&&C.relatedTarget!==document.documentElement||y(C)},x=C=>{f&&(C.stopPropagation(),C.preventDefault())},k=C=>{C.defaultPrevented||r.size>1||f&&C.preventDefault()};document.addEventListener("pointermove",v),document.addEventListener("pointerup",y),document.addEventListener("pointerout",w),document.addEventListener("pointercancel",w),document.addEventListener("touchmove",k,{passive:!1}),document.addEventListener("click",x,{capture:!0}),l=()=>{document.removeEventListener("pointermove",v),document.removeEventListener("pointerup",y),document.removeEventListener("pointerout",w),document.removeEventListener("pointercancel",w),document.removeEventListener("touchmove",k),setTimeout(()=>{document.removeEventListener("click",x,{capture:!0})},10)}};return i.addEventListener("pointerdown",u),{signal:o,cleanup:()=>{l(),i.removeEventListener("pointerdown",u),r.clear(),rt(o)}}}class qi extends Ji{constructor(e,t,n=0){var s,o,r,a,l,u,h,d,c,f;super(),this.totalDuration=t,this.numberOfChannels=n,this.element=null,this.minLength=0,this.maxLength=1/0,this.contentEditable=!1,this.subscriptions=[],this.updatingSide=void 0,this.isRemoved=!1,this.subscriptions=[],this.id=e.id||`region-${Math.random().toString(32).slice(2)}`,this.start=this.clampPosition(e.start),this.end=this.clampPosition((s=e.end)!==null&&s!==void 0?s:e.start),this.drag=(o=e.drag)===null||o===void 0||o,this.resize=(r=e.resize)===null||r===void 0||r,this.resizeStart=(a=e.resizeStart)===null||a===void 0||a,this.resizeEnd=(l=e.resizeEnd)===null||l===void 0||l,this.color=(u=e.color)!==null&&u!==void 0?u:"rgba(0, 0, 0, 0.1)",this.minLength=(h=e.minLength)!==null&&h!==void 0?h:this.minLength,this.maxLength=(d=e.maxLength)!==null&&d!==void 0?d:this.maxLength,this.channelIdx=(c=e.channelIdx)!==null&&c!==void 0?c:-1,this.contentEditable=(f=e.contentEditable)!==null&&f!==void 0?f:this.contentEditable,this.element=this.initElement(),this.setContent(e.content),this.setPart(),this.renderPosition(),this.initMouseEvents()}clampPosition(e){return Math.max(0,Math.min(this.totalDuration,e))}setPart(){var e;const t=this.start===this.end;(e=this.element)===null||e===void 0||e.setAttribute("part",`${t?"marker":"region"} ${this.id}`)}addResizeHandles(e){const t={position:"absolute",zIndex:"2",width:"6px",height:"100%",top:"0",cursor:"ew-resize",wordBreak:"keep-all"},n=Tt("div",{part:"region-handle region-handle-left",style:Object.assign(Object.assign({},t),{left:"0",borderLeft:"2px solid rgba(0, 0, 0, 0.5)",borderRadius:"2px 0 0 2px"})},e),s=Tt("div",{part:"region-handle region-handle-right",style:Object.assign(Object.assign({},t),{right:"0",borderRight:"2px solid rgba(0, 0, 0, 0.5)",borderRadius:"0 2px 2px 0"})},e),o=en(n,{threshold:1}),r=en(s,{threshold:1}),a=Zt(()=>{const u=o.signal.value;u&&(u.type==="move"&&u.deltaX!==void 0?this.onResize(u.deltaX,"start"):u.type==="end"&&this.onEndResizing("start"))},[o.signal]),l=Zt(()=>{const u=r.signal.value;u&&(u.type==="move"&&u.deltaX!==void 0?this.onResize(u.deltaX,"end"):u.type==="end"&&this.onEndResizing("end"))},[r.signal]);this.subscriptions.push(()=>{a(),l(),o.cleanup(),r.cleanup()})}removeResizeHandles(e){const t=e.querySelector('[part*="region-handle-left"]'),n=e.querySelector('[part*="region-handle-right"]');t&&e.removeChild(t),n&&e.removeChild(n)}initElement(){if(this.isRemoved)return null;const e=this.start===this.end;let t=0,n=100;this.channelIdx>=0&&this.numberOfChannels>0&&this.channelIdx<this.numberOfChannels&&(n=100/this.numberOfChannels,t=n*this.channelIdx);const s=Tt("div",{style:{position:"absolute",top:`${t}%`,height:`${n}%`,backgroundColor:e?"none":this.color,borderLeft:e?"2px solid "+this.color:"none",borderRadius:"2px",boxSizing:"border-box",transition:"background-color 0.2s ease",cursor:this.drag?"grab":"default",pointerEvents:"all"}});return!e&&this.resize&&this.addResizeHandles(s),s}renderPosition(){if(!this.element)return;const e=this.start/this.totalDuration,t=(this.totalDuration-this.end)/this.totalDuration;this.element.style.left=100*e+"%",this.element.style.right=100*t+"%"}toggleCursor(e){var t;this.drag&&(!((t=this.element)===null||t===void 0)&&t.style)&&(this.element.style.cursor=e?"grabbing":"grab")}initMouseEvents(){const{element:e}=this;if(!e)return;const t=mt(e,"click"),n=mt(e,"mouseenter"),s=mt(e,"mouseleave"),o=mt(e,"dblclick"),r=mt(e,"pointerdown"),a=mt(e,"pointerup"),l=t.subscribe(m=>m&&this.emit("click",m)),u=n.subscribe(m=>m&&this.emit("over",m)),h=s.subscribe(m=>m&&this.emit("leave",m)),d=o.subscribe(m=>m&&this.emit("dblclick",m)),c=r.subscribe(m=>m&&this.toggleCursor(!0)),f=a.subscribe(m=>m&&this.toggleCursor(!1));this.subscriptions.push(()=>{l(),u(),h(),d(),c(),f(),rt(t),rt(n),rt(s),rt(o),rt(r),rt(a)});const g=en(e),p=Zt(()=>{const m=g.signal.value;m&&(m.type==="start"?this.toggleCursor(!0):m.type==="move"&&m.deltaX!==void 0?this.onMove(m.deltaX):m.type==="end"&&(this.toggleCursor(!1),this.drag&&this.emit("update-end")))},[g.signal]);this.subscriptions.push(()=>{p(),g.cleanup()}),this.contentEditable&&this.content&&(this.contentClickListener=m=>this.onContentClick(m),this.contentBlurListener=()=>this.onContentBlur(),this.content.addEventListener("click",this.contentClickListener),this.content.addEventListener("blur",this.contentBlurListener))}_onUpdate(e,t,n){var s;if(!(!((s=this.element)===null||s===void 0)&&s.parentElement))return;const{width:o}=this.element.parentElement.getBoundingClientRect(),r=e/o*this.totalDuration;let a=t&&t!=="start"?this.start:this.start+r,l=t&&t!=="end"?this.end:this.end+r;const u=n!==void 0;u&&this.updatingSide&&this.updatingSide!==t&&(this.updatingSide==="start"?a=n:l=n),a=Math.max(0,a),l=Math.min(this.totalDuration,l);const h=l-a;this.updatingSide=t;const d=h>=this.minLength&&h<=this.maxLength;a<=l&&(d||u)&&(this.start=a,this.end=l,this.renderPosition(),this.emit("update",t))}onMove(e){this.drag&&this._onUpdate(e)}onResize(e,t){this.resize&&(this.resizeStart||t!=="start")&&(this.resizeEnd||t!=="end")&&this._onUpdate(e,t)}onEndResizing(e){this.resize&&(this.emit("update-end",e),this.updatingSide=void 0)}onContentClick(e){e.stopPropagation(),e.target.focus(),this.emit("click",e)}onContentBlur(){this.emit("update-end")}_setTotalDuration(e){this.totalDuration=e,this.renderPosition()}play(e){this.emit("play",e&&this.end!==this.start?this.end:void 0)}getContent(e=!1){var t;return e?this.content||void 0:this.element instanceof HTMLElement?((t=this.content)===null||t===void 0?void 0:t.innerHTML)||void 0:""}setContent(e){var t;if(this.element)if(this.content&&this.contentEditable&&(this.contentClickListener&&this.content.removeEventListener("click",this.contentClickListener),this.contentBlurListener&&this.content.removeEventListener("blur",this.contentBlurListener)),(t=this.content)===null||t===void 0||t.remove(),e){if(typeof e=="string"){const n=this.start===this.end;this.content=Tt("div",{style:{padding:`0.2em ${n?.2:.4}em`,display:"inline-block"},textContent:e})}else this.content=e;this.contentEditable&&(this.content.contentEditable="true",this.contentClickListener=n=>this.onContentClick(n),this.contentBlurListener=()=>this.onContentBlur(),this.content.addEventListener("click",this.contentClickListener),this.content.addEventListener("blur",this.contentBlurListener)),this.content.setAttribute("part","region-content"),this.element.appendChild(this.content),this.emit("content-changed")}else this.content=void 0}setOptions(e){var t,n;if(this.element){if(e.color&&(this.color=e.color,this.element.style.backgroundColor=this.color),e.drag!==void 0&&(this.drag=e.drag,this.element.style.cursor=this.drag?"grab":"default"),e.start!==void 0||e.end!==void 0){const s=this.start===this.end;this.start=this.clampPosition((t=e.start)!==null&&t!==void 0?t:this.start),this.end=this.clampPosition((n=e.end)!==null&&n!==void 0?n:s?this.start:this.end),this.renderPosition(),this.setPart()}if(e.content&&this.setContent(e.content),e.id&&(this.id=e.id,this.setPart()),e.resize!==void 0&&e.resize!==this.resize){const s=this.start===this.end;this.resize=e.resize,this.resize&&!s?this.addResizeHandles(this.element):this.removeResizeHandles(this.element)}e.resizeStart!==void 0&&(this.resizeStart=e.resizeStart),e.resizeEnd!==void 0&&(this.resizeEnd=e.resizeEnd)}}remove(){this.isRemoved=!0,this.emit("remove"),this.subscriptions.forEach(e=>e()),this.subscriptions=[],this.content&&this.contentEditable&&(this.contentClickListener&&(this.content.removeEventListener("click",this.contentClickListener),this.contentClickListener=void 0),this.contentBlurListener&&(this.content.removeEventListener("blur",this.contentBlurListener),this.contentBlurListener=void 0)),this.element&&(this.element.remove(),this.element=null),this.unAll()}}class Fn extends Xo{constructor(e){super(e),this.regions=[],this.regionsContainer=this.initRegionsContainer()}static create(e){return new Fn(e)}onInit(){if(!this.wavesurfer)throw Error("WaveSurfer is not initialized");this.wavesurfer.getWrapper().appendChild(this.regionsContainer),this.subscriptions.push(this.wavesurfer.on("ready",t=>{this.regions.forEach(n=>n._setTotalDuration(t))}));let e=[];this.subscriptions.push(this.wavesurfer.on("timeupdate",t=>{const n=this.regions.filter(s=>s.start<=t&&(s.end===s.start?s.start+.05:s.end)>=t);n.forEach(s=>{e.includes(s)||this.emit("region-in",s)}),e.forEach(s=>{n.includes(s)||this.emit("region-out",s)}),e=n}))}initRegionsContainer(){return Tt("div",{part:"regions-container",style:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",zIndex:"5",pointerEvents:"none"}})}getRegions(){return this.regions}avoidOverlapping(e){e.content&&setTimeout(()=>{const t=e.content,n=t.getBoundingClientRect(),s=this.regions.map(o=>{if(o===e||!o.content)return 0;const r=o.content.getBoundingClientRect();return n.left<r.left+r.width&&r.left<n.left+n.width?r.height:0}).reduce((o,r)=>o+r,0);t.style.marginTop=`${s}px`},10)}adjustScroll(e){var t,n;if(!e.element)return;const s=(n=(t=this.wavesurfer)===null||t===void 0?void 0:t.getWrapper())===null||n===void 0?void 0:n.parentElement;if(!s)return;const{clientWidth:o,scrollWidth:r}=s;if(r<=o)return;const a=s.getBoundingClientRect(),l=e.element.getBoundingClientRect(),u=l.left-a.left,h=l.right-a.left;u<0?s.scrollLeft+=u:h>o&&(s.scrollLeft+=h-o)}virtualAppend(e,t,n){const s=()=>{if(!this.wavesurfer)return;const o=this.wavesurfer.getWidth(),r=this.wavesurfer.getScroll(),a=t.clientWidth,l=this.wavesurfer.getDuration(),u=Math.round(e.start/l*a),h=u+(Math.round((e.end-e.start)/l*a)||1)>r&&u<r+o;h&&!n.parentElement?t.appendChild(n):!h&&n.parentElement&&n.remove()};setTimeout(()=>{if(!this.wavesurfer||!e.element)return;s();const o=this.wavesurfer.on("scroll",s),r=this.wavesurfer.on("zoom",s),a=this.wavesurfer.on("resize",s);this.subscriptions.push(o,r,a),e.once("remove",()=>{o(),r(),a()})},0)}saveRegion(e){if(!e.element)return;this.virtualAppend(e,this.regionsContainer,e.element),this.avoidOverlapping(e),this.regions.push(e);const t=[e.on("update",n=>{n||this.adjustScroll(e),this.emit("region-update",e,n)}),e.on("update-end",n=>{this.avoidOverlapping(e),this.emit("region-updated",e,n)}),e.on("play",n=>{var s;(s=this.wavesurfer)===null||s===void 0||s.play(e.start,n)}),e.on("click",n=>{this.emit("region-clicked",e,n)}),e.on("dblclick",n=>{this.emit("region-double-clicked",e,n)}),e.on("content-changed",()=>{this.emit("region-content-changed",e)}),e.once("remove",()=>{t.forEach(n=>n()),this.regions=this.regions.filter(n=>n!==e),this.emit("region-removed",e)})];this.subscriptions.push(...t),this.emit("region-created",e)}addRegion(e){var t,n;if(!this.wavesurfer)throw Error("WaveSurfer is not initialized");const s=this.wavesurfer.getDuration(),o=(n=(t=this.wavesurfer)===null||t===void 0?void 0:t.getDecodedData())===null||n===void 0?void 0:n.numberOfChannels,r=new qi(e,s,o);return this.emit("region-initialized",r),s?this.saveRegion(r):this.subscriptions.push(this.wavesurfer.once("ready",a=>{r._setTotalDuration(a),this.saveRegion(r)})),r}enableDragSelection(e,t=3){var n;const s=(n=this.wavesurfer)===null||n===void 0?void 0:n.getWrapper();if(!(s&&s instanceof HTMLElement))return()=>{};let o=null,r=0,a=0;const l=en(s,{threshold:t}),u=Zt(()=>{var h,d;const c=l.signal.value;if(c)if(c.type==="start"){if(r=c.x,!this.wavesurfer)return;const f=this.wavesurfer.getDuration(),g=(d=(h=this.wavesurfer)===null||h===void 0?void 0:h.getDecodedData())===null||d===void 0?void 0:d.numberOfChannels,{width:p}=this.wavesurfer.getWrapper().getBoundingClientRect();a=r/p*f;const m=c.x/p*f,b=(c.x+5)/p*f;o=new qi(Object.assign(Object.assign({},e),{start:m,end:b}),f,g),this.emit("region-initialized",o),o.element&&this.regionsContainer.appendChild(o.element)}else c.type==="move"&&c.deltaX!==void 0?o&&o._onUpdate(c.deltaX,c.x>r?"end":"start",a):c.type==="end"&&o&&(this.saveRegion(o),o.updatingSide=void 0,o=null)},[l.signal]);return()=>{u(),l.cleanup()}}clearRegions(){this.regions.slice().forEach(e=>e.remove()),this.regions=[]}destroy(){this.clearRegions(),super.destroy(),this.regionsContainer.remove()}}class Ko{constructor(){this.listeners={}}on(e,t,n){if(this.listeners[e]||(this.listeners[e]=new Set),n==null?void 0:n.once){const s=(...o)=>{this.un(e,s),t(...o)};return this.listeners[e].add(s),()=>this.un(e,s)}return this.listeners[e].add(t),()=>this.un(e,t)}un(e,t){var n;(n=this.listeners[e])===null||n===void 0||n.delete(t)}once(e,t){return this.on(e,t,{once:!0})}unAll(){this.listeners={}}emit(e,...t){this.listeners[e]&&this.listeners[e].forEach(n=>n(...t))}}class Zo extends Ko{constructor(e){super(),this.subscriptions=[],this.isDestroyed=!1,this.options=e}onInit(){}_init(e){this.isDestroyed&&(this.subscriptions=[],this.isDestroyed=!1),this.wavesurfer=e,this.onInit()}destroy(){this.emit("destroy"),this.subscriptions.forEach(e=>e()),this.subscriptions=[],this.isDestroyed=!0,this.wavesurfer=void 0}}function Xi(i,e){const t=e.xmlns?document.createElementNS(e.xmlns,i):document.createElement(i);for(const[n,s]of Object.entries(e))if(n==="children"&&s)for(const[o,r]of Object.entries(s))r instanceof Node?t.appendChild(r):typeof r=="string"?t.appendChild(document.createTextNode(r)):t.appendChild(Xi(o,r));else n==="style"?Object.assign(t.style,s):n==="textContent"?t.textContent=s:t.setAttribute(n,s.toString());return t}function zn(i,e,t){return Xi(i,e||{})}const ea={height:20,timeOffset:0,formatTimeCallback:i=>i/60>1?`${Math.floor(i/60)}:${(i=Math.round(i%60))<10?"0":""}${i}`:""+Math.round(1e3*i)/1e3};class _n extends Zo{constructor(e){super(e||{}),this.notchElements=new Map,this.currentTimeline=null,this.options=Object.assign({},ea,e),this.timelineWrapper=this.initTimelineWrapper()}static create(e){return new _n(e)}onInit(){var e;if(!this.wavesurfer)throw Error("WaveSurfer is not initialized");let t=this.wavesurfer.getWrapper();if(this.options.container instanceof HTMLElement)t=this.options.container;else if(typeof this.options.container=="string"){const s=document.querySelector(this.options.container);if(!s)throw Error(`No Timeline container found matching ${this.options.container}`);t=s}this.options.insertPosition?(t.firstElementChild||t).insertAdjacentElement(this.options.insertPosition,this.timelineWrapper):t.appendChild(this.timelineWrapper);const n=this.wavesurfer.getState();this.subscriptions.push(function(s,o){let r;const a=()=>{r&&(r(),r=void 0),r=s()},l=o.map(u=>u.subscribe(a));return a(),()=>{r&&(r(),r=void 0),l.forEach(u=>u())}}(()=>{(n.duration.value>0||this.options.duration)&&this.initTimeline()},[n.duration])),this.subscriptions.push(this.wavesurfer.on("redraw",()=>this.initTimeline())),this.subscriptions.push(this.wavesurfer.on("scroll",(s,o,r,a)=>{this.currentTimeline&&this.updateVisibleNotches(r,a,this.currentTimeline)})),(!((e=this.wavesurfer)===null||e===void 0)&&e.getDuration()||this.options.duration)&&this.initTimeline()}destroy(){this.timelineWrapper.remove(),super.destroy()}initTimelineWrapper(){return zn("div",{part:"timeline-wrapper",style:{pointerEvents:"none"}})}defaultTimeInterval(e){return e>=25?1:5*e>=25?5:15*e>=25?15:60*Math.ceil(.5/e)}defaultPrimaryLabelInterval(e){return e>=25?10:5*e>=25?6:4}defaultSecondaryLabelInterval(e){return e>=25?5:2}virtualAppend(e,t,n){if(this.notchElements.set(n,{start:e,width:n.clientWidth,wasVisible:!1}),!this.wavesurfer)return;const s=this.wavesurfer.getScroll(),o=s+this.wavesurfer.getWidth(),r=this.notchElements.get(n),a=e>=s&&e+r.width<o;r.wasVisible=a,a&&t.appendChild(n)}updateVisibleNotches(e,t,n){this.notchElements.forEach((s,o)=>{const r=s.start>=e&&s.start+s.width<t;r!==s.wasVisible&&(s.wasVisible=r,r?n.appendChild(o):o.remove())})}initTimeline(){var e,t,n,s,o,r,a,l;this.notchElements.clear();const u=(n=(t=(e=this.wavesurfer)===null||e===void 0?void 0:e.getDuration())!==null&&t!==void 0?t:this.options.duration)!==null&&n!==void 0?n:0,h=(((s=this.wavesurfer)===null||s===void 0?void 0:s.getWrapper().scrollWidth)||this.timelineWrapper.scrollWidth)/u,d=(o=this.options.timeInterval)!==null&&o!==void 0?o:this.defaultTimeInterval(h),c=(r=this.options.primaryLabelInterval)!==null&&r!==void 0?r:this.defaultPrimaryLabelInterval(h),f=this.options.primaryLabelSpacing,g=(a=this.options.secondaryLabelInterval)!==null&&a!==void 0?a:this.defaultSecondaryLabelInterval(h),p=this.options.secondaryLabelSpacing,m=this.options.insertPosition==="beforebegin",b=zn("div",{style:Object.assign({height:`${this.options.height}px`,overflow:"hidden",fontSize:this.options.height/2+"px",whiteSpace:"nowrap"},m?{position:"absolute",top:"0",left:"0",right:"0",zIndex:"2"}:{position:"relative"})});b.setAttribute("part","timeline"),typeof this.options.style=="string"?b.setAttribute("style",b.getAttribute("style")+this.options.style):typeof this.options.style=="object"&&Object.assign(b.style,this.options.style);const v=zn("div",{style:{width:"0",height:"50%",display:"flex",flexDirection:"column",justifyContent:m?"flex-start":"flex-end",top:m?"0":"auto",bottom:m?"auto":"0",overflow:"visible",borderLeft:"1px solid currentColor",opacity:`${(l=this.options.secondaryLabelOpacity)!==null&&l!==void 0?l:.25}`,position:"absolute",zIndex:"1"}});for(let y=0,w=0;y<u;y+=d,w++){const x=v.cloneNode(),k=Math.round(100*y)%Math.round(100*c)==0||f&&w%f==0,C=Math.round(100*y)%Math.round(100*g)==0||p&&w%p==0;(k||C)&&(x.style.height="100%",x.style.textIndent="3px",x.textContent=this.options.formatTimeCallback(y),k&&(x.style.opacity="1"));const R=k?"primary":C?"secondary":"tick";x.setAttribute("part",`timeline-notch timeline-notch-${R}`);const S=Math.round(100*(y+this.options.timeOffset))/100*h;x.style.left=`${S}px`,this.virtualAppend(S,b,x)}this.timelineWrapper.innerHTML="",this.timelineWrapper.appendChild(b),this.currentTimeline=b,this.emit("ready")}}const ta={class:"flex justify-between my-[10px] mt-[40px] border-t-[1px] p-[20px] pb-[0px] border-b-[20px] border-b-[#f1f1f1]"},na={class:"flex justify-between items-center my-[20px]"},ia=E("svg",{t:"1748573730818",class:"icon rotate-180",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5204",width:"15",height:"15"},[E("path",{d:"M328.832 268.501333a42.666667 42.666667 0 0 0-60.330667 60.330667l181.034667 181.034667-181.034667 180.992a42.666667 42.666667 0 1 0 60.330667 60.373333l211.029333-211.072 0.170667-0.128a42.538667 42.538667 0 0 0 0-60.330667l-0.128-0.128-211.072-211.072z",fill:"#2E5CF6","p-id":"5205"}),E("path",{d:"M725.333333 256a42.666667 42.666667 0 0 1 42.666667 42.666667v426.666666a42.666667 42.666667 0 1 1-85.333333 0V298.666667a42.666667 42.666667 0 0 1 42.666666-42.666667z",fill:"#2E5CF6","p-id":"5206"})],-1),sa=E("svg",{t:"1748573730818",class:"icon rotate-180",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5204",width:"15",height:"15"},[E("path",{d:"M328.832 268.501333a42.666667 42.666667 0 0 0-60.330667 60.330667l181.034667 181.034667-181.034667 180.992a42.666667 42.666667 0 1 0 60.330667 60.373333l211.029333-211.072 0.170667-0.128a42.538667 42.538667 0 0 0 0-60.330667l-0.128-0.128-211.072-211.072z",fill:"#2E5CF6","p-id":"5205"}),E("path",{d:"M725.333333 256a42.666667 42.666667 0 0 1 42.666667 42.666667v426.666666a42.666667 42.666667 0 1 1-85.333333 0V298.666667a42.666667 42.666667 0 0 1 42.666666-42.666667z",fill:"#2E5CF6","p-id":"5206"})],-1),ra=E("svg",{t:"1748573730818",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5204",width:"15",height:"15"},[E("path",{d:"M328.832 268.501333a42.666667 42.666667 0 0 0-60.330667 60.330667l181.034667 181.034667-181.034667 180.992a42.666667 42.666667 0 1 0 60.330667 60.373333l211.029333-211.072 0.170667-0.128a42.538667 42.538667 0 0 0 0-60.330667l-0.128-0.128-211.072-211.072z",fill:"#2E5CF6","p-id":"5205"}),E("path",{d:"M725.333333 256a42.666667 42.666667 0 0 1 42.666667 42.666667v426.666666a42.666667 42.666667 0 1 1-85.333333 0V298.666667a42.666667 42.666667 0 0 1 42.666666-42.666667z",fill:"#2E5CF6","p-id":"5206"})],-1),oa=E("svg",{t:"1748573730818",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5204",width:"15",height:"15"},[E("path",{d:"M328.832 268.501333a42.666667 42.666667 0 0 0-60.330667 60.330667l181.034667 181.034667-181.034667 180.992a42.666667 42.666667 0 1 0 60.330667 60.373333l211.029333-211.072 0.170667-0.128a42.538667 42.538667 0 0 0 0-60.330667l-0.128-0.128-211.072-211.072z",fill:"#2E5CF6","p-id":"5205"}),E("path",{d:"M725.333333 256a42.666667 42.666667 0 0 1 42.666667 42.666667v426.666666a42.666667 42.666667 0 1 1-85.333333 0V298.666667a42.666667 42.666667 0 0 1 42.666666-42.666667z",fill:"#2E5CF6","p-id":"5206"})],-1),aa=E("svg",{t:"1748573730818",class:"icon rotate-180",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5204",width:"15",height:"15"},[E("path",{d:"M328.832 268.501333a42.666667 42.666667 0 0 0-60.330667 60.330667l181.034667 181.034667-181.034667 180.992a42.666667 42.666667 0 1 0 60.330667 60.373333l211.029333-211.072 0.170667-0.128a42.538667 42.538667 0 0 0 0-60.330667l-0.128-0.128-211.072-211.072z",fill:"#2E5CF6","p-id":"5205"}),E("path",{d:"M725.333333 256a42.666667 42.666667 0 0 1 42.666667 42.666667v426.666666a42.666667 42.666667 0 1 1-85.333333 0V298.666667a42.666667 42.666667 0 0 1 42.666666-42.666667z",fill:"#2E5CF6","p-id":"5206"})],-1),la=E("svg",{t:"1748573730818",class:"icon rotate-180",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5204",width:"15",height:"15"},[E("path",{d:"M328.832 268.501333a42.666667 42.666667 0 0 0-60.330667 60.330667l181.034667 181.034667-181.034667 180.992a42.666667 42.666667 0 1 0 60.330667 60.373333l211.029333-211.072 0.170667-0.128a42.538667 42.538667 0 0 0 0-60.330667l-0.128-0.128-211.072-211.072z",fill:"#2E5CF6","p-id":"5205"}),E("path",{d:"M725.333333 256a42.666667 42.666667 0 0 1 42.666667 42.666667v426.666666a42.666667 42.666667 0 1 1-85.333333 0V298.666667a42.666667 42.666667 0 0 1 42.666666-42.666667z",fill:"#2E5CF6","p-id":"5206"})],-1),ua=E("svg",{t:"1748573730818",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5204",width:"15",height:"15"},[E("path",{d:"M328.832 268.501333a42.666667 42.666667 0 0 0-60.330667 60.330667l181.034667 181.034667-181.034667 180.992a42.666667 42.666667 0 1 0 60.330667 60.373333l211.029333-211.072 0.170667-0.128a42.538667 42.538667 0 0 0 0-60.330667l-0.128-0.128-211.072-211.072z",fill:"#2E5CF6","p-id":"5205"}),E("path",{d:"M725.333333 256a42.666667 42.666667 0 0 1 42.666667 42.666667v426.666666a42.666667 42.666667 0 1 1-85.333333 0V298.666667a42.666667 42.666667 0 0 1 42.666666-42.666667z",fill:"#2E5CF6","p-id":"5206"})],-1),ha=E("svg",{t:"1748573730818",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5204",width:"15",height:"15"},[E("path",{d:"M328.832 268.501333a42.666667 42.666667 0 0 0-60.330667 60.330667l181.034667 181.034667-181.034667 180.992a42.666667 42.666667 0 1 0 60.330667 60.373333l211.029333-211.072 0.170667-0.128a42.538667 42.538667 0 0 0 0-60.330667l-0.128-0.128-211.072-211.072z",fill:"#2E5CF6","p-id":"5205"}),E("path",{d:"M725.333333 256a42.666667 42.666667 0 0 1 42.666667 42.666667v426.666666a42.666667 42.666667 0 1 1-85.333333 0V298.666667a42.666667 42.666667 0 0 1 42.666666-42.666667z",fill:"#2E5CF6","p-id":"5206"})],-1),ca={key:0,class:"flex items-center"},da={class:"mx-[20px]"},pa={class:"flex justify-between my-[20px] mx-[20px]"},fa={class:"flex items-center"},ga={class:"flex items-center mr-[30px]"},ma=E("span",{class:"mr-[10px] leading-[100%]"},"\u65F6\u95F4\u8F74\u7F29\u653E",-1),va=E("div",{id:"waveform"},null,-1),ya=Wt({__name:"index",props:{list:{type:Array,default:()=>[]},index:Number,canEdit:Boolean,currentTime:Number},emits:["update","output","updateThrow","changeIndex","seek","optimize"],setup(i,{expose:e,emit:t}){const n=Fn.create(),s=_n.create({cursor:!1,formatTimeCallback:v=>Ge(v)}),o=i,r=N(null),a=N(1),l=N(1),u=N(0),h=N("");N(!1);const d=t,c=He(()=>o.list.filter(v=>!v.is_delete)),f=He(()=>c.value.indexOf(o.list[o.index]));Dt(()=>{const v=Ot.create({container:"#waveform",waveColor:"rgba(155,196,247,1)",progressColor:"rgba(56, 137, 240, 1)",plugins:[n,s],responsive:!0,autoCenter:!1,barWidth:1,height:50,cursorColor:"#f56c6c",cursorWidth:0,maxCanvasWidth:4e3,minPxPerSec:l.value,pixelRatio:a.value,scrollParent:!0,loop:!1,interact:!1});v.on("ready",()=>{const y=v.getDuration();u.value=y}),v.setOptions({hideCursor:!1}),r.value=v,n.on("region-updated",y=>{console.log("region-updated",y),d("update",y.start,y.end,!1,!1,y.channelIdx)}),n.on("region-clicked",(y,w)=>{w.stopPropagation()}),n.on("region-update",y=>{const w=y.channelIdx;if(o.list[w].is_delete){const x=o.list.find(S=>S.topicId===o.list[w].topicId&&!S.is_delete);let k=!1,C=y.start,R=y.end;y.start<x.start&&(C=x.start,k=!0),y.end>x.end&&(R=x.end,k=!0),k&&(y.start=C,y.end=R)}}),v.on("interaction",y=>{d("seek",y),v.setTime(y)})});const g=()=>{r.value.zoom(l.value),r.value.getActivePlugins().map(v=>{if(v.regions){const y=v.regions[0];y&&y.element.scrollIntoView({behavior:"smooth"})}})},p=v=>{r.value.getActivePlugins().map(y=>{if(y.regions){const w=y.regions.find(x=>x.id==="region1");if(!w)return;w.start=Math.min(w.end-5,Math.max(0,w.start+v)),w.setOptions({start:w.start,end:w.end,resize:!0}),d("update",w.start,w.end,!1,!0)}})},m=v=>{r.value.getActivePlugins().map(y=>{if(y.regions){const w=y.regions.find(x=>x.id==="region1");if(!w)return;w.end=Math.max(w.start+5,Math.max(0,w.end+v)),w.setOptions({start:w.start,end:w.end,resize:!0}),d("update",w.start,w.end,!1,!0)}})},b=v=>{v<=0?v=0:v>c.value.length-1&&(v=c.value.length-1),d("changeIndex",o.list.indexOf(c.value[v]))};return Ft(()=>o.currentTime,v=>{r.value&&r.value.seekTo(v/r.value.getDuration())}),e({loadAudio:v=>{h.value=v,n.clearRegions(),r.value.empty(),r.value.setOptions({interact:!1,cursorWidth:0}),h.value!==""&&(r.value.once("ready",()=>{r.value.setOptions({interact:!0,cursorWidth:2})}),r.value.load(v))},addRegion:(v,y,w)=>{n.clearRegions();const x=o.list.indexOf(w);n.addRegion({id:"region1",start:v,end:y,color:"rgba(141,95,254,0.2)",drag:!1,resize:!0,channelIdx:x}),r.value.seekTo(v/r.value.getDuration())},jumpIndex:b,addDeleteRegion:(v,y,w)=>{const x=o.list.indexOf(w);n.addRegion({id:"region1",start:v,end:y,color:"rgba(0,0,0,0.2)",drag:!1,resize:!0,minLength:1,channelIdx:x})}}),(v,y)=>{const w=le("el-button"),x=le("el-radio"),k=le("el-radio-group");return L(),q(Je,null,[E("div",ta,[E("div",na,[W(w,{onClick:y[0]||(y[0]=C=>p(-60)),type:"primary",size:"small",plain:""},{default:D(()=>[ia,X(" +1min")]),_:1}),W(w,{onClick:y[1]||(y[1]=C=>p(-5)),type:"primary",size:"small",plain:""},{default:D(()=>[sa,X(" +5s")]),_:1}),W(w,{onClick:y[2]||(y[2]=C=>p(5)),type:"primary",size:"small",plain:""},{default:D(()=>[ra,X(" -5s")]),_:1}),W(w,{onClick:y[3]||(y[3]=C=>p(60)),type:"primary",size:"small",plain:""},{default:D(()=>[oa,X(" -1min ")]),_:1}),W(w,{onClick:y[4]||(y[4]=C=>m(-60)),type:"primary",size:"small",plain:""},{default:D(()=>[aa,X(" -1min")]),_:1}),W(w,{onClick:y[5]||(y[5]=C=>m(-5)),type:"primary",size:"small",plain:""},{default:D(()=>[la,X(" -5s")]),_:1}),W(w,{onClick:y[6]||(y[6]=C=>m(5)),type:"primary",size:"small",plain:""},{default:D(()=>[ua,X(" +5s")]),_:1}),W(w,{onClick:y[7]||(y[7]=C=>m(60)),type:"primary",size:"small",plain:""},{default:D(()=>[ha,X(" +1min ")]),_:1})]),i.index>=0?(L(),q("div",ca,[W(w,{type:"primary",size:"small",onClick:y[8]||(y[8]=C=>b(M(c).indexOf(i.list[i.index])-1))},{default:D(()=>[X("\u4E0A\u4E00\u6BB5")]),_:1}),E("span",da,me(M(f)+1)+"/"+me(M(c).length),1),W(w,{type:"primary",size:"small",onClick:y[9]||(y[9]=C=>b(M(c).indexOf(i.list[i.index])+1))},{default:D(()=>[X("\u4E0B\u4E00\u6BB5")]),_:1})])):ye("",!0)]),E("div",pa,[E("div",null,[E("p",null,"\u4FE1\u606F\uFF1A"+me(i.index>=0?i.list[i.index].label:"\u65E0"),1),E("p",null,"\u65F6\u957F\uFF1A"+me(i.index>=0?M(Rs)(i.list[i.index].end-i.list[i.index].start):0),1)]),E("div",fa,[E("div",ga,[ma,W(k,{modelValue:M(l),"onUpdate:modelValue":y[10]||(y[10]=C=>Ye(l)?l.value=C:null),onChange:g},{default:D(()=>[(L(),ve(x,{value:.8,key:.8,label:.8},{default:D(()=>[X("80%")]),_:1})),(L(),ve(x,{value:1,key:1,label:1},{default:D(()=>[X("100%")]),_:1})),(L(),ve(x,{value:25,key:25,label:25},{default:D(()=>[X("150%")]),_:1})),(L(),ve(x,{value:50,key:50,label:50},{default:D(()=>[X("200%")]),_:1}))]),_:1},8,["modelValue"])]),W(w,{type:"primary",onClick:y[11]||(y[11]=C=>d("output")),disabled:h.value===""||o.list.filter(C=>!C.is_delete).length===0||!!o.list.every(C=>C.throw),loading:!i.canEdit},{default:D(()=>[X("\u8F93\u51FA\u5168\u90E8")]),_:1},8,["disabled","loading"]),W(w,{type:"primary",onClick:y[12]||(y[12]=C=>d("output",!0)),disabled:i.index<0,loading:!i.canEdit,plain:""},{default:D(()=>[X("\u8F93\u51FA\u7247\u6BB5")]),_:1},8,["disabled","loading"])])]),va],64)}}}),ke=i=>(dn("data-v-e34b6f36"),i=i(),pn(),i),ba={class:"p-[20px]"},wa={class:"flex mt-[20px] justify-between h-[1113px]"},xa={class:"w-[70%] py-[20px] bg-white"},Ea={class:"flex justify-between h-[380px]"},Ca={class:"file_list w-[50%] border-[1px] h-[100%]"},Aa={class:"up_line h-[60px] bg-[#e5e7eb] flex items-center justify-between px-[20px]"},ka={class:"flex items-center"},Sa=["href"],Pa={class:"p-[20px] container"},Ia=["title"],Ta={class:"flex items-center hover:text-[#0EA1FF]"},Na={key:0,src:Hn,class:"mr-[7px]",width:"20"},Oa={key:1,src:Jn,class:"mr-[7px]",width:"20"},Ma={class:"max-w-[650px] truncate text-[16px]"},Ra={key:1,class:"flex"},ja=ke(()=>E("svg",{t:"1748229095475",class:"icon cursor-pointer",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg",fill:"#3889f0","p-id":"5212",width:"20",height:"20"},[E("path",{fill:"#3889f0",d:"M573.62 811.86H414.69c-17.67 0-32-14.33-32-32s14.33-32 32-32h158.93c51.07 0 99.25-20.05 135.67-56.47 36.41-36.41 56.47-84.59 56.47-135.67s-20.05-99.25-56.47-135.67c-36.41-36.41-84.59-56.47-135.67-56.47H321.69c-17.67 0-32-14.33-32-32s14.33-32 32-32h251.93c68.17 0 132.42 26.71 180.92 75.21s75.21 112.75 75.21 180.92c0 68.17-26.71 132.42-75.21 180.92-48.5 48.52-112.75 75.23-180.92 75.23z","p-id":"5213"}),E("path",{d:"M232.32 349.82c-9.84-14.68-5.91-34.56 8.78-44.4l137.84-92.34c14.68-9.84 34.56-5.91 44.4 8.78 9.84 14.68 5.91 34.56-8.78 44.4L276.72 358.6c-14.68 9.84-34.56 5.91-44.4-8.78z","p-id":"5214"}),E("path",{d:"M378.94 450.78L241.1 358.44c-14.68-9.84-18.61-29.71-8.78-44.4 9.84-14.68 29.71-18.61 44.4-8.78l137.84 92.34c14.68 9.84 18.61 29.71 8.78 44.4-9.84 14.69-29.71 18.62-44.4 8.78z","p-id":"5215"})],-1)),Ba={key:2,class:"flex flex-wrap overflow-y-auto"},La=["onClick"],za={key:0,src:Hn,width:"50"},Da={key:1,src:Jn,width:"50"},Fa={key:2,src:"/assets/unknow.5fde1ed6.png",width:"50"},_a=["title"],Wa={class:"w-[50%] relative overflow-hidden"},Ua={id:"my-video",ref:"my_video",class:"video-js",controls:"",preload:"auto"},Va={class:"flex items-center justify-center w-full h-full absolute bg-[#eee] top-0 left-0"},Qa=[ke(()=>E("svg",{t:"1749629246309",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4378",width:"64",height:"64"},[E("path",{d:"M873.97913671 746.01385596L327.47547914 200.92417938H667.5379103c44.54040159 0 65.75011664 23.33068654 65.75011663 65.75011663V349.39218468c48.78234459-19.08874354 93.32274619-38.17748707 138.57013829-57.26623061 14.84680053-6.36291451 29.69360106-12.01883853 44.54040157-16.96777204 31.10758207-12.72582902 65.75011664 2.1209715 78.47594567 33.22855356 2.82796201 7.06990501 4.24194301 14.84680053 4.241943 21.91670555v370.46302273c2.1209715 33.93554407-24.03767705 62.92215463-57.9732211 65.04312614-9.89786702 0.7069905-19.79573404-1.41398101-28.98661056-5.65592402l-36.05651557-14.13981003h-2.12097152z m-152.0029578 70.69905014c-14.13981003 16.26078154-34.64253457 24.74466755-55.8522496 22.62369604H84.27074665c-30.40059155 0.7069905-55.8522496-21.20971504-59.38720211-50.90331609-0.7069905-8.48388603-0.7069905-16.96777203 0-25.45165805V277.27915353c-0.7069905-11.31184801 0-22.62369604 1.413981-33.93554407 2.82796201-19.79573404 18.38175303-35.34952507 38.17748707-38.17748708 12.01883853-2.1209715 24.03767705-3.5349525 36.05651558-4.241943h7.06990502l7.7768955 8.48388602 606.5978502 604.4768787v2.827962zM115.37832871 99.11754718c7.06990501-7.06990501 16.96777203-11.31184801 27.57262956-11.31184801s19.79573404 4.24194301 27.57262955 11.31184801l772.03362753 770.61964653c15.55379103 14.84680053 15.55379103 38.88447758 1.41398101 53.7312781l-1.41398101 1.41398101c-14.84680053 14.84680053-39.59146809 14.84680053-54.43826861 0L115.37832871 154.26280629c-15.55379103-14.84680053-15.55379103-38.88447758-1.413981-53.7312781 0.7069905-0.7069905 1.41398101-0.7069905 1.413981-1.41398101z",fill:"#374463","p-id":"4379"})],-1))],$a={class:"play_con relative"},Ha={class:"flex justify-between mt-[10px] items-center px-[20px]"},Ja={class:"flex items-center min-w-[290px] !hidden"},Ya=ke(()=>E("p",{class:"mx-[10px] leading-[100%]"},"\u5207\u5206\u7C92\u5EA6: ",-1)),Ga={class:"bg-[#F1F1F1] rounded-[5px] p-[5px]"},qa={class:"flex flex-col whitespace-nowrap w-[350px]]"},Xa={class:"flex items-center"},Ka={key:0,class:"mt-[5px] text-[#999] ml-[87px]"},Za={class:"setting !hidden"},el={class:"operate_btns"},tl=[ke(()=>E("svg",{t:"1748398656152",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5287",width:"16",height:"16"},[E("path",{fill:"rgb(100, 100, 100)",d:"M535.21136474 141.21142578c12.82928467 0 23.75271607 4.47912598 32.874115 13.59310914 9.04724122 9.12139893 13.62277222 19.93359375 13.62277221 32.75546264 0 12.82928467-4.59777833 23.78979492-13.83782958 33.05950927L275.63711548 512l292.23330689 291.53622437C577.11047364 812.64279175 581.70825195 823.61071778 581.70825195 836.44000244c0 12.82928467-4.57553101 23.78979492-13.62277221 32.75546264C558.96408081 878.30944823 548.04064942 882.78857422 535.21136474 882.78857422c-13.07400513 0-24.10125732-4.47912598-33.05950927-13.4447937L176.8590393 545.06692505C167.95269776 536.10125732 163.45874023 525.1333313 163.45874023 512c0-12.9776001 4.49395753-23.9529419 13.40029907-32.91119385l325.29281617-324.44000244C511.11010742 145.69796753 522.13735962 141.37457276 535.21136474 141.37457276V141.21142578zM814.04437257 141.21142578c12.82928467 0 23.76013184 4.47912598 32.88894652 13.59310914C855.97314453 163.92593383 860.54125977 174.73812867 860.54125977 187.55999756c0 12.82928467-4.59777833 23.78979492-13.83782959 33.05950927L554.47012329 512l292.23330689 291.53622437C855.94348145 812.64279175 860.54125977 823.61071778 860.54125977 836.44000244c0 12.82928467-4.56811523 23.78979492-13.61535645 32.75546264-9.12139893 9.11398315-20.06707763 13.59310913-32.88894653 13.59310914-13.07400513 0-24.10125732-4.47912598-33.04467773-13.4447937L455.69204711 545.06692505c-8.9211731-8.95825195-13.41513062-19.92617798-13.4151306-33.05950928 0-12.9776001 4.49395753-23.9529419 13.42254638-32.91119384l325.29281617-324.44000245C789.92828369 145.69796753 800.96295166 141.37457276 814.03695679 141.37457276V141.21142578z","p-id":"5288"})],-1)),ke(()=>E("span",null,"5s",-1))],nl=[ke(()=>E("svg",{t:"1748398632791",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5125",width:"25",height:"25"},[E("path",{fill:"rgb(100, 100, 100)",d:"M500.970806 776.449951l0-528.901948-374.624213 264.465301L500.970806 776.449951zM523.030218 512.014326l374.622166 264.436648 0-528.901948L523.030218 512.014326z","p-id":"5126"})],-1)),ke(()=>E("span",null,"2x",-1))],il={key:0,t:"1748401686819",class:"icon relative top-[4px]",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"6289",width:"40",height:"40"},sl=[ke(()=>E("path",{d:"M512 68.191078c-245.204631 0-443.808922 198.60429-443.808922 443.808922s198.60429 443.808922 443.808922 443.808922 443.808922-198.60429 443.808922-443.808922S757.203608 68.191078 512 68.191078zM467.61921 689.523159l-88.76158 0L378.857631 334.476841l88.76158 0L467.61921 689.523159zM645.142369 689.523159l-88.76158 0L556.38079 334.476841l88.76158 0L645.142369 689.523159z","p-id":"6290"},null,-1))],rl={key:1,t:"1748398543573",class:"icon relative top-[4px]",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2624",width:"40",height:"40"},ol=[ke(()=>E("path",{fill:"rgb(100, 100, 100)",d:"M512 97.52381c228.912762 0 414.47619 185.563429 414.47619 414.47619s-185.563429 414.47619-414.47619 414.47619S97.52381 740.912762 97.52381 512 283.087238 97.52381 512 97.52381z m-57.782857 268.190476c-21.942857 0-39.740952 17.798095-39.740953 39.740952v209.13981a39.740952 39.740952 0 0 0 61.196191 33.426285l164.352-105.593904a39.740952 39.740952 0 0 0-0.292571-67.047619l-164.352-103.545905a39.740952 39.740952 0 0 0-21.187048-6.119619z","p-id":"2625"},null,-1))],al=[ke(()=>E("svg",{t:"1748398577582",class:"icon",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3795",width:"25",height:"25"},[E("path",{fill:"rgb(100, 100, 100)",d:"M895.604748 512.014326l-374.624213-264.465301 0 528.901948L895.604748 512.014326zM124.298957 247.549026l0 528.901948 374.622166-264.436648L124.298957 247.549026z","p-id":"3796"})],-1)),ke(()=>E("span",null,"2x",-1))],ll=[ke(()=>E("svg",{t:"1748398656152",class:"icon rotate-180",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"5287",width:"16",height:"16"},[E("path",{fill:"rgb(100, 100, 100)",d:"M535.21136474 141.21142578c12.82928467 0 23.75271607 4.47912598 32.874115 13.59310914 9.04724122 9.12139893 13.62277222 19.93359375 13.62277221 32.75546264 0 12.82928467-4.59777833 23.78979492-13.83782958 33.05950927L275.63711548 512l292.23330689 291.53622437C577.11047364 812.64279175 581.70825195 823.61071778 581.70825195 836.44000244c0 12.82928467-4.57553101 23.78979492-13.62277221 32.75546264C558.96408081 878.30944823 548.04064942 882.78857422 535.21136474 882.78857422c-13.07400513 0-24.10125732-4.47912598-33.05950927-13.4447937L176.8590393 545.06692505C167.95269776 536.10125732 163.45874023 525.1333313 163.45874023 512c0-12.9776001 4.49395753-23.9529419 13.40029907-32.91119385l325.29281617-324.44000244C511.11010742 145.69796753 522.13735962 141.37457276 535.21136474 141.37457276V141.21142578zM814.04437257 141.21142578c12.82928467 0 23.76013184 4.47912598 32.88894652 13.59310914C855.97314453 163.92593383 860.54125977 174.73812867 860.54125977 187.55999756c0 12.82928467-4.59777833 23.78979492-13.83782959 33.05950927L554.47012329 512l292.23330689 291.53622437C855.94348145 812.64279175 860.54125977 823.61071778 860.54125977 836.44000244c0 12.82928467-4.56811523 23.78979492-13.61535645 32.75546264-9.12139893 9.11398315-20.06707763 13.59310913-32.88894653 13.59310914-13.07400513 0-24.10125732-4.47912598-33.04467773-13.4447937L455.69204711 545.06692505c-8.9211731-8.95825195-13.41513062-19.92617798-13.4151306-33.05950928 0-12.9776001 4.49395753-23.9529419 13.42254638-32.91119384l325.29281617-324.44000245C789.92828369 145.69796753 800.96295166 141.37457276 814.03695679 141.37457276V141.21142578z","p-id":"5288"})],-1)),ke(()=>E("span",null,"5s",-1))],ul={class:"w-[300px] flex justify-end"},hl={class:"h-[200px] bg-[eee] border-[1px] border-[#ccc] m-[20px] p-[20px]"},cl=ke(()=>E("p",{class:"font-bold mb-[10px]"}," \u89C6\u9891\u8F93\u51FA\u533A ",-1)),dl={class:"w100 overflow-y-auto"},pl={class:"flex items-center"},fl={class:"mr-[10px] w-[200px]"},gl={class:"video_con"},ml=ke(()=>E("i",{class:"bg"},null,-1)),vl=["src"],yl={key:0,class:"time"},bl=["title"],wl={class:"w-[28%] p-[20px] overflow-hidden relative bg-white"},xl=Wt({name:"dashboard"}),El=Wt({...xl,setup(i){const e=N(!0),t=N("1"),n=N(1),s=N(0),o=N(0),r=N("video"),a=N(null),l=N(null),u=N(null),h=N(null),d=N(null),c=N(""),f=N(""),g=N(0),p=N([]),m=N([]),b=N({fileId:null,targetName:null,targetPath:null,sourceName:null,sourcePath:null,taskId:null,status:1e3,optimized:!1}),v=N(-1),y=N(0),w=N(1),x=N(!1);N(!1);const k=N(2),C=N(!1),R=N(null),S=N(""),_=N(""),te=()=>{R.value.pause(),C.value=!1},U=(I,T=!0)=>{v.value=I;const O=m.value[I];J(O.start),l.value.addRegion(O.start,O.end,O);const Q=m.value.filter(K=>O.topicId===K.topicId&&K.is_delete);Q.length>0&&Q.map(K=>{l.value.addDeleteRegion(K.start,K.end,K)}),T&&u.value.setSelectedRange(1e3*O.start,1e3*O.end,T)},A=(I,T,O=!0,Q=!1,K=0)=>{let $={};if(K!=v.value)$=m.value[K],$.start=I,$.end=T,m.value=[...m.value.slice(0,K),$,...m.value.slice(K+1)];else{if($=m.value[v.value],$.start=I,$.end=T,m.value=[...m.value.slice(0,v.value),$,...m.value.slice(v.value+1)],!O)return void u.value.setSelectedRange(1e3*$.start,1e3*$.end,Q);U(v.value,!1)}},z=I=>{const T=m.value[v.value];T.throw=I,m.value=[...m.value.slice(0,v.value),T,...m.value.slice(v.value+1)]},V=I=>{if(I>0){if(y.value>=g.value)return;y.value+=I}else{if(y.value<=0)return;y.value+=I}a.value.currentTime(y.value)},B=I=>new Promise((T,O)=>{Ps({topicId:m.value[v.value].topicId,config:j.value[s.value]}).then(Q=>{Q.ok||et().error(Q.msg),Y({filePath:c.value,fileName:f.value},v.value),I(),T(Q)})}),j=N([]),Y=(I,T=0)=>{Ts({sourcePath:I.filePath,sourceName:I.fileName}).then(async O=>{if(O.ok)if(O.data.fileId!==b.value.fileId&&(yt.value=!0,ht.value.splice(0,ht.value.length),clearInterval(ne.value),clearInterval(ut.value)),b.value=O.data,+O.data.status==2){const Q=await fetch(S.value+O.data.jsonPath),K=await Q.json();if(!K.asr_data)return;h.value.init(g.value,T),clearInterval(ne.value),l.value.loadAudio(S.value+O.data.targetPath),m.value.splice(0,m.value.length),p.value.splice(0,p.value.length),p.value.push(...Object.values(K.asr_data.sentence_info)),O.data.topics.map($=>{const We={start:$.timeStampList[0][0]/1e3,end:$.timeStampList[$.timeStampList.length-1][1]/1e3,label:$.topicName,topicId:$.topicId,optimized:$.optimized};m.value.push(We),$.timeStampList.length>1&&$.timeStampList.map((G,Z)=>{if(Z===$.timeStampList.length-1)return;const ie={start:$.timeStampList[Z][1]/1e3,end:$.timeStampList[Z+1][0]/1e3,label:$.topicName,is_delete:!0,topicId:$.topicId,optimized:$.optimized};m.value.push(ie)})}),ne.value=null}else+O.data.status!=1&&+O.data.status!=3||ne.value||(ne.value=setInterval(()=>{Y({filePath:c.value,fileName:f.value})},2e3));else et().error(O.msg)})},ee=()=>{clearInterval(ne.value),ne.value=null,m.value.splice(0,m.value.length),v.value=-1,p.value.splice(0,p.value.length),b.value={},l.value.loadAudio(""),u.value.clear()},F=I=>{I.directory||(ee(),f.value=I.fileName,ls(I.filePath),Y(I))};function J(I){y.value=I,a.value&&a.value.currentTime(I)}const ae=I=>{if(I==="add"){if(w.value==.5)return w.value=1,void a.value.playbackRate(w.value);w.value<6&&(w.value+=2,w.value=w.value>6?6:w.value,a.value.playbackRate(w.value))}else w.value>1?(w.value-=2,w.value=w.value==0?1:w.value,w.value=w.value<.5?.5:w.value):w.value=.5,a.value.playbackRate(w.value)},Oe=()=>{x.value?a.value.pause():a.value.play()},ne=N(null),re=$n(async()=>{ee(),b.value.status=1,Cs({sourceName:f.value,sourcePath:c.value,model:k.value,de_noise:o.value!=0,config:j.value[s.value]}).then(I=>{if(!I.ok)return et().error(I.msg),void(b.value.status=null);setTimeout(()=>{Y({filePath:c.value,fileName:f.value})},5e3)})},3e3),_e=$n(async()=>{clearInterval(ne.value),ne.value=null,m.value.splice(0,m.value.length),v.value=-1,b.value.status=3,As({id:b.value.fileId,config:j.value[s.value]}).then(I=>{I.ok?setTimeout(()=>{Y({filePath:c.value,fileName:f.value})},5e3):et().error(I.msg)})},3e3);Dt(()=>{e.value=!1;const I=js(Bs),{assetsVideoPrefix:T}=ws(I);S.value=T.value,ks().then(O=>{_.value=O.data}),window.addEventListener("keydown",Lt),Is({}).then(O=>{O.ok?(j.value=O.data,s.value=0):et().error(O.msg)}),rs()});const es=I=>{v.value=I,h.value.jumpVideoToIndex(I)},Wn=I=>{if(m.value.length===0)return;const T=m.value.filter(Q=>!Q.is_delete);let O=0;if(I>0){if(O=T.indexOf(m.value[v.value]),O+=I,O>T.length-1)return}else if(O=T.indexOf(m.value[v.value]),O+=I,O<0)return;v.value=m.value.indexOf(T[O]),h.value.jumpVideoToIndex(v.value)};async function jt(I="/1000"){return I===""&&(I="/1000"),rn.value=!0,new Promise((T,O)=>{try{Ms({filePath:I}).then(Q=>{Q.data||T([]),Q.data.map(K=>{K.directory||(K.isLeaf=!0)}),rn.value=!1,T([...Q.data])})}catch(Q){console.error("\u8BFB\u53D6\u5931\u8D25:",Q)}})}(function(I){let T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{authType:O=null,remoteBasePath:Q,contactHref:K=ko,ha1:$,headers:We={},httpAgent:G,httpsAgent:Z,password:ie,token:zt,username:ct,withCredentials:ln}=T;let bt=O;bt||(bt=ct||ie?Be.Password:Be.None);const un={authType:bt,remoteBasePath:Q,contactHref:K,ha1:$,headers:Object.assign({},We),httpAgent:G,httpsAgent:Z,password:ie,parsing:{attributeNamePrefix:T.attributeNamePrefix??"@",attributeParsers:[],tagParsers:[Pi]},remotePath:Vs(I),remoteURL:I,token:zt,username:ct,withCredentials:ln};ni(un,ct,ie,zt,$)})("http://192.168.1.62:8666",{username:"admin",password:"yunfeiNAS"});const Bt=N([]),Ie=N(["/1000"]),lt=N([]),rn=N(!0),ts=async(I,T)=>{let O={};I.data.filePath&&(O.path=I.data.filePath),jt(O.path).then(async Q=>{lt.value=Q,T(Q)})},Un=(I=!0)=>{I&&(Ie.value.splice(0,Ie.value.length),Bt.value.splice(0,Bt.value.length),jt().then(async T=>{Ie.value.push("/1000"),lt.value=T,Bt.value=T}))},ns=()=>{Ie.value.length!==0&&(Ie.value.splice(Ie.value.length-1,1),jt(Ie.value[Ie.value.length-1]).then(async I=>{lt.value=I}))},on=N(!1),is=N(),ss=()=>{on.value=!0,setTimeout(()=>{on.value=!1},500),Un()},rs=()=>{const I=zs("my-video",{controls:!0,responsive:!0,preload:"auto",fill:!0,nativeControlsForTouch:!1,playbackRates:[.5,1,1.5,2],controlBar:{},language:"zh-CN"});I.on("loadedmetadata",()=>{const T=I.duration();g.value=T,h.value.init(g.value)}),I.on("timeupdate",()=>{y.value=I.currentTime()}),I.on("play",()=>{x.value=!0}),I.on("pause",()=>{x.value=!1}),I.on("error",os),I.on("ended",()=>{}),a.value=I};function os(){if(a.value.duration()-a.value.currentTime()<1)return console.log("\u6355\u83B7\u5230\u7ED3\u5C3E\u9519\u8BEF\uFF0C\u5FFD\u7565\u5E76\u7ED3\u675F\u64AD\u653E"),a.value.error(null),void a.value.trigger("ended")}const as=I=>I.includes(".m3u8")?"application/x-mpegURL":I.includes(".mpd")?"application/dash+xml":I.includes(".webm")?"video/webm":"video/mp4",ls=I=>{c.value=I,(T=>{if(a.value)try{x.value=!1,a.value.reset();const O=T.split("/").map(Q=>encodeURIComponent(Q)).join("/");a.value.src({src:S.value+O,type:as(T)}),a.value.load()}catch(O){console.error(O)}})(c.value)},an=N(""),yt=N(!0),ut=N(null),ht=N([]),us=I=>{if(!yt.value)return void et().info("\u8BF7\u7B49\u5F85\u4E0A\u4E00\u6B21\u64CD\u4F5C\u5B8C\u6210");yt.value=!1,ht.value.splice(0,ht.value.length),clearInterval(ut.value),ut.value=null,an.value=Ls();const T={timeList:[],sourceName:b.value.sourceName,sourcePath:b.value.sourcePath,taskId:b.value.taskId,batchNumber:an.value,sourceFileId:b.value.fileId};if(I){const O=m.value[v.value],Q=m.value.filter(G=>G.topicId===O.topicId&&G.is_delete);let K=[1e3*O.start,1e3*O.end];if(Q.length>0){Q.sort((Z,ie)=>Z.start-ie.start);const G=[];for(const Z of Q){const ie=G[G.length-1];ie&&Z.start<=ie.end?(ie.end=Math.max(ie.end,Z.end),ie.start=Math.min(ie.start,Z.start)):G.push({...Z})}G.map(Z=>{K.push(1e3*Z.start,1e3*Z.end)})}K.sort((G,Z)=>G-Z);const $=[];for(let G=0;G<K.length;G+=2)$.push(K.slice(G,G+2));let We={timeStamp:$,topicInfo:O.label};T.timeList.push(We)}else m.value.map(O=>{if(!O.throw&&!O.hasOwnProperty("is_delete")){const Q=m.value.filter(G=>G.topicId===O.topicId&&G.is_delete);let K=[1e3*O.start,1e3*O.end];if(Q.length>0){Q.sort((Z,ie)=>Z.start-ie.start);const G=[];for(const Z of Q){const ie=G[G.length-1];ie&&Z.start<=ie.end?(ie.end=Math.max(ie.end,Z.end),ie.start=Math.min(ie.start,Z.start)):G.push({...Z})}G.map(Z=>{K.push(1e3*Z.start,1e3*Z.end)})}K.sort((G,Z)=>G-Z);const $=[];for(let G=0;G<K.length;G+=2)$.push(K.slice(G,G+2));let We={timeStamp:$,topicInfo:O.label};T.timeList.push(We)}});Ns(T).then(O=>{O.ok?ut.value=setInterval(()=>{Os({sourceFileId:b.value.fileId,batchNumber:an.value}).then(Q=>{Q.data.videoClips.length!==0&&(Q.data.finish&&(clearInterval(ut.value),ut.value=null,yt.value=!0),ht.value=Q.data.videoClips)})},5e3):et().error(O.msg)})};xs(()=>{window.removeEventListener("keydown",Lt),a.value&&a.value.dispose()});const hs=()=>{r.value!=="video"?(d.value.init(),h.value.reset(),window.removeEventListener("keydown",Lt)):window.addEventListener("keydown",Lt)},Lt=I=>{switch(I.preventDefault(),I.key){case" ":Oe();break;case"ArrowLeft":V(-10);break;case"ArrowRight":V(10);break;case"ArrowUp":Wn(-1);break;case"ArrowDown":Wn(1)}};return(I,T)=>{const O=le("el-radio-button"),Q=le("el-radio-group"),K=le("Operation"),$=le("el-icon"),We=le("Menu"),G=le("el-button"),Z=le("RefreshRight"),ie=le("el-tree"),zt=le("el-empty"),ct=le("el-switch"),ln=le("el-tooltip"),bt=le("el-option"),un=le("el-select"),cs=le("VideoPlay"),ds=le("Loading"),ps=le("WarningFilled"),fs=le("el-dialog"),gs=Es("loading");return L(),q("div",ba,[W(Q,{modelValue:M(r),"onUpdate:modelValue":T[0]||(T[0]=H=>Ye(r)?r.value=H:null),onChange:hs,class:"w-full home-radio-group"},{default:D(()=>[W(O,{label:"video",value:"video"},{default:D(()=>[X("\u89C6\u9891\u5207\u7247")]),_:1}),W(O,{label:"sucai",value:"sucai"},{default:D(()=>[X("\u7D20\u6750\u7BA1\u7406")]),_:1})]),_:1},8,["modelValue"]),Ut(E("div",wa,[E("div",xa,[E("div",Ea,[E("div",Ca,[E("div",Aa,[W(Q,{modelValue:M(t),"onUpdate:modelValue":T[1]||(T[1]=H=>Ye(t)?t.value=H:null),onChange:T[2]||(T[2]=()=>Un(+M(t)!=1))},{default:D(()=>[W(O,{label:1,value:1},{default:D(()=>[W($,null,{default:D(()=>[W(K)]),_:1})]),_:1}),W(O,{label:2,value:2},{default:D(()=>[W($,null,{default:D(()=>[W(We)]),_:1})]),_:1})]),_:1},8,["modelValue"]),E("div",ka,[W(G,{type:"text",class:"mr-[10px]"},{default:D(()=>[E("a",{href:M(_),target:"_blank"},"\u67E5\u770B\u8D44\u6E90\u5E93",8,Sa)]),_:1}),E("div",{class:"hover:!text-[#3889f0] flex items-center justify-center cursor-pointer",onClick:ss},[W($,{class:_t(["relative top-[1px] mr-[5px]",{"is-loading":M(on)}])},{default:D(()=>[W(Z)]),_:1},8,["class"]),X(" \u5237\u65B0 ")])])]),E("div",Pa,[+M(t)==1?(L(),ve(ie,{key:0,ref_key:"foldersRef",ref:is,data:M(Bt),"node-key":"filePath",props:{isLeaf:"isLeaf"},load:ts,"highlight-current":"",accordion:"",lazy:"","expand-on-click-node":!0,onNodeClick:F},{default:D(({node:H,data:je})=>[E("span",{class:"custom-tree-node",title:je.filename},[E("span",Ta,[je.isLeaf?(L(),q("img",Oa)):(L(),q("img",Na)),E("span",Ma,me(je.fileName),1)])],8,Ia)]),_:1},8,["data"])):ye("",!0),+M(t)==2&&M(Ie).length>1?(L(),q("div",Ra,[E("p",{class:"mb-[20px] flex items-center text-[#3889f0] mr-[10px] cursor-pointer",onClick:ns},[ja,X(" \u8FD4\u56DE\u4E0A\u4E00\u7EA7 ")]),X(" "+me(M(Ie)[M(Ie).length-1]),1)])):ye("",!0),+M(t)==2?(L(),q("div",Ba,[M(lt).length>0?(L(!0),q(Je,{key:0},dt(M(lt),H=>Ut((L(),q("div",{key:H,onClick:je=>{var wt;(wt=H).isLeaf?F(wt):(Ie.value.push(wt.filePath),jt(wt.filePath).then(async hn=>{lt.value=hn}))},class:"mr-[25px] w-[80px] h-[74px] mb-[20px] flex justify-center flex-col items-center"},[H.isLeaf?H.fileName.indexOf(".mp4")>-1?(L(),q("img",Da)):(L(),q("img",Fa)):(L(),q("img",za)),E("span",{class:"w-[80px] truncate text-center text-[16px]",title:H.fileName},me(H.fileName),9,_a)],8,La)),[[gs,M(rn)]])),128)):(L(),ve(zt,{key:1,class:"m-auto",description:"\u6682\u65E0\u6587\u4EF6"}))])):ye("",!0)])]),E("div",Wa,[E("video",Ua,null,512),Ut(E("div",Va,Qa,512),[[fn,M(c)==""]])])]),E("div",$a,[E("div",Ha,[E("div",Ja,[Ya,E("div",Ga,[W(Q,{class:"particle_radio",modelValue:M(k),"onUpdate:modelValue":T[3]||(T[3]=H=>Ye(k)?k.value=H:null)},{default:D(()=>[W(O,{label:1,value:1},{default:D(()=>[X("\u7C97\u7565")]),_:1}),W(O,{label:2,value:2},{default:D(()=>[X("\u9002\u4E2D")]),_:1}),W(O,{label:3,value:3},{default:D(()=>[X("\u7CBE\u7EC6")]),_:1})]),_:1},8,["modelValue"])]),W(ct,{class:"ml-[10px]",modelValue:M(o),"onUpdate:modelValue":T[4]||(T[4]=H=>Ye(o)?o.value=H:null),"active-value":1,"inactive-value":0,"active-text":"\u4EBA\u58F0\u589E\u5F3A","inactive-text":""},null,8,["modelValue"])]),E("div",qa,[E("div",Xa,[X(" \u573A\u666F\u9009\u62E9\uFF1A "),W(un,{style:{width:"200px"},modelValue:M(s),"onUpdate:modelValue":T[5]||(T[5]=H=>Ye(s)?s.value=H:null),placeholder:"\u8BF7\u9009\u62E9"},{default:D(()=>[(L(!0),q(Je,null,dt(M(j),(H,je)=>(L(),ve(bt,{key:je,label:H.name,value:je},{default:D(()=>[W(ln,{class:"box-item",effect:"dark",content:H.description,placement:"right-start"},{default:D(()=>[X(me(H.name),1)]),_:2},1032,["content"])]),_:2},1032,["label","value"]))),128))]),_:1},8,["modelValue"])]),M(j)[M(s)]?(L(),q("p",Ka,me(M(j)[M(s)].description),1)):ye("",!0)]),E("div",Za,[W(ct,{modelValue:M(n),"onUpdate:modelValue":T[6]||(T[6]=H=>Ye(n)?n.value=H:null),"active-text":"\u6DF1\u5EA6\u63A8\u7406","active-value":2,"inactive-value":1,"inactive-text":"\u666E\u901A\u63A8\u7406"},null,8,["modelValue"])]),E("ul",el,[E("li",{onClick:T[7]||(T[7]=H=>V(-5))},tl),E("li",{onClick:T[8]||(T[8]=H=>ae("minus"))},nl),E("li",{onClick:T[9]||(T[9]=H=>Oe())},[M(x)?(L(),q("svg",il,sl)):(L(),q("svg",rl,ol))]),E("li",{onClick:T[10]||(T[10]=H=>ae("add"))},al),E("li",{onClick:T[11]||(T[11]=H=>V(5))},ll)]),E("div",ul,[M(c)!==""?(L(),q(Je,{key:0},[+M(b).status==1?(L(),ve(G,{key:0,type:"primary",loading:""},{default:D(()=>[X("\u89C6\u9891\u5904\u7406\u4E2D")]),_:1})):M(b).taskId&&M(b).status!=-1&&M(b).status!=2?ye("",!0):(L(),ve(G,{key:1,type:"primary",onClick:T[12]||(T[12]=H=>M(re)())},{default:D(()=>[X("\u5207\u5206\u89C6\u9891")]),_:1})),M(b).optimized||M(b).status!=2?ye("",!0):(L(),ve(G,{key:2,class:"optimize_btn",type:"primary",onClick:T[13]||(T[13]=H=>M(_e)()),plain:""},{default:D(()=>[X("\u4F18\u5316\u5168\u90E8")]),_:1})),+M(b).status==3?(L(),ve(G,{key:3,type:"primary",loading:""},{default:D(()=>[X("\u89C6\u9891\u4F18\u5316\u4E2D")]),_:1})):ye("",!0)],64)):ye("",!0)])]),W(jo,{ref_key:"videoRef",ref:h,duration:M(g),segments:M(m),currentTime:M(y),index:M(v),pixelsPerSecond:20,onAddRegion:U,onSeek:J,onOptimize:B,onUpdateThrow:z},null,8,["duration","segments","currentTime","index"]),W(ya,{currentTime:M(y),list:M(m),canEdit:M(yt),index:M(v),onOptimize:B,onChangeIndex:es,onSeek:J,onUpdate:A,onUpdateThrow:z,onOutput:us,ref_key:"audioRef",ref:l},null,8,["currentTime","list","canEdit","index"])]),E("div",hl,[cl,E("div",dl,[E("ul",pl,[(L(!0),q(Je,null,dt(M(ht),H=>{return L(),q("li",fl,[E("div",gl,[ml,E("img",{src:(je=H.coverImg,S.value+je)},null,8,vl),H.duration?(L(),q("p",yl,me(M(Ge)(H.duration)),1)):ye("",!0),H.status==2?(L(),ve($,{key:1,onClick:wt=>(hn=>{a.value.pause(),C.value=!0,Qn(()=>{R.value.init(S.value+hn)})})(H.videoPath),class:"play text-[34px] !text-white"},{default:D(()=>[W(cs)]),_:2},1032,["onClick"])):H.status==1?(L(),ve($,{key:2,class:"is-loading !text-[20px] !text-white"},{default:D(()=>[W(ds)]),_:1})):(L(),ve($,{key:3,class:"icon text-[red] !text-[20px]"},{default:D(()=>[W(ps)]),_:1}))]),E("p",{class:"mt-[5px] w-[100%] truncate",title:H.videoName},me(H.videoName),9,bl)]);var je}),256))])])])]),E("div",wl,[W(Uo,{ref_key:"danmuRef",ref:u,danmaku:M(p),currentTime:40,onUpdate:A},null,8,["danmaku"])])],512),[[fn,M(r)==="video"]]),Ut(E("div",null,[W(Ss,{ref_key:"sourceRef",ref:d},null,512)],512),[[fn,M(r)!=="video"]]),W(fs,{modelValue:M(C),"onUpdate:modelValue":T[14]||(T[14]=H=>Ye(C)?C.value=H:null),onClose:te},{default:D(()=>[W(Ds,{ref_key:"videoPlayerRef",ref:R,id:"output_source_video_player"},null,512)]),_:1},8,["modelValue"])])}}}),Cl=gn(El,[["__scopeId","data-v-e34b6f36"]]);export{Cl as default};
