import{d as B,r as c,I as j,J as F,K as R,M as S,u as f}from"./index.0f5ebb0a.js";import{l as h,r as b,R as v,aa as m,ah as C,m as V,D as T,E as o,t as J,L as d,I,J as y,u as t,F as E,j as K,n as M}from"./vue.4dfaac09.js";const z={class:"dialog-footer"},A=h({name:"dict-item-form"}),G=h({...A,emits:["refresh"],setup(H,{expose:$,emit:_}){const k=_,{t:x}=B(),n=b(),u=b(!1),p=b(!1),l=v({id:"",dictId:"",dictType:"",value:"",label:"",description:"",sortOrder:0,remarks:""}),O=v({dictType:[{validator:c.overLength,trigger:"blur"},{required:!0,message:"\u8BF7\u70B9\u9009\u5DE6\u4FA7\u5B57\u5178\u9879",trigger:"blur"}],value:[{validator:c.overLength,trigger:"blur"},{required:!0,message:"\u6570\u636E\u503C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],label:[{validator:c.overLength,trigger:"blur"},{required:!0,message:"\u6807\u7B7E\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:(e,a,i)=>{j(e,a,i,l.dictType,l.id!=="")},trigger:"blur"}],description:[{validator:c.overLength,trigger:"blur"},{required:!0,message:"\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sortOrder:[{validator:c.overLength,trigger:"blur"},{required:!0,message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),L=async()=>{if(!await n.value.validate().catch(()=>{}))return!1;try{p.value=!0,l.id?await R(l):await S(l),f().success(x(l.id?"common.editSuccessText":"common.addSuccessText")),u.value=!1,k("refresh")}catch(e){f().error(e.msg)}finally{p.value=!1}};return $({openDialog:(e,a)=>{u.value=!0,l.id="",M(()=>{var i;(i=n.value)==null||i.resetFields(),a&&(l.dictId=a.dictId,l.dictType=a.dictType)}),e!=null&&e.id&&F(e.id).then(i=>{Object.assign(l,i.data)})}}),(e,a)=>{const i=m("el-input"),s=m("el-form-item"),U=m("el-input-number"),w=m("el-form"),g=m("el-button"),q=m("el-dialog"),D=C("loading");return V(),T(q,{modelValue:t(u),"onUpdate:modelValue":a[7]||(a[7]=r=>K(u)?u.value=r:null),title:t(l).id?e.$t("common.editBtn"):e.$t("common.addBtn"),width:"600"},{footer:o(()=>[J("span",z,[d(g,{onClick:a[6]||(a[6]=r=>u.value=!1)},{default:o(()=>[I(y(e.$t("common.cancelButtonText")),1)]),_:1}),d(g,{type:"primary",onClick:L,disabled:t(p)},{default:o(()=>[I(y(e.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:o(()=>[E((V(),T(w,{ref_key:"dicDialogFormRef",ref:n,model:t(l),"label-width":"90px",rules:t(O)},{default:o(()=>[d(s,{label:e.$t("dictItem.dictType"),prop:"dictType"},{default:o(()=>[d(i,{modelValue:t(l).dictType,"onUpdate:modelValue":a[0]||(a[0]=r=>t(l).dictType=r),clearable:"",disabled:"",placeholder:e.$t("dictItem.inputDictTypeTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(s,{label:e.$t("dictItem.label"),prop:"label"},{default:o(()=>[d(i,{modelValue:t(l).label,"onUpdate:modelValue":a[1]||(a[1]=r=>t(l).label=r),placeholder:e.$t("dictItem.inputLabelTip"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(s,{label:e.$t("dictItem.itemValue"),prop:"value"},{default:o(()=>[d(i,{modelValue:t(l).value,"onUpdate:modelValue":a[2]||(a[2]=r=>t(l).value=r),placeholder:e.$t("dictItem.inputItemValueTip"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(s,{label:e.$t("dictItem.description"),prop:"description"},{default:o(()=>[d(i,{modelValue:t(l).description,"onUpdate:modelValue":a[3]||(a[3]=r=>t(l).description=r),placeholder:e.$t("dictItem.inputDescriptionTip"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(s,{label:e.$t("dictItem.sortOrder"),prop:"sortOrder"},{default:o(()=>[d(U,{modelValue:t(l).sortOrder,"onUpdate:modelValue":a[4]||(a[4]=r=>t(l).sortOrder=r),placeholder:e.$t("dictItem.inputSortOrderTip"),clearable:""},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),d(s,{label:e.$t("dictItem.remarks"),prop:"remarks"},{default:o(()=>[d(i,{type:"textarea",maxlength:"100",rows:3,modelValue:t(l).remarks,"onUpdate:modelValue":a[5]||(a[5]=r=>t(l).remarks=r),placeholder:e.$t("dictItem.inputRemarksTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[D,t(p)]])]),_:1},8,["modelValue","title"])}}});export{G as default};
