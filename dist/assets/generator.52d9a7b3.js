import{r as s,al as h,z as L,y as ee,u as ae,A as le,b as te,_ as re,__tla as ue}from"./index.0f5ebb0a.js";import{u as oe,p as de}from"./table.a96d0687.js";import{l as ne}from"./group.28f0bda4.js";import{c as se,o as me}from"./template.7498b27b.js";import{p as ie,__tla as pe}from"./index.97aa2129.js";import{l as ce,aq as be,r as b,R as j,e as ge,h as fe,aa as i,ah as he,F as _e,u as t,m as V,D as q,E as a,L as e,I as c,j as ve,q as ye,K as Ve,$ as Ne,H as O,av as ke,at as Pe,au as Le,t as U}from"./vue.4dfaac09.js";import"./loading.50b2b84c.js";let z,qe=Promise.all([(()=>{try{return ue}catch{}})(),(()=>{try{return pe}catch{}})()]).then(async()=>{let _,C,I,R,w;_=v=>(Pe("data-v-7f25f5ab"),v=v(),Le(),v),C=_(()=>U("span",null,"\u6A21\u5757\u540D",-1)),I=_(()=>U("span",null,"\u529F\u80FD\u540D",-1)),R=_(()=>U("span",null,"\u540E\u7AEF\u751F\u6210\u8DEF\u5F84",-1)),w=_(()=>U("span",null,"\u524D\u7AEF\u751F\u6210\u8DEF\u5F84",-1)),z=re(ce({__name:"generator",props:{tableName:{type:String},dsName:{type:String}},emits:["refreshDataList"],setup(v,{expose:E,emit:F}){const A=ke(()=>te(()=>import("./child.eeff94e9.js"),["assets/child.eeff94e9.js","assets/table.a96d0687.js","assets/index.0f5ebb0a.js","assets/vue.4dfaac09.js","assets/index.3d43c53c.css"])),N=v,H=F,K=be(),Z=b(!1),y=b(!1),k=b(),D=b(),g=b(),M=b(""),l=j({id:"",generatorType:"0",formLayout:1,backendPath:"",frontendPath:"",packageName:"",email:"",author:"",version:"",moduleName:"",functionName:"",className:"",tableComment:"",tableName:"",dsName:"",style:"",childTableName:"",syncRoute:"0",syncMenuId:""}),$=b([]),B=b({tableName:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],tableComment:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],className:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],packageName:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],author:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],moduleName:[{validator:s.overLength,trigger:"blur"},{validator:s.letter,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],functionName:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],generatorType:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],formLayout:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],backendPath:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],frontendPath:[{validator:s.overLength,trigger:"blur"},{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],style:[{required:!0,message:"\u5FC5\u586B\u9879\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),x=()=>{ne().then(({data:m})=>{m&&m.length>0&&($.value=m.filter(r=>!r.groupName.includes("vform")))})},S=j([]);return ge(()=>g,()=>{const{childTableName:m}=g.value||{};M.value=m?`${N.tableName} + ${m}`:N.tableName},{deep:!0,immediate:!0}),fe(()=>{var m,r;k.value&&k.value.resetFields(),l.id="",l.tableName=String(N.tableName),l.dsName=String(N.dsName),m=l.dsName,r=l.tableName,y.value=!0,oe(m,r).then(d=>{var p;Object.assign(l,d.data);let o=d.data.groupList;l.style=(p=o[0])==null?void 0:p.id;const n=L.get("frontendPath"),P=L.get("backendPath");n&&P&&(l.frontendPath=n,l.backendPath=P)}).then(()=>{}).finally(()=>{y.value=!1}),x(),(async()=>{try{const{data:d}=await se();d||(await ee().confirm("\u6A21\u677F\u53D1\u73B0\u65B0\u7248\u672C\uFF0C\u662F\u5426\u66F4\u65B0\uFF1F").catch(()=>!1)?(await me(),ae().success("\u66F4\u65B0\u6210\u529F"),x()):le.emit("onCurrentContextmenuClick",{contextMenuClickId:1,...K}))}catch(d){console.error("\u68C0\u67E5\u7248\u672C\u5931\u8D25",d)}})(),ie({type:"0"}).then(d=>{let o={id:"-1",name:"\u6839\u83DC\u5355",children:[]};o.children=d.data,S.push(o)})}),E({submitHandle:async()=>{try{return!!await k.value.validate()&&(y.value=!0,await de(Object.assign(l,g.value)),Z.value=!1,H("refreshDataList"),l)}catch{return Promise.reject()}finally{l.generatorType==="1"&&(L.set("frontendPath",l.frontendPath),L.set("backendPath",l.backendPath)),y.value=!1}}}),(m,r)=>{const d=i("el-input"),o=i("el-form-item"),n=i("el-col"),P=i("el-button"),p=i("el-row"),G=i("el-option"),J=i("el-select"),Q=i("el-tree-select"),f=i("el-radio"),T=i("el-radio-group"),W=i("el-form"),X=he("loading");return _e((V(),q(W,{model:t(l),rules:t(B),"label-width":"120px",ref_key:"dataFormRef",ref:k},{default:a(()=>[e(p,null,{default:a(()=>[e(n,{span:12,class:"mb20"},{default:a(()=>[e(p,null,{default:a(()=>[e(n,{span:20},{default:a(()=>[e(o,{label:"\u8868\u540D",prop:"tableName"},{default:a(()=>[e(d,{disabled:"",placeholder:"\u8868\u540D",value:t(M)},null,8,["value"])]),_:1})]),_:1}),e(n,{span:4},{default:a(()=>[e(P,{plain:"",icon:"Search",class:"ml10",onClick:r[0]||(r[0]=u=>t(D).openDialog(t(l)))},{default:a(()=>[c(" \u5B50\u8868")]),_:1}),e(t(A),{modelValue:t(g),"onUpdate:modelValue":r[1]||(r[1]=u=>ve(g)?g.value=u:null),ref_key:"childTableRef",ref:D},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(n,{span:12,class:"mb20"},{default:a(()=>[e(o,{label:"\u6CE8\u91CA",prop:"tableComment"},{default:a(()=>[e(d,{placeholder:"\u8BF4\u660E",modelValue:t(l).tableComment,"onUpdate:modelValue":r[2]||(r[2]=u=>t(l).tableComment=u)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(n,{span:12,class:"mb20"},{default:a(()=>[e(o,{label:"\u7C7B\u540D",prop:"className"},{default:a(()=>[e(d,{placeholder:"\u7C7B\u540D",modelValue:t(l).className,"onUpdate:modelValue":r[3]||(r[3]=u=>t(l).className=u)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12,class:"mb20"},{default:a(()=>[e(o,{label:"\u4F5C\u8005",prop:"author"},{default:a(()=>[e(d,{placeholder:"\u9ED8\u8BA4\u4F5C\u8005",modelValue:t(l).author,"onUpdate:modelValue":r[4]||(r[4]=u=>t(l).author=u)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(n,{span:12,class:"mb20"},{default:a(()=>[e(o,{label:"\u9879\u76EE\u5305\u540D",prop:"packageName"},{default:a(()=>[e(d,{placeholder:"\u9879\u76EE\u5305\u540D",modelValue:t(l).packageName,"onUpdate:modelValue":r[5]||(r[5]=u=>t(l).packageName=u)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12,class:"mb20"},{default:a(()=>[e(o,{prop:"moduleName"},{label:a(()=>[C,e(h,{content:"\u6240\u5C5E\u5FAE\u670D\u52A1\u6A21\u5757\u540D\u79F0\uFF0C\u5BF9\u5E94\u5FAE\u670D\u52A1\u8DEF\u7531\u524D\u7F00 \uFF08\u5355\u4F53\u56FA\u5B9A admin\uFF09"})]),default:a(()=>[e(d,{placeholder:"\u6A21\u5757\u540D",modelValue:t(l).moduleName,"onUpdate:modelValue":r[6]||(r[6]=u=>t(l).moduleName=u)},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(n,{span:12,class:"mb20"},{default:a(()=>[e(o,{prop:"functionName"},{label:a(()=>[I,e(h,{content:"\u5BF9\u5E94\u751F\u6210\u7684Controller @RequestMapping \u8BF7\u6C42\u8DEF\u5F84"})]),default:a(()=>[e(d,{placeholder:"\u529F\u80FD\u540D",modelValue:t(l).functionName,"onUpdate:modelValue":r[7]||(r[7]=u=>t(l).functionName=u)},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12,class:"mb20"},{default:a(()=>[e(o,{label:"\u4EE3\u7801\u98CE\u683C",prop:"style"},{default:a(()=>[e(J,{modelValue:t(l).style,"onUpdate:modelValue":r[8]||(r[8]=u=>t(l).style=u)},{default:a(()=>[(V(!0),ye(Ve,null,Ne(t($),(u,Y)=>(V(),q(G,{key:Y,label:u.groupName,value:u.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(n,{span:12,class:"mb20"},{default:a(()=>[e(o,{prop:"syncMenuId"},{label:a(()=>[c(" \u6240\u5C5E\u83DC\u5355 "),e(h,{content:`\u751F\u6210\u7684 \u3010${t(l).tableComment}\u7BA1\u7406\u3011\u83DC\u5355\u6302\u8F7D\u5728\u54EA\u4E2A\u76EE\u5F55\u4E0B `},null,8,["content"])]),default:a(()=>[e(Q,{filterable:"",modelValue:t(l).syncMenuId,"onUpdate:modelValue":r[9]||(r[9]=u=>t(l).syncMenuId=u),data:t(S),"render-after-expand":!1,props:{value:"id",label:"name",children:"children"},class:"w100",clearable:"","check-strictly":"",placeholder:m.$t("sysmenu.inputParentIdTip")},null,8,["modelValue","data","placeholder"])]),_:1})]),_:1}),e(n,{span:12,class:"mb20"},{default:a(()=>[e(o,{prop:"syncRoute"},{label:a(()=>[c(" \u540C\u6B65\u8DEF\u7531 "),e(h,{content:`\u5FAE\u670D\u52A1\u67B6\u6784\u4E0B\u4F1A\u81EA\u52A8\u521B\u5EFA\u4E00\u6761\u3010/${t(l).moduleName}\u3011\u7684\u7F51\u5173\u8DEF\u7531\uFF0C\u5B58\u5728\u5219\u8DF3\u8FC7`},null,8,["content"])]),default:a(()=>[e(T,{modelValue:t(l).syncRoute,"onUpdate:modelValue":r[10]||(r[10]=u=>t(l).syncRoute=u)},{default:a(()=>[e(f,{border:"",label:"0"},{default:a(()=>[c("\u624B\u52A8\u6DFB\u52A0")]),_:1}),e(f,{border:"",label:"1"},{default:a(()=>[c("\u81EA\u52A8\u521B\u5EFA")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(p,null,{default:a(()=>[e(n,{span:12,class:"mb20"},{default:a(()=>[e(o,{label:"\u8868\u5355\u5E03\u5C40",prop:"formLayout"},{default:a(()=>[e(T,{modelValue:t(l).formLayout,"onUpdate:modelValue":r[11]||(r[11]=u=>t(l).formLayout=u)},{default:a(()=>[e(f,{border:"",label:1},{default:a(()=>[c("\u4E00\u5217")]),_:1}),e(f,{border:"",label:2},{default:a(()=>[c("\u4E24\u5217")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12,class:"mb20"},{default:a(()=>[e(o,{label:"\u751F\u6210\u65B9\u5F0F",prop:"generatorType"},{default:a(()=>[e(T,{modelValue:t(l).generatorType,"onUpdate:modelValue":r[12]||(r[12]=u=>t(l).generatorType=u)},{default:a(()=>[e(f,{border:"",label:"1"},{default:a(()=>[c("\u81EA\u5B9A\u4E49\u8DEF\u5F84")]),_:1}),e(f,{border:"",label:"0"},{default:a(()=>[c("ZIP \u538B\u7F29\u5305")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24,class:"mb20"},{default:a(()=>[t(l).generatorType==="1"?(V(),q(o,{key:0,prop:"backendPath"},{label:a(()=>[R,e(h,{content:"\u540E\u7AEF\u6A21\u5757biz\u6240\u5728\u6587\u4EF6\u5168\u8DEF\u5F84\u6BD4\u5982\uFF1AD:\\data\\aibench\\aibench-upms\\aibench-upms-biz"})]),default:a(()=>[e(d,{placeholder:"\u540E\u7AEF\u751F\u6210\u8DEF\u5F84",modelValue:t(l).backendPath,"onUpdate:modelValue":r[13]||(r[13]=u=>t(l).backendPath=u)},null,8,["modelValue"])]),_:1})):O("",!0),t(l).generatorType==="1"?(V(),q(o,{key:1,prop:"frontendPath"},{label:a(()=>[w,e(h,{content:"\u524D\u7AEF\u6240\u5728\u6587\u4EF6\u5168\u8DEF\u5F84\u6BD4\u5982\uFF1AD:\\data\\aibench-ui"})]),default:a(()=>[e(d,{placeholder:"\u524D\u7AEF\u751F\u6210\u8DEF\u5F84",modelValue:t(l).frontendPath,"onUpdate:modelValue":r[14]||(r[14]=u=>t(l).frontendPath=u)},null,8,["modelValue"])]),_:1})):O("",!0)]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[X,t(y)]])}}}),[["__scopeId","data-v-7f25f5ab"]])});export{qe as __tla,z as default};
