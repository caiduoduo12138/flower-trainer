import{_ as g}from"./FlowNodeFormatData.vue_vue_type_script_setup_true_lang.d6a5f9c0.js";import{s as F,g as j}from"./index.943ec589.js";import{Z as h,au as k}from"./index.0f5ebb0a.js";import q from"./FormCreate.080cb3f5.js";import{p as E}from"./formPermissions.b77839a8.js";import{l as J,r as u,aa as i,m as L,q as M,L as l,E as r,u as m,j as I,t as P,I as y}from"./vue.4dfaac09.js";const R={class:"flex justify-center mt-4"},S=J({__name:"startFlow",setup(Z,{expose:N}){const o=u(),d=u({}),U=u([]),n=u(!1),p=u(),x=()=>{var t;if(!c.value.validate())return void h.warning("\u8BF7\u9009\u62E9\u8282\u70B9\u6267\u884C\u4EBA");let a=c.value.formatSelectNodeUser();for(const s in d.value)a[s]=d.value[s];const e={flowId:(t=p.value)==null?void 0:t.flowId,paramMap:a};o.value&&o.value.submit().then(()=>{F(e).then(()=>{h.success("\u63D0\u4EA4\u6210\u529F"),n.value=!1})})};N({handle:a=>{p.value=a,C(a)}});const V=u([]),C=a=>{j(a.flowId).then(e=>{const{data:t}=e,{formItems:s,formPerms:v={}}=t,_=k.formCreate.parseJson(s),w=E(_,v);U.value=w,V.value=t.selectUserNodeId,n.value=!0})},c=u(),b=()=>{d.value={},o.value&&o.value.resetFields(),p.value=void 0};return(a,e)=>{const t=i("el-form"),s=i("el-button"),v=i("el-col"),_=i("el-row"),w=i("el-dialog");return L(),M("div",null,[l(w,{modelValue:m(n),"onUpdate:modelValue":e[3]||(e[3]=f=>I(n)?n.value=f:null),title:"\u53D1\u8D77\u6D41\u7A0B",width:"800px","destroy-on-close":"",onClosed:b},{default:r(()=>[l(_,null,{default:r(()=>[l(v,{span:12},{default:r(()=>[l(t,{"label-position":"top"},{default:r(()=>[l(q,{rule:m(U),modelValue:m(d),"onUpdate:modelValue":e[0]||(e[0]=f=>I(d)?d.value=f:null),api:m(o),"onUpdate:api":e[1]||(e[1]=f=>I(o)?o.value=f:null)},null,8,["rule","modelValue","api"])]),_:1}),P("div",R,[l(s,{onClick:e[2]||(e[2]=f=>n.value=!1)},{default:r(()=>[y("\u53D6\u6D88")]),_:1}),l(s,{type:"primary",onClick:x},{default:r(()=>[y(" \u63D0\u4EA4")]),_:1})])]),_:1}),l(v,{span:12},{default:r(()=>[l(g,{selectUserNodeId:m(V),"flow-id":m(p).flowId,ref_key:"flowNodeFormatRef",ref:c},null,8,["selectUserNodeId","flow-id"])]),_:1})]),_:1})]),_:1},8,["modelValue"])])}}});export{S as _};
