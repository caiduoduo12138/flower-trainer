import{d as q,r as c,u as h}from"./index.0f5ebb0a.js";import{v as F,a as $,p as j,b as D,g as R}from"./post.2e109efd.js";import{l as v,r as g,R as E,aa as m,ah as J,m as V,D as k,E as d,t as O,L as r,I as y,J as T,u as e,F as P,j as z,n as A}from"./vue.4dfaac09.js";const G={class:"dialog-footer"},H=v({name:"systemPostDialog"}),K=v({...H,emits:["refresh"],setup(M,{expose:x,emit:C}){const I=C,{t:s}=q(),b=g(),u=g(!1),i=g(!1),a=E({postId:"",postCode:"",postName:"",postSort:0,remark:"",delFlag:"",createTime:"",createBy:"",updateTime:"",updateBy:""}),S=g({postCode:[{validator:c.overLength,trigger:"blur"},{required:!0,message:"\u5C97\u4F4D\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:(o,t,p)=>{F(o,t,p,a.postId!=="")},trigger:"blur"}],postName:[{validator:c.overLength,trigger:"blur"},{required:!0,message:"\u5C97\u4F4D\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:(o,t,p)=>{$(o,t,p,a.postId!=="")},trigger:"blur"}],postSort:[{validator:c.overLength,trigger:"blur"},{required:!0,message:"\u5C97\u4F4D\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],remark:[{validator:c.overLength,trigger:"blur"},{required:!0,message:"\u5C97\u4F4D\u63CF\u8FF0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),_=async()=>{if(!await b.value.validate().catch(()=>{}))return!1;try{i.value=!0,a.postId?await j(a):await D(a),h().success(s(a.postId?"common.editSuccessText":"common.addSuccessText")),u.value=!1,I("refresh")}catch(o){h().error(o.msg)}finally{i.value=!1}},N=o=>{R(o).then(t=>{Object.assign(a,t.data)})};return x({openDialog:o=>{u.value=!0,a.postId="",A(()=>{var t;(t=b.value)==null||t.resetFields()}),o&&(a.postId=o,N(o))}}),(o,t)=>{const p=m("el-input"),n=m("el-form-item"),w=m("el-input-number"),B=m("el-form"),f=m("el-button"),L=m("el-dialog"),U=J("loading");return V(),k(L,{title:e(a).postId?o.$t("common.editBtn"):o.$t("common.addBtn"),modelValue:e(u),"onUpdate:modelValue":t[5]||(t[5]=l=>z(u)?u.value=l:null),width:"600","close-on-click-modal":!1,draggable:""},{footer:d(()=>[O("span",G,[r(f,{onClick:t[4]||(t[4]=l=>u.value=!1)},{default:d(()=>[y(T(o.$t("common.cancelButtonText")),1)]),_:1}),r(f,{type:"primary",onClick:_,disabled:e(i)},{default:d(()=>[y(T(o.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:d(()=>[P((V(),k(B,{ref_key:"dataFormRef",ref:b,model:e(a),rules:e(S),"label-width":"90px"},{default:d(()=>[r(n,{label:e(s)("post.postCode"),prop:"postCode"},{default:d(()=>[r(p,{modelValue:e(a).postCode,"onUpdate:modelValue":t[0]||(t[0]=l=>e(a).postCode=l),placeholder:e(s)("post.inputpostCodeTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:e(s)("post.postName"),prop:"postName"},{default:d(()=>[r(p,{modelValue:e(a).postName,"onUpdate:modelValue":t[1]||(t[1]=l=>e(a).postName=l),placeholder:e(s)("post.inputpostNameTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:e(s)("post.postSort"),prop:"postSort"},{default:d(()=>[r(w,{modelValue:e(a).postSort,"onUpdate:modelValue":t[2]||(t[2]=l=>e(a).postSort=l),placeholder:e(s)("post.inputpostSortTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(n,{label:e(s)("post.remark"),prop:"remark"},{default:d(()=>[r(p,{type:"textarea",maxlength:"100",row:"3",modelValue:e(a).remark,"onUpdate:modelValue":t[3]||(t[3]=l=>e(a).remark=l),placeholder:e(s)("post.inputremarkTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[U,e(i)]])]),_:1},8,["title","modelValue"])}}});export{K as default};
