import{l as te,aA as N,aC as z,aD as le,aE as oe,aF as ne,aG as ce,aH as re,Z as x,u as H,aI as T,b as ie,_ as se,__tla as de}from"./index.0f5ebb0a.js";import{l as D,R as ue,r as pe,as as fe,ap as me,h as we,aa as r,m as f,q as E,t as _,L as e,E as l,P,u as n,I as y,J as k,K as he,$ as ge,D as b,H as R,A as _e,av as ye}from"./vue.4dfaac09.js";import{q as ke,a as be,b as ve,d as Ce}from"./index.e40e0854.js";import{d as Ie,e as xe,b as Te}from"./index.943ec589.js";import{u as Se}from"./table.6d12d51c.js";let A,$e=Promise.all([(()=>{try{return de}catch{}})()]).then(async()=>{let S,$,U,q,B;S={class:"layout-padding"},$={class:"layout-padding-auto layout-padding-view"},U={class:"flex justify-start"},q={class:"card-header"},B=D({name:"flowGroup"}),A=se(D({...B,setup(Ue){const F=te(),d=ue({queryForm:{groupId:""},pagination:{size:5,current:1},createdIsNeed:!1,pageList:t=>(m&&!d.queryForm.groupId&&(t.groupId=m.value[0].id),be(t)),descs:["create_time"]}),{getDataList:v,sizeChangeHandle:G,currentChangeHandle:O,tableStyle:L}=Se(d),V=ye(()=>ie(()=>import("./index.5332311b.js"),["assets/index.5332311b.js","assets/vue.4dfaac09.js","assets/index.2c4f7de9.js"])),m=pe([]),Z=t=>{t&&ve({groupName:t}).then(()=>{x.success("\u65B0\u589E\u6210\u529F"),w()})},j=t=>{m&&(d.queryForm.groupId=m.value[t.paneName].id),v()},J=t=>I.value.length===0||!I.value.find(u=>u.path.includes(t.flowId)),C=fe(),{favoriteRoutes:I}=me(F);we(()=>{w()});const w=()=>{ke().then(t=>{const{data:u}=t;m.value=u,u.length>0&&v()})};return(t,u)=>{const i=r("el-button"),K=r("el-row"),p=r("el-tooltip"),h=r("el-table-column"),M=r("upload-img"),Q=r("el-tag"),W=r("el-table"),X=r("pagination"),Y=r("el-tab-pane"),ee=r("el-tabs");return f(),E("div",S,[_("div",$,[e(K,{shadow:"hover",class:"mt-4 ml-8"},{default:l(()=>[_("div",U,[e(i,{class:"button",onClick:u[0]||(u[0]=P(g=>(a=>{let c="/flow/create/all";a&&(c=c+"?groupId="+a),C.push(c)})(void 0),["stop"])),type:"primary",icon:n(N)},{default:l(()=>[y(k(t.$t("flow.creationProcess")),1)]),_:1},8,["icon"]),e(n(V),{onConfirm:Z,class:"ml-4"},{default:l(()=>[e(i,{icon:n(N)},{default:l(()=>[y(k(t.$t("flow.creationGroup")),1)]),_:1},8,["icon"])]),_:1})])]),_:1}),e(ee,{class:"mt-4 ml-8",onTabClick:j},{default:l(()=>[(f(!0),E(he,null,ge(n(m),g=>(f(),b(Y,{label:g.groupName,key:g.id},{label:l(()=>[_("div",q,[_("span",null,k(g.groupName),1),_("span",null,[e(p,{effect:"dark",content:"\u5220\u9664",placement:"top"},{default:l(()=>[e(i,{text:"",icon:n(z),onClick:P(a=>(async c=>{var o;d.queryForm.groupId=c,await v(),((o=d.pagination)==null?void 0:o.total)>0?x.warning("\u5220\u9664\u5931\u8D25,\u5B58\u5728\u53EF\u7528\u6D41\u7A0B"):Ce(c).then(()=>{x.success("\u5220\u9664\u6210\u529F"),w()})})(g.id),["stop"]),circle:""},null,8,["icon","onClick"])]),_:2},1024)])])]),default:l(()=>[e(W,{data:n(d).dataList,style:{width:"100%"},border:"","cell-style":n(L).cellStyle,"header-cell-style":n(L).headerCellStyle},{default:l(()=>[e(h,{prop:"flowId",label:"#",width:"250"}),e(h,{prop:"logo",label:t.$t("flow.logo"),width:"80","show-overflow-tooltip":""},{default:l(({row:a})=>[e(M,{disabled:"",imageUrl:a.logo,"onUpdate:imageUrl":c=>a.logo=c,width:"50px",height:"50px"},null,8,["imageUrl","onUpdate:imageUrl"])]),_:1},8,["label"]),e(h,{prop:"name",label:t.$t("flow.name"),"show-overflow-tooltip":""},{default:l(({row:a})=>[y(k(a.name)+" ",1),a.stop==="1"?(f(),b(Q,{key:0,type:"danger"},{default:l(()=>[y("\u5DF2\u505C\u7528")]),_:1})):R("",!0)]),_:1},8,["label"]),e(h,{prop:"createTime",label:t.$t("flow.createTime"),"show-overflow-tooltip":""},null,8,["label"]),e(h,{prop:"rangeShow",label:t.$t("flow.scopeOfUse"),"show-overflow-tooltip":""},{default:l(({row:a})=>[y(k(a.rangeShow&&a.rangeShow.length>0?a.rangeShow:t.$t("flow.allUser")),1)]),_:1},8,["label"]),e(h,{label:t.$t("common.action"),width:"300"},{default:l(({row:a})=>[J(a)?(f(),b(p,{key:0,effect:"dark",content:"\u6536\u85CF\u81F3\u9996\u9875\u5BFC\u822A",placement:"top"},{default:l(()=>[e(i,{text:"",onClick:c=>(o=>{const s={name:o.name,path:"/flow/list/index?flowId="+o.flowId,meta:{icon:"fa fa-play"}};I.value.find(ae=>ae.path===s.path)?H().error("\u5DF2\u7ECF\u5B58\u5728\u6536\u85CF"):(F.setFavoriteRoutes(s),H().success("\u6536\u85CF\u6210\u529F\uFF0C\u53EF\u5728\u9996\u9875\u76F4\u63A5\u53D1\u8D77\u6D41\u7A0B"))})(a),icon:n(le),circle:""},null,8,["onClick","icon"])]),_:2},1024)):R("",!0),e(p,{effect:"dark",content:"\u7F16\u8F91",placement:"top"},{default:l(()=>[e(i,{text:"",onClick:c=>(o=>{let s="/flow/create/all?flowId="+o.flowId;C.push(s)})(a),icon:n(oe),circle:""},null,8,["onClick","icon"])]),_:2},1024),e(p,{effect:"dark",content:"\u590D\u5236",placement:"top"},{default:l(()=>[e(i,{text:"",onClick:c=>(o=>{let s="/flow/create/all?cp=1&flowId="+o.flowId;C.push(s)})(a),icon:n(ne),circle:""},null,8,["onClick","icon"])]),_:2},1024),a.stop==="0"?(f(),b(p,{key:1,effect:"dark",content:"\u505C\u7528",placement:"top"},{default:l(()=>[e(i,{onClick:c=>{return o=a,void T.confirm("\u786E\u5B9A\u8981\u505C\u7528\u8BE5\u6D41\u7A0B\u5417?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{Ie(o.flowId).then(s=>{w()})});var o},text:"",icon:n(ce),circle:""},null,8,["onClick","icon"])]),_:2},1024)):(f(),b(p,{key:2,effect:"dark",content:"\u542F\u7528",placement:"top"},{default:l(()=>[e(i,{onClick:c=>{return o=a,void T.confirm("\u786E\u5B9A\u8981\u542F\u7528\u8BE5\u6D41\u7A0B\u5417?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{xe(o.flowId).then(s=>{w()})});var o},text:"",icon:n(re),circle:""},null,8,["onClick","icon"])]),_:2},1024)),e(p,{effect:"dark",content:"\u5220\u9664",placement:"top"},{default:l(()=>[e(i,{text:"",onClick:c=>{return o=a,void T.confirm("\u786E\u5B9A\u8981\u5220\u9664\u8BE5\u6D41\u7A0B\u5417?","\u63D0\u793A",{confirmButtonText:"\u786E\u5B9A",cancelButtonText:"\u53D6\u6D88",type:"warning"}).then(()=>{Te(o.flowId).then(s=>{w()})});var o},icon:n(z),circle:""},null,8,["onClick","icon"])]),_:2},1024)]),_:1},8,["label"])]),_:1},8,["data","cell-style","header-cell-style"]),e(X,_e({onSizeChange:n(G),onCurrentChange:n(O)},n(d).pagination),null,16,["onSizeChange","onCurrentChange"])]),_:2},1032,["label"]))),128))]),_:1})])])}}}),[["__scopeId","data-v-fa887cc8"]])});export{$e as __tla,A as default};
