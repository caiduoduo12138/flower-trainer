import{u as C}from"./dict.10eb31b5.js";import{d as E,r as J,u as V}from"./index.0f5ebb0a.js";import{p as K,a as L,g as O}from"./appsocial.b189d443.js";import{l as v,r as f,R as z,aa as s,ah as G,m as b,D as h,E as t,t as H,L as p,I as x,J as U,u as e,F as M,q as N,K as P,$ as Q,j as W,n as X}from"./vue.4dfaac09.js";const Y={class:"dialog-footer"},Z=v({name:"AppSocialDetailsDialog"}),ee=v({...Z,emits:["refresh"],setup(le,{expose:I,emit:S}){const T=S,{t:o}=E(),g=f(),u=f(!1),n=f(!1),{app_social_type:k}=C("app_social_type"),l=z({id:"",type:"",remark:"",appId:"",appSecret:"",redirectUrl:"",ext:""}),q=f({type:[{required:!0,message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],appId:[{required:!0,message:"appId\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],appSecret:[{required:!0,message:"app\u79D8\u94A5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],redirectUrl:[{required:!0,message:"\u56DE\u8C03\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:J.url,trigger:"blur"}]}),w=async()=>{var d,a;if(!await g.value.validate().catch(()=>{}))return!1;l.appSecret=(d=l.appSecret)!=null&&d.includes("******")?void 0:l.appSecret,l.appId=(a=l.appId)!=null&&a.includes("******")?void 0:l.appId;try{n.value=!0,l.id?(await K(l),V().success(o("common.editSuccessText"))):(await L(l),V().success(o("common.addSuccessText"))),u.value=!1,T("refresh")}catch(_){V().error(_.msg)}finally{n.value=!1}},D=d=>{O(d).then(a=>{Object.assign(l,a.data)})};return I({openDialog:d=>{u.value=!0,l.id="",X(()=>{var a;(a=g.value)==null||a.resetFields()}),d&&(l.id=d,D(d))}}),(d,a)=>{const _=s("el-option"),R=s("el-select"),i=s("el-form-item"),c=s("el-col"),m=s("el-input"),$=s("el-row"),B=s("el-form"),y=s("el-button"),A=s("el-dialog"),F=G("loading");return b(),h(A,{"close-on-click-modal":!1,title:e(l).id?d.$t("common.editBtn"):d.$t("common.addBtn"),draggable:"",modelValue:e(u),"onUpdate:modelValue":a[7]||(a[7]=r=>W(u)?u.value=r:null)},{footer:t(()=>[H("span",Y,[p(y,{onClick:a[6]||(a[6]=r=>u.value=!1)},{default:t(()=>[x(U(d.$t("common.cancelButtonText")),1)]),_:1}),p(y,{onClick:w,type:"primary",disabled:e(n)},{default:t(()=>[x(U(d.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:t(()=>[M((b(),h(B,{model:e(l),rules:e(q),formDialogRef:"","label-width":"90px",ref_key:"dataFormRef",ref:g},{default:t(()=>[p($,{gutter:20},{default:t(()=>[p(c,{span:12,class:"mb20"},{default:t(()=>[p(i,{label:e(o)("appsocial.type"),prop:"type"},{default:t(()=>[p(R,{placeholder:e(o)("appsocial.inputTypeTip"),modelValue:e(l).type,"onUpdate:modelValue":a[0]||(a[0]=r=>e(l).type=r)},{default:t(()=>[(b(!0),N(P,null,Q(e(k),(r,j)=>(b(),h(_,{key:j,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),p(c,{span:12,class:"mb20"},{default:t(()=>[p(i,{label:e(o)("appsocial.remark"),prop:"remark"},{default:t(()=>[p(m,{placeholder:e(o)("appsocial.inputRemarkTip"),modelValue:e(l).remark,"onUpdate:modelValue":a[1]||(a[1]=r=>e(l).remark=r)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),p(c,{span:12,class:"mb20"},{default:t(()=>[p(i,{label:e(o)("appsocial.appId"),prop:"appId"},{default:t(()=>[p(m,{placeholder:e(o)("appsocial.inputAppIdTip"),modelValue:e(l).appId,"onUpdate:modelValue":a[2]||(a[2]=r=>e(l).appId=r)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),p(c,{span:12,class:"mb20"},{default:t(()=>[p(i,{label:e(o)("appsocial.appSecret"),prop:"appSecret"},{default:t(()=>[p(m,{placeholder:e(o)("appsocial.inputAppSecretTip"),modelValue:e(l).appSecret,"onUpdate:modelValue":a[3]||(a[3]=r=>e(l).appSecret=r)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),p(c,{span:24,class:"mb20"},{default:t(()=>[p(i,{label:e(o)("appsocial.redirectUrl"),prop:"redirectUrl"},{default:t(()=>[p(m,{placeholder:e(o)("appsocial.inputRedirectUrlTip"),type:"textarea",modelValue:e(l).redirectUrl,"onUpdate:modelValue":a[4]||(a[4]=r=>e(l).redirectUrl=r)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),p(c,{span:24,class:"mb20"},{default:t(()=>[p(i,{label:e(o)("appsocial.ext"),prop:"ext"},{default:t(()=>[p(m,{placeholder:e(o)("appsocial.inputExtTip"),type:"textarea",modelValue:e(l).ext,"onUpdate:modelValue":a[5]||(a[5]=r=>e(l).ext=r)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[F,e(n)]])]),_:1},8,["title","modelValue"])}}});export{ee as default};
