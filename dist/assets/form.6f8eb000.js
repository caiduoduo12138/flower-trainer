import{d as b,r as i,v}from"./index.0f5ebb0a.js";import{v as n,g as c,p as F}from"./index.97aa2129.js";import{l as o,r as m,R as u,n as h}from"./vue.4dfaac09.js";import"./loading.50b2b84c.js";const I=o({name:"systemMenuDialog"}),q=o({...I,emits:["refresh"],setup(f,{expose:l,emit:y}){b();const s=m(!1);m(!1);const g=m(),r=u({ruleForm:{menuId:"",name:"",permission:"",parentId:"",icon:"",path:"",param:"0",component:"",sortOrder:0,menuType:"1",keepAlive:"0",visible:"1",embedded:"0"},parentData:[]});u({menuType:[{required:!0,message:"\u83DC\u5355\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],parentId:[{required:!0,message:"\u4E0A\u7EA7\u83DC\u5355\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],name:[{validator:i.overLength,trigger:"blur"},{required:!0,message:"\u83DC\u5355\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:(a,e,t)=>{n(a,e,t,r.ruleForm.menuId!==""||r.ruleForm.menuType==="1")},trigger:"blur"}],path:[{validator:i.overLength,trigger:"blur"},{required:!0,message:"\u8DEF\u5F84\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],icon:[{validator:i.overLength,trigger:"blur"},{required:!0,message:"\u56FE\u6807\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],permission:[{validator:i.overLength,trigger:"blur"},{required:!0,message:"\u6743\u9650\u4EE3\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:(a,e,t)=>{n(a,e,t,r.ruleForm.menuId!=="")},trigger:"blur"}],sortOrder:[{required:!0,message:"\u6392\u5E8F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],component:[{min:5,max:255,message:"\u7EC4\u4EF6\u540D\u79F0\u957F\u5EA6\u5FC5\u987B\u4ECB\u4E8E 5 \u548C 255 \u4E4B\u95F4",trigger:"blur"},{validator:(a,e,t)=>{if(r.ruleForm.menuType!=="0"||r.ruleForm.param!=="1"||!v(r.ruleForm.component))return t();t(new Error("\u8BF7\u8F93\u5165\u7EC4\u4EF6\u540D\u79F0"))},trigger:"blur"}]});const d=a=>{c({menuId:a}).then(e=>{e.data[0].component&&(r.ruleForm.param="1"),Object.assign(r.ruleForm,e.data[0])})},p=()=>{r.parentData=[],F({type:"0"}).then(a=>{let e={id:"-1",name:"\u6839\u83DC\u5355",children:[]};e.children=a.data,r.parentData.push(e)})};return l({openDialog:(a,e)=>{r.ruleForm.menuId="",s.value=!0,h(()=>{var t;(t=g.value)==null||t.resetFields(),r.ruleForm.parentId=(e==null?void 0:e.id)||"-1"}),e!=null&&e.id&&a==="edit"&&(r.ruleForm.menuId=e.id,d(e.id)),p()}}),(a,e)=>null}});export{q as default};
