import{u as G}from"./table.6d12d51c.js";import{s as L,d as K,y as O,u as I}from"./index.0f5ebb0a.js";import{u as P}from"./dict.10eb31b5.js";import{l as T,r as d,R as W,aa as r,ah as k,m as c,D as g,E as i,t as D,L as l,F as m,u as e,I as w,J as j,j as $,A as X}from"./vue.4dfaac09.js";function Y(_){return L({url:"/job/sys-job-log/page",method:"get",params:_})}const Z={class:"layout-padding-auto layout-padding-view"},ee={class:"mb8",style:{width:"100%"}},le=T({name:"job-log"}),oe=T({...le,setup(_,{expose:z}){const{t}=K(),p=d(!1),{job_execute_status:B}=P("job_type","job_execute_status"),F=d(),b=d(!0),v=d([]),C=d(!0),u=W({queryForm:{jobId:""},pageList:Y,createdIsNeed:!1}),{getDataList:h,currentChangeHandle:N,sizeChangeHandle:V,tableStyle:x}=G(u),q=a=>{v.value=a.map(({jobLogId:o})=>o),C.value=!a.length},S=async a=>{try{await O().confirm(t("common.delConfirmText"))}catch{return}try{await function(o){return L({url:"/job/sys-job-log",method:"delete",data:o})}(a),h(),I().success(t("common.delSuccessText"))}catch(o){I().error(o.msg)}};return z({openDialog:a=>{p.value=!0,u.queryForm.jobId=a,h()}}),(a,o)=>{const y=r("el-button"),H=r("right-toolbar"),M=r("el-row"),n=r("el-table-column"),Q=r("dict-tag"),R=r("el-table"),U=r("pagination"),A=r("el-dialog"),f=k("auth"),E=k("loading");return c(),g(A,{modelValue:e(p),"onUpdate:modelValue":o[2]||(o[2]=s=>$(p)?p.value=s:null),"close-on-click-modal":!1,fullscreen:"",title:"\u8FD0\u884C\u65E5\u5FD7",draggable:""},{default:i(()=>[D("div",Z,[l(M,null,{default:i(()=>[D("div",ee,[m((c(),g(y,{formDialogRef:"",disabled:e(C),icon:"Delete",type:"primary",class:"ml10",onClick:o[0]||(o[0]=s=>S(e(v)))},{default:i(()=>[w(j(a.$t("common.delBtn")),1)]),_:1},8,["disabled"])),[[f,"sys_log_del"]]),l(H,{showSearch:e(b),"onUpdate:showSearch":o[1]||(o[1]=s=>$(b)?b.value=s:null),class:"ml10",style:{float:"right","margin-right":"20px"},onQueryTable:e(h)},null,8,["showSearch","onQueryTable"])])]),_:1}),m((c(),g(R,{data:e(u).dataList,style:{width:"100%"},onSelectionChange:q,border:"","cell-style":e(x).cellStyle,"header-cell-style":e(x).headerCellStyle},{default:i(()=>[l(n,{type:"selection",width:"40",align:"center"}),l(n,{type:"index",label:e(t)("log.index"),width:"80"},null,8,["label"]),l(n,{prop:"jobName",label:e(t)("log.jobName"),"show-overflow-tooltip":""},null,8,["label"]),l(n,{prop:"jobMessage",label:e(t)("log.jobMessage"),"show-overflow-tooltip":""},null,8,["label"]),l(n,{prop:"jobLogStatus",label:e(t)("log.jobLogStatus"),"show-overflow-tooltip":""},{default:i(s=>[l(Q,{options:e(B),value:s.row.jobLogStatus},null,8,["options","value"])]),_:1},8,["label"]),l(n,{prop:"executeTime",label:e(t)("log.executeTime"),"show-overflow-tooltip":""},null,8,["label"]),l(n,{prop:"exceptionInfo",label:e(t)("log.exceptionInfo"),"show-overflow-tooltip":""},null,8,["label"]),l(n,{prop:"createTime",label:e(t)("log.createTime"),"show-overflow-tooltip":""},null,8,["label"]),l(n,{label:a.$t("common.action"),width:"150"},{default:i(s=>[m((c(),g(y,{text:"",type:"primary",onClick:J=>e(F).openDialog(s.row.jobLogId)},{default:i(()=>[w(j(a.$t("common.editBtn")),1)]),_:2},1032,["onClick"])),[[f,"aibench_log_edit"]]),m((c(),g(y,{text:"",type:"primary",onClick:J=>S([s.row.jobLogId])},{default:i(()=>[w(j(a.$t("common.delBtn")),1)]),_:2},1032,["onClick"])),[[f,"sys_log_del"]])]),_:1},8,["label"])]),_:1},8,["data","cell-style","header-cell-style"])),[[E,e(u).loading]]),l(U,X({onSizeChange:e(V),onCurrentChange:e(N)},e(u).pagination),null,16,["onSizeChange","onCurrentChange"])])]),_:1},8,["modelValue"])}}});export{oe as default};
