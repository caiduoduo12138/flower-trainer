import{d as C,u as p}from"./index.0f5ebb0a.js";import{p as R,a as S}from"./wx-account-tag.dbdd693e.js";import{l as g,r as m,R as U,aa as s,ah as E,m as x,D as v,E as o,t as I,L as c,I as w,J as A,u as e,F as J,j as L}from"./vue.4dfaac09.js";const O={class:"dialog-footer"},W=g({name:"WxAccountTagDialog"}),q=g({...W,emits:["refresh"],setup(z,{expose:T,emit:b}){const h=b,{t:d}=C(),n=m(),u=m(!1),i=m(!1),a=U({wxAccountAppid:"",tag:"",id:""}),_=m({}),y=async()=>{if(!await n.value.validate().catch(()=>{}))return!1;i.value=!0;try{a.id?(await R(a),p().success(d("common.editSuccessText"))):(await S(a),p().success(d("common.addSuccessText"))),u.value=!1,h("refresh")}catch(l){p().error(l.msg)}finally{i.value=!1}};return T({openDialog:(l,t)=>{u.value=!0,a.wxAccountAppid="",a.tag="",a.id="",n.value&&n.value.resetFields(),l&&Object.assign(a,l),a.wxAccountAppid=t}}),(l,t)=>{const V=s("el-input"),k=s("el-form-item"),B=s("el-col"),$=s("el-row"),j=s("el-form"),f=s("el-button"),D=s("el-dialog"),F=E("loading");return x(),v(D,{modelValue:e(u),"onUpdate:modelValue":t[2]||(t[2]=r=>L(u)?u.value=r:null),"close-on-click-modal":!1,title:e(a).id?l.$t("common.editBtn"):l.$t("common.addBtn"),draggable:""},{footer:o(()=>[I("span",O,[c(f,{onClick:t[1]||(t[1]=r=>u.value=!1)},{default:o(()=>[w(A(l.$t("common.cancelButtonText")),1)]),_:1}),c(f,{type:"primary",onClick:y,disabled:e(i)},{default:o(()=>[w(A(l.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:o(()=>[J((x(),v(j,{ref_key:"dataFormRef",ref:n,model:e(a),rules:e(_),"label-width":"90px"},{default:o(()=>[c($,{gutter:24},{default:o(()=>[c(B,{span:24,class:"mb20"},{default:o(()=>[c(k,{label:e(d)("wxAccountTag.tag"),prop:"tag"},{default:o(()=>[c(V,{modelValue:e(a).tag,"onUpdate:modelValue":t[0]||(t[0]=r=>e(a).tag=r),placeholder:e(d)("wxAccountTag.inputTagTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[F,e(i)]])]),_:1},8,["modelValue","title"])}}});export{q as default};
