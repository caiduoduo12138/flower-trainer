import{d as S,S as u,u as T,v as Q,z as j,F as q,w as z,k as B}from"./index.0f5ebb0a.js";import{l as k,r as f,h as F,a as H,aa as l,u as c,m,q as w,L as s,E as n,K as J,$ as K,D as y,t as g,J as b,H as h,ap as L}from"./vue.4dfaac09.js";import{f as N}from"./tenant.bfd983bb.js";const O={key:0},$={class:"flex items-center justify-center w-48 px-3 py-2 mx-auto space-x-2 text-sm text-gray-600 transition-colors duration-200 rounded-lg cursor-pointer dark:text-slate-300 hover:bg-gray-100 dark:hover:bg-slate-700"},G={class:"font-medium dark:text-slate-300"},M={class:"font-medium dark:text-slate-300"},P=k({name:"tenant"}),R=k({...P,setup(U){const{t:x}=S(),p=f(!1),o=f([]),d=f(null),v=a=>{u.set("tenantId",a.id),j.set("tenantId",a.id),q.set("tenantId",a.id),window.location.reload()};F(async()=>{await(async()=>{try{const a=await N();o.value=a.data}catch{T().error(x("tenantSelect.loadError"))}})(),d.value=u.getTenant(),p.value&&(()=>{const a=window.location.host,e=o.value.find(t=>!Q(t.tenantDomain)&&a===t.tenantDomain);e&&u.getTenant()!==e.id&&v(e)})(),(()=>{const a=z(B),{themeConfig:e}=L(a),t=o.value.find(r=>r.id===d.value);t&&(e.value.globalTitle=t.websiteName||"\u6A21\u578B\u8BAD\u7EC3",e.value.footerAuthor=t.footer||"",e.value.background=t.background||"",e.value.miniQr=t.miniQr||""),u.set("tenantId",d.value)})()});const _=H(()=>{const a=o.value.find(e=>e.id===d.value);return(a==null?void 0:a.name)||x("tenantSelect.select")});return(a,e)=>{const t=l("ele-OfficeBuilding"),r=l("el-icon"),D=l("ele-ArrowDown"),I=l("ele-Check"),A=l("el-dropdown-item"),C=l("el-dropdown-menu"),E=l("el-dropdown");return c(p)?h("",!0):(m(),w("div",O,[s(E,{trigger:"click",placement:"bottom",onCommand:v},{dropdown:n(()=>[s(C,{class:"!p-2 !min-w-[12rem] dark:!bg-slate-800 dark:!border-slate-700"},{default:n(()=>[(m(!0),w(J,null,K(c(o),i=>(m(),y(A,{key:i.id,command:i,class:"!flex !items-center !space-x-2 !rounded !px-3 !text-gray-700 dark:!text-slate-300 hover:!bg-gray-100 dark:hover:!bg-slate-700"},{default:n(()=>[s(r,null,{default:n(()=>[s(t,{class:"text-gray-400 dark:text-slate-400"})]),_:1}),g("span",M,b(i.name),1),i.id===c(d)?(m(),y(r,{key:0,class:"ml-auto text-blue-500"},{default:n(()=>[s(I)]),_:1})):h("",!0)]),_:2},1032,["command"]))),128))]),_:1})]),default:n(()=>[g("div",$,[s(r,null,{default:n(()=>[s(t,{class:"text-gray-400 dark:text-slate-400"})]),_:1}),g("span",G,b(c(_)),1),s(r,null,{default:n(()=>[s(D,{class:"text-gray-400 dark:text-slate-400"})]),_:1})])]),_:1})]))}}});export{R as default};
