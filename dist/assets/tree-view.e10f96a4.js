import{d as V,w as X,y as Y,ab as j,u as c,S as q,aa as A,b as K,_ as M,__tla as B}from"./index.0f5ebb0a.js";import{g as F}from"./tenant.bfd983bb.js";import{l as v,R as m,r as n,ap as G,a as H,h as J,aa as Q,m as U,q as W,t as Z,L as h,u as t,K as $,av as ee}from"./vue.4dfaac09.js";let _,ae=Promise.all([(()=>{try{return B}catch{}})()]).then(async()=>{let p,u;p={style:{height:"100%"}},u=v({name:"treeView"}),_=M(v({...u,setup(te,{expose:x}){const w=ee(()=>K(()=>import("./form.f5653dd7.js"),["assets/form.f5653dd7.js","assets/index.0f5ebb0a.js","assets/vue.4dfaac09.js","assets/index.3d43c53c.css"])),{t:l}=V(),T=m({id:"id",pid:"parentId",label:"name",expand:"expand",children:"children"}),d=m({}),k=m([{name:l("sysdept.addNodeText"),command:"add"},{name:l("sysdept.editNodeText"),command:"edit"},{name:l("sysdept.delNodeText"),command:"delete"}]),D=n(!0),r=n(!1),O=n(2),E=n(!1),N=n(!1),f=n(),s=n(),R=X(),{themeConfig:y}=G(R),C=H(()=>({background:y.value.isDark?"var(--el-bg-color-overlay)":"var(--el-bg-color-page)",color:y.value.isDark?"var(--el-text-color-primary)":"#5e6d82"})),I=(e,a)=>!e||a.label.indexOf(e)!==-1,b=e=>(e==null?void 0:e.id)!=="0"||(c().error(l("sysdept.tenantNodeErrorText")),!1),z=e=>{const{clientX:a,clientY:i}=e,g=new MouseEvent("contextmenu",{bubbles:!0,cancelable:!1,view:window,button:2,buttons:0,clientX:a,clientY:i});e.target.dispatchEvent(g)},L=e=>{s.value.openDialog("add",e==null?void 0:e.id)},P=e=>{b(e)&&s.value.openDialog("edit",e==null?void 0:e.id)},S=async e=>{if(b(e)){try{await Y().confirm(l("common.delConfirmText"))}catch{return}try{await j(e.id),await o(),c().success(l("common.delSuccessText"))}catch(a){c().error(a.msg)}}},o=async()=>{const e=await F(q.getTenant());A().then(a=>{Object.assign(d,{id:"0",name:e.data.name}),d.children=a.data})};return J(()=>{o()}),x({getOrgData:o,handleExpand:async()=>{r.value=!r.value},filter:e=>{f.value.filter(e)}}),(e,a)=>{const i=Q("vue3-tree-org");return U(),W($,null,[Z("div",p,[h(i,{ref_key:"treeOrgRef",ref:f,props:t(T),data:t(d),"label-style":t(C),"define-menus":t(k),"default-expand-level":t(O),center:"",horizontal:t(E),collapsable:t(r),"only-one-node":t(N),"filter-node-method":I,"clone-node-drag":t(D),"node-add":L,"node-delete":S,"node-edit":P,onOnNodeClick:z},null,8,["props","data","label-style","define-menus","default-expand-level","horizontal","collapsable","only-one-node","clone-node-drag"])]),h(t(w),{ref_key:"deptDialogRef",ref:s,onRefresh:a[0]||(a[0]=g=>o())},null,512)],64)}}}),[["__scopeId","data-v-a10bfb16"]])});export{ae as __tla,_ as default};
