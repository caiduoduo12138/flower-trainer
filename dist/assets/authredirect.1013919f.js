import{o,v as r,S as c,e as l,s as d,y as u}from"./index.0f5ebb0a.js";import{l as i,h as p}from"./vue.4dfaac09.js";const g=i({name:"authredirect"}),m=i({...g,setup(h){p(async()=>{const e=window.location.href.replace("#/authredirect","").replaceAll("/","");let t=o.getQueryString(e,"code");r(t)&&(t=o.getQueryString(e,"ticket")),r(t)&&(t=o.getQueryString(e,"authCode"));let a=o.getQueryString(e,"state"),n=a.split("-")[1];a=a.split("-")[0],n==="LOGIN"?(c.clear(),await l().loginBySocial(a,t),window.close()):s(a,t)});const s=(e,t)=>{d({url:"/admin/social/bind",method:"post",params:{state:e,code:t}}).then(()=>{u().confirm("\u793E\u4EA4\u8D26\u53F7\u7ED1\u5B9A\u6210\u529F").then(()=>{window.close()})})};return()=>{}}});export{m as default};
