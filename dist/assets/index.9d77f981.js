import{l as F,as as J,r as v,R as M,h as O,aa as r,ah as G,m as y,q as _,t as k,F as S,M as P,u as e,L as l,E as t,a0 as W,K as X,$ as Y,D as T,I as h,J as f,j as Z,A as ee}from"./vue.4dfaac09.js";import{u as le}from"./table.6d12d51c.js";import{f as ae,u as te,a as oe}from"./table.a96d0687.js";import{l as ne}from"./datasource.a0355933.js";import{d as re,v as se,u as me}from"./index.0f5ebb0a.js";const ue={class:"layout-padding"},de={class:"layout-padding-auto layout-padding-view"},ie={class:"mb8",style:{width:"100%"}},pe=F({name:"systemTable"}),ce=F({...pe,setup(be){const $=J(),{t:u}=re(),w=v(),i=v(!0),p=v(),a=M({queryForm:{dsName:"master"},pageList:ae,createdIsNeed:!1}),{getDataList:s,currentChangeHandle:L,sizeChangeHandle:V,downBlobFile:B,tableStyle:C}=le(a);O(()=>{ne().then(n=>{p.value=n.data,p.value.length>0&&(a.queryForm.dsName=p.value[0].name),s()})});const q=n=>{oe(a.queryForm.dsName,n.name).then(()=>{me().success(u("common.optSuccessText"))})},R=()=>{w.value.resetFields(),s()},z=()=>{B("/gen/table/export",a.queryForm,"table.xlsx")};return(n,m)=>{const N=r("el-option"),D=r("el-select"),g=r("el-form-item"),E=r("el-input"),c=r("el-button"),I=r("el-form"),x=r("el-row"),K=r("right-toolbar"),d=r("el-table-column"),U=r("el-table"),H=r("pagination"),Q=G("loading");return y(),_("div",ue,[k("div",de,[S(l(x,{class:"ml10"},{default:t(()=>[l(I,{inline:!0,model:e(a).queryForm,onKeyup:W(e(s),["enter"]),ref_key:"queryRef",ref:w},{default:t(()=>[l(g,{label:"\u6570\u636E\u6E90",prop:"name"},{default:t(()=>[l(D,{onChange:e(s),placeholder:"\u8BF7\u9009\u62E9\u6570\u636E\u6E90",modelValue:e(a).queryForm.dsName,"onUpdate:modelValue":m[0]||(m[0]=o=>e(a).queryForm.dsName=o)},{default:t(()=>[l(N,{label:"\u9ED8\u8BA4\u6570\u636E\u6E90",value:"master"}),(y(!0),_(X,null,Y(e(p),o=>(y(),T(N,{key:o.id,label:o.name,value:o.name},null,8,["label","value"]))),128))]),_:1},8,["onChange","modelValue"])]),_:1}),l(g,{label:n.$t("table.tableName"),prop:"tableName"},{default:t(()=>[l(E,{placeholder:n.$t("table.inputtableNameTip"),modelValue:e(a).queryForm.tableName,"onUpdate:modelValue":m[1]||(m[1]=o=>e(a).queryForm.tableName=o)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),l(g,null,{default:t(()=>[l(c,{onClick:e(s),icon:"search",type:"primary"},{default:t(()=>[h(f(n.$t("common.queryBtn")),1)]),_:1},8,["onClick"]),l(c,{onClick:R,icon:"Refresh"},{default:t(()=>[h(f(n.$t("common.resetBtn")),1)]),_:1})]),_:1})]),_:1},8,["model","onKeyup"])]),_:1},512),[[P,e(i)]]),l(x,null,{default:t(()=>[k("div",ie,[l(K,{export:!0,onExportExcel:z,onQueryTable:e(s),class:"ml10",style:{float:"right","margin-right":"20px"},showSearch:e(i),"onUpdate:showSearch":m[2]||(m[2]=o=>Z(i)?i.value=o:null)},null,8,["onQueryTable","showSearch"])])]),_:1}),S((y(),T(U,{data:e(a).dataList,style:{width:"100%"},border:"","cell-style":e(C).cellStyle,"header-cell-style":e(C).headerCellStyle},{default:t(()=>[l(d,{label:e(u)("table.index"),type:"index",width:"60"},null,8,["label"]),l(d,{label:e(u)("table.tableName"),prop:"name","show-overflow-tooltip":""},null,8,["label"]),l(d,{label:e(u)("table.tableDesc"),prop:"comment","show-overflow-tooltip":""},null,8,["label"]),l(d,{label:e(u)("table.createTime"),prop:"createTime","show-overflow-tooltip":""},null,8,["label"]),l(d,{label:n.$t("common.action"),width:"250"},{default:t(o=>[l(c,{icon:"Refresh",onClick:j=>q(o.row),text:"",type:"primary"},{default:t(()=>[h(f(n.$t("gen.syncBtn")),1)]),_:2},1032,["onClick"]),l(c,{icon:"FolderOpened",onClick:j=>{return b=o.row,void te(a.queryForm.dsName,b.name).then(A=>{se(A.data.fieldList)&&q(b)}).finally(()=>{$.push({path:"/gen/gener/index",query:{tableName:b.name,dsName:a.queryForm.dsName}})});var b},text:"",type:"primary"},{default:t(()=>[h(f(n.$t("gen.genBtn")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data","cell-style","header-cell-style"])),[[Q,e(a).loading]]),l(H,ee({onCurrentChange:e(L),onSizeChange:e(V)},e(a).pagination),null,16,["onCurrentChange","onSizeChange"])])])}}});export{ce as default};
