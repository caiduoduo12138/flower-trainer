import{S as n,u as m}from"./index.0f5ebb0a.js";import{l as c,r as p,a as v,aa as f,m as y,D as j,E as r,q as k,J as w,H as A,L as I,I as z,u}from"./vue.4dfaac09.js";const B={key:0,class:"el-upload__tip"},E=c({name:"wx-file-upload"}),M=c({...E,props:{uploadData:{type:Object,default:()=>({appId:"",mediaType:"image",title:"",introduction:""})},autoUpload:{type:Boolean,default:!0},type:{type:Array,default:()=>[]}},emits:["success"],setup(l,{expose:b,emit:g}){const h=p("/api/mp/wx-material/materialFileUpload"),i=p(),T=v(()=>{const e=n.getTenant();return{Authorization:"Bearer "+n.getToken(),"TENANT-ID":e}}),_=g,x=p([]),s=l,D=e=>{var o,d;let t=!0;((o=s.type)==null?void 0:o.length)>0&&(t=(d=s.type)==null?void 0:d.includes(e.type));const a=e.size/1024/1024<2;return t||m().error("\u4E0A\u4F20\u6587\u4EF6\u683C\u5F0F\u4E0D\u5BF9!"),a||m().error("\u4E0A\u4F20\u6587\u4EF6\u5927\u5C0F\u4E0D\u80FD\u8D85\u8FC72M!!"),t&&a},U=(e,t,a)=>{a.value=[],_("success",e,t,a)};return b({submit:()=>new Promise(e=>{i.value.submit(),e("")})}),(e,t)=>{const a=f("el-button"),o=f("el-upload");return y(),j(o,{ref_key:"fileUpload",ref:i,action:u(h),headers:u(T),multiple:"",limit:1,"on-success":U,"file-list":u(x),"before-upload":D,"auto-upload":l.autoUpload,data:l.uploadData},{tip:r(()=>[s.type.length>0?(y(),k("div",B,"\u652F\u6301"+w(s.type.join("/"))+"\u683C\u5F0F\uFF0C\u5927\u5C0F\u4E0D\u8D85\u8FC72M",1)):A("",!0)]),default:r(()=>[I(a,{type:"primary"},{default:r(()=>[z("\u672C\u5730\u4E0A\u4F20")]),_:1})]),_:1},8,["action","headers","file-list","auto-upload","data"])}}});export{M as default};
