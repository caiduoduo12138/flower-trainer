import{u as T,_ as $}from"./index.0f5ebb0a.js";import{l as x,R as A,r as m,a as H,h as J,aa as l,m as k,q as v,t as _,L as t,u as o,j as M,E as d,y as O,I as S,J as U,H as z,a1 as D,x as G}from"./vue.4dfaac09.js";const K={class:"head-container"},P={class:"head-container-header"},Q={class:"head-container-header-input"},W={key:0,class:"head-container-header-dropdown"},X=x({name:"query-tree"}),Y=$(x({...X,props:{props:{type:Object,default:()=>({label:"name",children:"children",value:"id"})},placeholder:{type:String,default:""},loading:{type:Boolean,default:!1},query:{type:Function,required:!0},showExpand:{type:Boolean,default:!1}},emits:["search","nodeClick"],setup(u,{expose:w,emit:L}){const b=L,n=u,r=A({List:[],localLoading:n.loading}),y=m(),s=m(),i=m(!0),q=H(()=>["!h-[20px]","reset-margin","!text-gray-500","dark:!text-white","dark:hover:!text-primary"]),j=e=>{b("nodeClick",e)},f=()=>{if(n.query instanceof Function){r.localLoading=!0;const e=n.query(o(s));typeof e!="object"&&typeof e!="function"||typeof e.then!="function"||e.then(a=>{r.List=a.data}).catch(a=>{T().error(a.msg)})}};return J(()=>{f()}),w({getdeptTree:f}),(e,a)=>{const C=l("el-input"),E=l("MoreFilled"),F=l("el-icon"),V=l("el-button"),B=l("el-dropdown-item"),I=l("el-dropdown-menu"),N=l("el-dropdown"),R=l("el-tree");return k(),v("div",K,[_("div",P,[_("div",Q,[t(C,{modelValue:o(s),"onUpdate:modelValue":a[0]||(a[0]=c=>M(s)?s.value=c:null),"suffix-icon":"search",placeholder:u.placeholder,clearable:"",onChange:f},null,8,["modelValue","placeholder"])]),u.showExpand?(k(),v("div",W,[t(N,{"hide-on-click":!1},{dropdown:d(()=>[t(I,null,{default:d(()=>[t(B,null,{default:d(()=>[t(V,{class:O(o(q)),link:"",type:"primary",icon:o(i)?"expand":"fold",onClick:a[1]||(a[1]=c=>(p=>{i.value=p;const g=y.value.store._getAllNodes();for(let h=0;h<g.length;h++)g[h].expanded=p})(!o(i)))},{default:d(()=>[S(U(o(i)?"\u6298\u53E0":"\u5C55\u5F00"),1)]),_:1},8,["class","icon"])]),_:1})]),_:1})]),default:d(()=>[t(F,{style:{transform:"rotate(90deg)"}},{default:d(()=>[t(E)]),_:1})]),_:1})])):z("",!0)]),t(R,{class:"mt20",data:o(r).List,props:n.props,"expand-on-click-node":!1,ref_key:"deptTreeRef",ref:y,loading:o(r).localLoading,"node-key":"id","highlight-current":"","default-expand-all":"",onNodeClick:j},D({_:2},[e.$slots.default?{name:"default",fn:d(({node:c,data:p})=>[G(e.$slots,"default",{node:c,data:p},void 0,!0)]),key:"0"}:void 0]),1032,["data","props","loading"])])}}}),[["__scopeId","data-v-a7581c93"]]);export{Y as default};
