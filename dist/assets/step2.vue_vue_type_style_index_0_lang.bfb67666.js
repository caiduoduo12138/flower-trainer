import{o as i,ax as y,au as u,S as r,ay as n}from"./index.0f5ebb0a.js";import{u as b}from"./flow.3bb50ae4.js";import{l as h,r as g,e as D,h as S,m as w,q as x,L as T,u as q}from"./vue.4dfaac09.js";const C={selectUser:()=>({menu:"biz",icon:"icon-table-form2",label:"\u4EBA\u5458",name:"SelectUser",mask:!0,rule:()=>({type:"OrgSelector",field:"SelectUser"+i.getNonDuplicateID(),title:"\u4EBA\u5458",$required:!0,props:{type:"user"}}),props:()=>[{type:"switch",title:"\u591A\u9009",field:"multiple",value:!0},{type:"switch",title:"\u7981\u7528",field:"disabled",value:!1},{type:"switch",title:"\u9009\u62E9\u81EA\u5DF1",field:"selectSelf",value:!0}]}),selectDept:()=>({menu:"biz",icon:"icon-group",label:"\u90E8\u95E8",name:"SelectDept",mask:!0,rule:()=>({type:"OrgSelector",field:"SelectDept"+i.getNonDuplicateID(),title:"\u90E8\u95E8",$required:!0,props:{type:"dept"}}),props:()=>[{type:"switch",title:"\u591A\u9009",field:"multiple",value:!0},{type:"switch",title:"\u7981\u7528",field:"disabled",value:!1}]}),uploadFile:()=>({menu:"biz",icon:"icon-folder",label:"\u4E0A\u4F20",name:"UploadFile"+i.getNonDuplicateID(),mask:!0,rule:()=>({type:"UploadFile",field:"UploadFile",title:"\u6587\u4EF6\u4E0A\u4F20",$required:!0,props:{}}),props:()=>[{type:"input",title:"\u4E0A\u4F20\u5730\u5740",field:"uploadFileUrl",value:"/admin/sys-file/upload"},{type:"number",title:"\u6570\u91CF\u9650\u5236",field:"limit",value:5,props:{min:1,max:100}},{type:"number",title:"\u5927\u5C0F\u9650\u5236(MB)",field:"fileSize",value:5,props:{min:1,max:500}},{type:"select",title:"\u4E0A\u4F20\u7C7B\u578B",field:"type",value:"default",options:[{label:"\u9ED8\u8BA4",value:"default"},{label:"\u7B80\u5355",value:"simple"}]},{type:"input",title:"\u4E0A\u4F20\u76EE\u5F55",field:"dir",value:""},{type:"switch",title:"\u81EA\u52A8\u4E0A\u4F20",field:"autoUpload",value:!0},{type:"switch",title:"\u663E\u793A\u63D0\u793A",field:"isShowTip",value:!0},{type:"switch",title:"\u7981\u7528",field:"disabled",value:!1},{type:"select",title:"\u6587\u4EF6\u7C7B\u578B",field:"fileType",value:["png","jpg","jpeg","doc","xls","ppt","txt","pdf","docx","xlsx","pptx"],props:{multiple:!0},options:[{label:"PNG",value:"png"},{label:"JPG",value:"jpg"},{label:"JPEG",value:"jpeg"},{label:"DOC",value:"doc"},{label:"DOCX",value:"docx"},{label:"XLS",value:"xls"},{label:"XLSX",value:"xlsx"},{label:"PPT",value:"ppt"},{label:"PPTX",value:"pptx"},{label:"PDF",value:"pdf"},{label:"TXT",value:"txt"}]}]}),chinaArea:()=>({menu:"biz",icon:"icon-subform",label:"\u5730\u533A",name:"ChinaArea",mask:!0,rule:()=>({type:"ChinaArea",field:"ChinaArea"+i.getNonDuplicateID(),title:"\u5730\u533A",$required:!0,props:{}}),props:()=>[{type:"number",title:"\u5C42\u7EA7",field:"type",value:4,props:{min:1,max:4}},{type:"switch",title:"\u7981\u7528",field:"disabled",value:!1},{type:"switch",title:"\u5B50\u7EA7\u5FC5\u9009",field:"plus",value:!1},{type:"switch",title:"\u61D2\u52A0\u8F7D",field:"lazy",value:!1}]}),sign:()=>({menu:"biz",icon:"icon-edit",label:"\u7B7E\u540D",name:"Sign",mask:!0,rule:()=>({type:"Sign",field:"Sign"+i.getNonDuplicateID(),title:"\u7B7E\u540D",$required:!0,props:{}}),props:()=>[{type:"number",title:"\u5BBD\u5EA6",field:"width",value:300,props:{min:100,max:1e3}},{type:"number",title:"\u9AD8\u5EA6",field:"height",value:150,props:{min:50,max:500}},{type:"number",title:"\u7EBF\u5BBD",field:"lineWidth",value:4,props:{min:1,max:20}},{type:"colorPicker",title:"\u7EBF\u6761\u989C\u8272",field:"lineColor",value:"#000000"},{type:"colorPicker",title:"\u80CC\u666F\u989C\u8272",field:"bgColor",value:""},{type:"switch",title:"\u88C1\u526A\u7A7A\u767D",field:"isCrop",value:!1},{type:"switch",title:"\u6E05\u9664\u80CC\u666F",field:"isClearBgColor",value:!0}]}),dictSelect:()=>({menu:"biz",icon:"icon-select",label:"\u5B57\u5178",name:"DictSelect"+i.getNonDuplicateID(),mask:!0,rule:()=>({type:"DictSelect",field:"DictSelect",title:"\u5B57\u5178",$required:!0,props:{}}),props:()=>[{type:"input",title:"\u5B57\u5178\u7C7B\u578B",field:"dictType",value:"",props:{placeholder:"\u8BF7\u8F93\u5165\u5B57\u5178\u7C7B\u578B"}},{type:"switch",title:"\u591A\u9009",field:"multiple",value:!1},{type:"switch",title:"\u53EF\u6E05\u9664",field:"clearable",value:!0},{type:"switch",title:"\u7981\u7528",field:"disabled",value:!1}]}),sequence:()=>({menu:"biz",icon:"icon-number",label:"\u6D41\u6C34\u53F7",name:"Sequence",mask:!0,rule(){const p=y().format("YYYYMMDD");return{type:"Input",field:"Sequence"+i.getNonDuplicateID(),title:"\u6D41\u6C34\u53F7",$required:!0,props:{disabled:!0,type:"Sequence",placeholder:p+"00001"}}},props:()=>[{type:"switch",title:"\u7981\u7528",field:"disabled",value:!0}]})},I=Object.values(C).map(p=>p()),k=h({__name:"step2",setup(p,{expose:d}){const l=g(null),a=b(),c={fieldReadonly:!1,showSaveBtn:!0,showDevice:!1,hiddenItem:["upload"]};u.designerForm.fetch=u.formCreate.fetch=e=>{const t={},s=r.getToken();s&&(t[n.AUTHORIZATION]=`Bearer ${s}`);const o=r.getTenant();o&&(t[n.TENANT_ID]=o),fetch(e.action,{headers:t,method:e.method}).then(async f=>{const v=await f.json();e.onSuccess(v)}).catch(e.onError)},D(()=>a.step2,e=>{l.value&&e&&l.value.setRule(e)});const m=()=>{l.value&&a.setStep2(l.value.getRule())};return S(()=>{l.value&&a.step2&&(l.value.addMenu({name:"biz",title:"\u4E1A\u52A1\u7EC4\u4EF6",list:[]}),I.forEach(e=>{var t;(t=l.value)==null||t.addComponent(e)}),l.value.setRule(a.step2))}),d({validate:e=>{l.value?(a.setStep2(l.value.getRule()),e(!0)):e(!1)}}),(e,t)=>(w(),x("div",null,[T(q(u),{ref_key:"designer",ref:l,height:"100vh",onSave:m,config:c},null,512)]))}});export{k as _};
