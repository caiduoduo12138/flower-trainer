import{d as oe,y as re,u as Q,b as se,__tla as ne}from"./index.0f5ebb0a.js";import{l as U,r as $,R as de,a as ie,aa as s,ah as j,m as n,q as me,t as T,F as c,M as ue,u as r,L as a,E as l,a0 as pe,I as d,J as y,D as i,j as ce,H as S,av as ye}from"./vue.4dfaac09.js";import{p as z,d as fe,__tla as he}from"./index.97aa2129.js";import{u as _e}from"./table.6d12d51c.js";import"./loading.50b2b84c.js";let H,we=Promise.all([(()=>{try{return ne}catch{}})(),(()=>{try{return he}catch{}})()]).then(async()=>{let q,F,L,A,D;q={class:"layout-padding"},F={class:"layout-padding-auto layout-padding-view"},L={class:"mb8",style:{width:"100%"}},A={style:{"margin-left":"12px"}},D=U({name:"systemMenu"}),H=U({...D,setup(be){const J=ye(()=>se(()=>import("./form.6f8eb000.js"),["assets/form.6f8eb000.js","assets/index.0f5ebb0a.js","assets/vue.4dfaac09.js","assets/index.3d43c53c.css","assets/index.97aa2129.js","assets/loading.50b2b84c.js","assets/loading.70fbfd85.css"])),{t:R}=oe(),G=$(),C=$(),w=$(!0),B=$(),m=de({pageList:z,queryForm:{parentId:-1,menuName:""},isPage:!1}),{getDataList:f,tableStyle:I}=_e(m),N=e=>{e.forEach(o=>{o.hasChildren=o.menuType!=="1"})},W=ie(()=>{const e=m.dataList;return Array.isArray(e)&&N(e),e}),E=(e,o)=>{C.value.openDialog(e,o)},O=e=>(e.children||[]).length>0,V=()=>{m.dataList=[],m.queryForm.parentId=void 0,f()},X=()=>{B.value.resetFields(),m.dataList=[],f()},Y=(e,o,x)=>{const b={parentId:e.id};z(b).then(u=>{const h=u.data;Array.isArray(h)&&N(h),x(h)})};return(e,o)=>{var P;const x=s("el-input"),b=s("el-form-item"),u=s("el-button"),h=s("el-form"),K=s("el-row"),Z=s("right-toolbar"),p=s("el-table-column"),ee=s("SvgIcon"),_=s("el-tag"),le=s("el-tooltip"),ae=s("el-table"),v=j("auth"),te=j("loading");return n(),me("div",q,[T("div",F,[c(a(K,{shadow:"hover",class:"ml10"},{default:l(()=>[a(h,{inline:!0,model:r(m).queryForm,onKeyup:pe(r(f),["enter"]),ref_key:"queryRef",ref:B},{default:l(()=>[a(b,{label:e.$t("sysmenu.name"),prop:"menuName"},{default:l(()=>[a(x,{placeholder:e.$t("sysmenu.inputNameTip"),clearable:"",style:{"max-width":"180px"},modelValue:r(m).queryForm.menuName,"onUpdate:modelValue":o[0]||(o[0]=t=>r(m).queryForm.menuName=t)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),a(b,null,{default:l(()=>[a(u,{onClick:V,class:"ml10",icon:"search",type:"primary"},{default:l(()=>[d(y(e.$t("common.queryBtn")),1)]),_:1}),a(u,{onClick:X,icon:"Refresh"},{default:l(()=>[d(y(e.$t("common.resetBtn")),1)]),_:1})]),_:1})]),_:1},8,["model","onKeyup"])]),_:1},512),[[ue,r(w)]]),a(K,null,{default:l(()=>[T("div",L,[c((n(),i(u,{onClick:E,class:"ml10",icon:"folder-add",type:"primary"},{default:l(()=>[d(y(e.$t("common.addBtn")),1)]),_:1})),[[v,"sys_menu_add"]]),a(Z,{showSearch:r(w),"onUpdate:showSearch":o[1]||(o[1]=t=>ce(w)?w.value=t:null),class:"ml10",style:{float:"right","margin-right":"20px"},onQueryTable:r(f)},null,8,["showSearch","onQueryTable"])])]),_:1}),c((n(),i(ae,{ref_key:"tableRef",ref:G,data:r(W),lazy:"",load:Y,"tree-props":{children:"children",hasChildren:"hasChildren"},"row-key":"path",style:{width:"100%"},border:"","cell-style":r(I).cellStyle,"header-cell-style":(P=r(I))==null?void 0:P.headerCellStyle},{default:l(()=>[a(p,{label:e.$t("sysmenu.name"),fixed:"",prop:"name","show-overflow-tooltip":""},null,8,["label"]),a(p,{label:e.$t("sysmenu.sortOrder"),prop:"sortOrder","show-overflow-tooltip":""},null,8,["label"]),a(p,{label:e.$t("sysmenu.icon"),prop:"icon","show-overflow-tooltip":""},{default:l(t=>[a(ee,{name:t.row.meta.icon},null,8,["name"])]),_:1},8,["label"]),a(p,{label:e.$t("sysmenu.path"),prop:"path","show-overflow-tooltip":""},null,8,["label"]),a(p,{label:e.$t("sysmenu.menuType"),"show-overflow-tooltip":""},{default:l(t=>[t.row.menuType==="0"?(n(),i(_,{key:0},{default:l(()=>[d("\u5DE6\u83DC\u5355")]),_:1})):S("",!0),t.row.menuType==="2"?(n(),i(_,{key:1},{default:l(()=>[d("\u9876\u83DC\u5355")]),_:1})):S("",!0),t.row.menuType==="1"?(n(),i(_,{key:2,type:"success"},{default:l(()=>[d("\u6309\u94AE")]),_:1})):S("",!0)]),_:1},8,["label"]),a(p,{label:e.$t("sysmenu.keepAlive"),"show-overflow-tooltip":""},{default:l(t=>[t.row.meta.isKeepAlive?(n(),i(_,{key:0},{default:l(()=>[d("\u5F00\u542F")]),_:1})):(n(),i(_,{key:1,type:"info"},{default:l(()=>[d("\u5173\u95ED")]),_:1}))]),_:1},8,["label"]),a(p,{label:e.$t("sysmenu.permission"),"show-overflow-tooltip":!0,prop:"permission"},null,8,["label"]),a(p,{label:e.$t("common.action"),"show-overflow-tooltip":"",width:"250"},{default:l(t=>[c((n(),i(u,{icon:"folder-add",onClick:M=>E("add",t.row),text:"",type:"primary"},{default:l(()=>[d(y(e.$t("common.addBtn")),1)]),_:2},1032,["onClick"])),[[v,"sys_menu_add"]]),c((n(),i(u,{icon:"edit-pen",onClick:M=>{return g="edit",k=t.row,void C.value.openDialog(g,k);var g,k},text:"",type:"primary"},{default:l(()=>[d(y(e.$t("common.editBtn")),1)]),_:2},1032,["onClick"])),[[v,"sys_menu_edit"]]),a(le,{icon:"delete",content:e.$t("sysmenu.deleteDisabledTip"),disabled:!O(t.row),placement:"top"},{default:l(()=>[T("span",A,[c((n(),i(u,{icon:"delete",disabled:O(t.row),onClick:M=>(async g=>{try{await re().confirm(R("common.delConfirmText"))}catch{return}try{await fe(g.id),f(),Q().success(R("common.delSuccessText"))}catch(k){Q().error(k.msg)}})(t.row),text:"",type:"primary"},{default:l(()=>[d(y(e.$t("common.delBtn")),1)]),_:2},1032,["disabled","onClick"])),[[v,"sys_menu_del"]])])]),_:2},1032,["content","disabled"])]),_:1},8,["label"])]),_:1},8,["data","cell-style","header-cell-style"])),[[te,r(m).loading]])]),a(r(J),{onRefresh:o[2]||(o[2]=t=>V()),ref_key:"menuDialogRef",ref:C},null,512)])}}})});export{we as __tla,H as default};
