import{d as z,u as y}from"./index.0f5ebb0a.js";import{p as A,a as G,g as M}from"./schedule.3fa34690.js";import{u as N}from"./dict.10eb31b5.js";import{l as V,r as b,R as P,aa as r,ah as Q,m as i,D as h,E as u,t as W,L as d,I as S,J as D,u as e,F as X,q as k,K as q,$ as U,H as Y,j as Z,n as ee}from"./vue.4dfaac09.js";const le={class:"dialog-footer"},ae=V({name:"SysScheduleDialog"}),te=V({...ae,emits:["refresh"],setup(ue,{expose:x,emit:w}){const $=w,{schedule_type:B,schedule_status:j}=N("schedule_type","schedule_status"),{t:o}=z(),g=b(),c=b(!1),m=b(!1),l=P({id:"",title:"",scheduleType:"record",scheduleState:"0",content:"",scheduleTime:"",scheduleDate:""}),C=b({title:[{required:!0,message:"\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],scheduleType:[{required:!0,message:"\u65E5\u7A0B\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],scheduleState:[{required:!0,message:"\u72B6\u6001\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],content:[{required:!0,message:"\u5185\u5BB9\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],scheduleTime:[{required:!0,message:"\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],scheduleDate:[{required:!0,message:"\u65E5\u671F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),F=async()=>{if(!await g.value.validate().catch(()=>{}))return!1;try{m.value=!0,await(l.id?A(l):G(l)),y().success(o(l.id?"common.editSuccessText":"common.addSuccessText")),c.value=!1,$("refresh")}catch(s){y().error(s.msg)}finally{m.value=!1}},R=s=>{m.value=!0,M(s).then(a=>Object.assign(l,a.data)).finally(()=>m.value=!1)};return x({openDialog:(s,a)=>{c.value=!0,l.id="",ee(()=>{var f;return(f=g.value)==null?void 0:f.resetFields()}),a!=null&&a.date&&(l.date=a.date),s&&(l.id=s,R(s))}}),(s,a)=>{const f=r("el-input"),n=r("el-form-item"),p=r("el-col"),_=r("el-option"),v=r("el-select"),H=r("el-date-picker"),I=r("el-time-picker"),E=r("editor"),J=r("el-row"),K=r("el-form"),T=r("el-button"),L=r("el-dialog"),O=Q("loading");return i(),h(L,{title:e(l).id?s.$t("common.editBtn"):s.$t("common.addBtn"),modelValue:e(c),"onUpdate:modelValue":a[7]||(a[7]=t=>Z(c)?c.value=t:null)},{footer:u(()=>[W("span",le,[d(T,{onClick:a[6]||(a[6]=t=>c.value=!1)},{default:u(()=>[S(D(s.$t("common.cancelButtonText")),1)]),_:1}),d(T,{type:"primary",onClick:F,disabled:e(m)},{default:u(()=>[S(D(s.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:u(()=>[X((i(),h(K,{ref_key:"dataFormRef",ref:g,model:e(l),rules:e(C),formDialogRef:"","label-width":"90px"},{default:u(()=>[d(J,{gutter:24},{default:u(()=>[d(p,{span:24,class:"mb20"},{default:u(()=>[d(n,{label:e(o)("schedule.title"),prop:"title"},{default:u(()=>[d(f,{modelValue:e(l).title,"onUpdate:modelValue":a[0]||(a[0]=t=>e(l).title=t),placeholder:e(o)("schedule.inputTitleTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),d(p,{span:24,class:"mb20"},{default:u(()=>[d(n,{label:e(o)("schedule.type"),prop:"scheduleType"},{default:u(()=>[d(v,{modelValue:e(l).scheduleType,"onUpdate:modelValue":a[1]||(a[1]=t=>e(l).scheduleType=t),placeholder:e(o)("schedule.inputTypeTip"),clearable:"","default-first-option":""},{default:u(()=>[(i(!0),k(q,null,U(e(B),t=>(i(),h(_,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),d(p,{span:24,class:"mb20"},{default:u(()=>[d(n,{label:e(o)("schedule.state"),prop:"scheduleState"},{default:u(()=>[d(v,{modelValue:e(l).scheduleState,"onUpdate:modelValue":a[2]||(a[2]=t=>e(l).scheduleState=t),placeholder:e(o)("schedule.inputStateTip"),clearable:"","default-first-option":""},{default:u(()=>[(i(!0),k(q,null,U(e(j),t=>(i(),h(_,{key:t.value,label:t.label,value:t.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),d(p,{span:12,class:"mb20"},{default:u(()=>[d(n,{label:e(o)("schedule.date"),prop:"scheduleDate"},{default:u(()=>[d(H,{type:"date",placeholder:e(o)("schedule.inputDateTip"),modelValue:e(l).scheduleDate,"onUpdate:modelValue":a[3]||(a[3]=t=>e(l).scheduleDate=t),"value-format":s.dateStr},null,8,["placeholder","modelValue","value-format"])]),_:1},8,["label"])]),_:1}),d(p,{span:12,class:"mb20"},{default:u(()=>[d(n,{label:e(o)("schedule.time"),prop:"scheduleTime"},{default:u(()=>[d(I,{modelValue:e(l).scheduleTime,"onUpdate:modelValue":a[4]||(a[4]=t=>e(l).scheduleTime=t),"arrow-control":"",placeholder:e(o)("schedule.inputTimeTip"),"value-format":s.timeStr},null,8,["modelValue","placeholder","value-format"])]),_:1},8,["label"])]),_:1}),d(p,{span:24,class:"mb20"},{default:u(()=>[d(n,{label:e(o)("schedule.content"),prop:"content"},{default:u(()=>[e(c)?(i(),h(E,{key:0,"get-html":e(l).content,"onUpdate:getHtml":a[5]||(a[5]=t=>e(l).content=t),placeholder:e(o)("schedule.inputContentTip"),disable:e(l).id!==""},null,8,["get-html","placeholder","disable"])):Y("",!0)]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[O,e(m)]])]),_:1},8,["title","modelValue"])}}});export{te as default};
