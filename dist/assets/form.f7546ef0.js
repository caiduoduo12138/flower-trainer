import{g as q,p as E,a as J}from"./wx-account-fans.1cd94714.js";import{l as K}from"./wx-account-tag.dbdd693e.js";import{d as L,u as V}from"./index.0f5ebb0a.js";import{l as A,r as i,R as O,aa as n,ah as z,m as g,D as v,E as t,t as G,L as o,I as w,J as y,F as H,u as e,q as M,K as P,$ as Q,j as W}from"./vue.4dfaac09.js";const X={class:"dialog-footer"},Y=A({name:"wx-fans"}),Z=A({...Y,emits:["refresh"],setup(ee,{expose:I,emit:U}){const{t:s}=L(),_=U,b=i(),m=i(!1),r=i(!1),x=i(),a=O({id:""}),T=i([]),$=()=>{r.value=!0,q(a.id).then(u=>{Object.assign(a,u.data)}).finally(()=>{r.value=!1})},B=()=>{b.value.validate(u=>{if(!u)return!1;r.value=!0,a.id?E(a).then(()=>{V().success(s("common.editSuccessText")),m.value=!1,_("refresh")}).catch(l=>{V().error(l.msg)}).finally(()=>{r.value=!1}):J(a).then(()=>{V().success(s("common.addSuccessText")),m.value=!1,_("refresh")}).catch(l=>{V().error(l.msg)}).finally(()=>{r.value=!1})})},h=i([]),N=()=>{K(x.value).then(u=>{h.value=u.data})};return I({openDialog:(u,l)=>{m.value=!0,a.id=u.id,x.value=l,b.value&&b.value.resetFields(),a.id&&$(),N()}}),(u,l)=>{const f=n("el-input"),c=n("el-form-item"),p=n("el-col"),F=n("el-option"),j=n("el-select"),C=n("el-row"),D=n("el-form"),k=n("el-button"),R=n("el-dialog"),S=z("loading");return g(),v(R,{modelValue:e(m),"onUpdate:modelValue":l[7]||(l[7]=d=>W(m)?m.value=d:null),"close-on-click-modal":!1,title:e(a).id?u.$t("common.editBtn"):u.$t("common.addBtn"),draggable:""},{footer:t(()=>[G("span",X,[o(k,{onClick:l[6]||(l[6]=d=>m.value=!1)},{default:t(()=>[w(y(u.$t("common.cancelButtonText")),1)]),_:1}),o(k,{type:"primary",onClick:B},{default:t(()=>[w(y(u.$t("common.confirmButtonText")),1)]),_:1})])]),default:t(()=>[H((g(),v(D,{ref_key:"dataFormRef",ref:b,model:e(a),rules:e(T),"label-width":"90px"},{default:t(()=>[o(C,{gutter:24},{default:t(()=>[o(p,{span:12,class:"mb20"},{default:t(()=>[o(c,{label:e(s)("fans.wxAccountName"),prop:"wxAccountName"},{default:t(()=>[o(f,{modelValue:e(a).wxAccountName,"onUpdate:modelValue":l[0]||(l[0]=d=>e(a).wxAccountName=d),disabled:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),o(p,{span:12,class:"mb20"},{default:t(()=>[o(c,{label:e(s)("fans.wxAccountAppid"),prop:"wxAccountAppid"},{default:t(()=>[o(f,{modelValue:e(a).wxAccountAppid,"onUpdate:modelValue":l[1]||(l[1]=d=>e(a).wxAccountAppid=d),disabled:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),o(p,{span:12,class:"mb20"},{default:t(()=>[o(c,{label:e(s)("fans.openid"),prop:"openid"},{default:t(()=>[o(f,{modelValue:e(a).openid,"onUpdate:modelValue":l[2]||(l[2]=d=>e(a).openid=d),disabled:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),o(p,{span:12,class:"mb20"},{default:t(()=>[o(c,{label:e(s)("fans.nickname"),prop:"nickname"},{default:t(()=>[o(f,{modelValue:e(a).nickname,"onUpdate:modelValue":l[3]||(l[3]=d=>e(a).nickname=d),disabled:""},null,8,["modelValue"])]),_:1},8,["label"])]),_:1}),o(p,{span:12,class:"mb20"},{default:t(()=>[o(c,{label:e(s)("fans.remark"),prop:"remark"},{default:t(()=>[o(f,{modelValue:e(a).remark,"onUpdate:modelValue":l[4]||(l[4]=d=>e(a).remark=d),placeholder:e(s)("fans.inputremarkTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),o(p,{span:12,class:"mb20"},{default:t(()=>[o(c,{label:e(s)("fans.tagIds"),prop:"tagIds"},{default:t(()=>[o(j,{modelValue:e(a).tagIds,"onUpdate:modelValue":l[5]||(l[5]=d=>e(a).tagIds=d),placeholder:e(s)("fans.inputTagTip"),clearable:"",multiple:""},{default:t(()=>[(g(!0),M(P,null,Q(e(h),d=>(g(),v(F,{key:d.tagId,label:d.tag,value:d.tagId},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[S,e(r)]])]),_:1},8,["modelValue","title"])}}});export{Z as default};
