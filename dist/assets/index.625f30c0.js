import{d as oe,y as te,u as B,b as ne,__tla as ce}from"./index.0f5ebb0a.js";import{l as V,r as w,R as re,h as ue,e as ie,aa as r,ah as I,m,q as L,t as z,F as y,M as de,u as e,L as l,E as o,a0 as pe,K as se,$ as me,D as f,I as s,J as g,j as ge,A as we,av as ye}from"./vue.4dfaac09.js";import{u as fe}from"./table.6d12d51c.js";import{g as he,d as xe,s as Ae}from"./wx-account-tag.dbdd693e.js";import{f as _e}from"./wx-account.c6394b81.js";let E,be=Promise.all([(()=>{try{return ce}catch{}})()]).then(async()=>{let T,v,F,q;T={class:"layout-padding"},v={class:"layout-padding-auto layout-padding-view"},F={class:"mb8",style:{width:"100%"}},q=V({name:"systemWxAccountTag"}),E=V({...q,setup(Ce){const H=ye(()=>ne(()=>import("./form.7f1939f9.js"),["assets/form.7f1939f9.js","assets/index.0f5ebb0a.js","assets/vue.4dfaac09.js","assets/index.3d43c53c.css","assets/wx-account-tag.dbdd693e.js"])),{t:u}=oe(),A=w(),k=w(),h=w(!0),_=w([]),D=w(!0),t=re({queryForm:{},pageList:he,createdIsNeed:!1}),x=w([]);ue(()=>{_e().then(a=>{x.value=a.data,x.value.length>0&&(t.queryForm.wxAccountAppid=x.value[0].appid,i())})}),ie(()=>t.queryForm.wxAccountAppid,()=>{i()});const{getDataList:i,currentChangeHandle:K,sizeChangeHandle:N,sortChangeHandle:U,downBlobFile:P,tableStyle:S}=fe(t),Q=()=>{k.value.resetFields(),_.value=[],i()},W=()=>{P("/mp/wxAccountTag/export",t.queryForm,"wxAccountTag.xlsx")},j=a=>{_.value=a.map(({id:n})=>n),D.value=!a.length},R=a=>{te().confirm(u("common.delConfirmText")).then(()=>{xe({ids:a,wxAccountAppid:t.queryForm.wxAccountAppid}).then(()=>{i(),B().success(u("common.delSuccessText"))}).catch(n=>{B().error(n.msg)})})},J=()=>{Ae(t.queryForm.wxAccountAppid).then(()=>{i()})};return(a,n)=>{const M=r("el-input"),b=r("el-form-item"),O=r("el-option"),G=r("el-select"),d=r("el-button"),X=r("el-form"),$=r("el-row"),Y=r("right-toolbar"),p=r("el-table-column"),Z=r("el-table"),ee=r("pagination"),C=I("auth"),le=I("loading");return m(),L("div",T,[z("div",v,[y(l($,null,{default:o(()=>[l(X,{ref_key:"queryRef",ref:k,inline:!0,model:e(t).queryForm,onKeyup:pe(e(i),["enter"])},{default:o(()=>[l(b,{label:a.$t("wxAccountTag.tag"),prop:"tag"},{default:o(()=>[l(M,{modelValue:e(t).queryForm.tag,"onUpdate:modelValue":n[0]||(n[0]=c=>e(t).queryForm.tag=c),placeholder:e(u)("wxAccountTag.inputTagTip"),style:{"max-width":"180px"}},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),l(b,{label:a.$t("wxAccountTag.wxAccountAppid"),prop:"wxAccountAppid"},{default:o(()=>[l(G,{modelValue:e(t).queryForm.wxAccountAppid,"onUpdate:modelValue":n[1]||(n[1]=c=>e(t).queryForm.wxAccountAppid=c),placeholder:e(u)("wxAccountTag.inputWxAccountAppidTip"),clearable:""},{default:o(()=>[(m(!0),L(se,null,me(e(x),c=>(m(),f(O,{key:c.appid,label:c.name,value:c.appid},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder"])]),_:1},8,["label"]),l(b,null,{default:o(()=>[l(d,{formDialogRef:"",icon:"search",type:"primary",onClick:e(i)},{default:o(()=>[s(g(a.$t("common.queryBtn")),1)]),_:1},8,["onClick"]),l(d,{formDialogRef:"",icon:"Refresh",onClick:Q},{default:o(()=>[s(g(a.$t("common.resetBtn")),1)]),_:1})]),_:1})]),_:1},8,["model","onKeyup"])]),_:1},512),[[de,e(h)]]),l($,null,{default:o(()=>[z("div",F,[y((m(),f(d,{class:"ml10",formDialogRef:"",icon:"folder-add",type:"primary",onClick:n[2]||(n[2]=c=>e(A).openDialog(null,e(t).queryForm.wxAccountAppid))},{default:o(()=>[s(g(a.$t("common.addBtn")),1)]),_:1})),[[C,"mp_wx_account_tag_add"]]),y((m(),f(d,{class:"ml10",formDialogRef:"",icon:"Download",type:"primary",onClick:W},{default:o(()=>[s(g(a.$t("common.exportBtn")),1)]),_:1})),[[C,"mp_wx_account_tag_export"]]),y((m(),f(d,{disabled:e(D),class:"ml10",formDialogRef:"",icon:"Delete",type:"primary",onClick:n[3]||(n[3]=c=>R(e(_)))},{default:o(()=>[s(g(a.$t("common.delBtn")),1)]),_:1},8,["disabled"])),[[C,"mp_wx_account_tag_del"]]),l(d,{plain:"",type:"primary",icon:"Sort",onClick:J},{default:o(()=>[s("\u540C\u6B65")]),_:1}),l(Y,{showSearch:e(h),"onUpdate:showSearch":n[4]||(n[4]=c=>ge(h)?h.value=c:null),class:"ml10",style:{float:"right","margin-right":"20px"},onQueryTable:e(i)},null,8,["showSearch","onQueryTable"])])]),_:1}),y((m(),f(Z,{data:e(t).dataList,style:{width:"100%"},onSelectionChange:j,onSortChange:e(U),border:"","cell-style":e(S).cellStyle,"header-cell-style":e(S).headerCellStyle},{default:o(()=>[l(p,{align:"center",type:"selection",width:"40"}),l(p,{label:e(u)("wxAccountTag.index"),type:"index",width:"60"},null,8,["label"]),l(p,{label:e(u)("wxAccountTag.tag"),prop:"tag","show-overflow-tooltip":""},null,8,["label"]),l(p,{label:e(u)("wxAccountTag.wxAccountId"),prop:"wxAccountId","show-overflow-tooltip":""},null,8,["label"]),l(p,{label:e(u)("wxAccountTag.wxAccountName"),prop:"wxAccountName","show-overflow-tooltip":""},null,8,["label"]),l(p,{label:e(u)("wxAccountTag.wxAccountAppid"),prop:"wxAccountAppid","show-overflow-tooltip":""},null,8,["label"]),l(p,{label:e(u)("wxAccountTag.tagId"),prop:"tagId","show-overflow-tooltip":""},null,8,["label"]),l(p,{label:a.$t("common.action"),width:"150"},{default:o(c=>[l(d,{icon:"edit-pen",text:"",type:"primary",onClick:ae=>e(A).openDialog(c.row,e(t).queryForm.wxAccountAppid)},{default:o(()=>[s(g(a.$t("common.editBtn")),1)]),_:2},1032,["onClick"]),l(d,{icon:"delete",text:"",type:"primary",onClick:ae=>R([c.row.id])},{default:o(()=>[s(g(a.$t("common.delBtn")),1)]),_:2},1032,["onClick"])]),_:1},8,["label"])]),_:1},8,["data","onSortChange","cell-style","header-cell-style"])),[[le,e(t).loading]]),l(ee,we(e(t).pagination,{onSizeChange:e(N),onCurrentChange:e(K)}),null,16,["onSizeChange","onCurrentChange"])]),l(e(H),{ref_key:"formDialogRef",ref:A,onRefresh:n[5]||(n[5]=c=>e(i)(!1))},null,512)])}}})});export{be as __tla,E as default};
