import{az as q,aA as z,aB as B,aw as F,_ as $}from"./index.0f5ebb0a.js";import{l as A,r as E,aa as o,m as l,q as t,L as c,E as g,K as x,$ as b,D as y,u as f,t as r,y as H,I as J,J as n,H as m}from"./vue.4dfaac09.js";const K={class:"p-3"},M={key:0,class:"ml-1 text-gray-500"},N={key:0,class:"flex flex-wrap gap-2 mb-3"},j={class:"flex flex-col items-center"},T={class:"mt-1 w-full text-xs truncate"},C={key:0,class:"mb-3"},G={class:"flex gap-2 items-center mb-2"},O={class:"w-10 text-center"},P={class:"text-xs"},Q={class:"font-medium"},R={class:"ml-1 text-gray-500"},W={class:"p-3 text-sm bg-gray-50 rounded"},X={key:1},Y={class:"p-2"},Z=$(A({__name:"FlowNodeFormat",props:{nodeUser:{},row:{},disableSelect:{type:Boolean}},setup(ee){const u=E(new Map);function _(s){if(!u.value.has(s.id)){const d=s.branch.findIndex(p=>{var v;return(v=p.children)==null?void 0:v.some(U=>U.status!==0)});u.value.set(s.id,d>=0?String(d):"0")}return u.value.get(s.id)||"0"}function L(s,d){return s.placeholder||`\u5206\u652F${d+1}`}return(s,d)=>{const p=o("upload-img"),v=o("flow-node-format",!0),U=o("el-tab-pane"),S=o("el-tabs"),V=o("el-timeline-item"),D=o("el-timeline");return l(),t("div",K,[c(D,{reverse:!1},{default:g(()=>[(l(!0),t(x,null,b(s.row,(e,I)=>(l(),y(V,{key:I,size:"large",color:e.status!=2?e.status==1?"var(--el-color-warning)":"var(--el-color-success)":"var(--el-color-primary)",icon:e.status==2?f(q):e.status==1?f(z):f(B)},{default:g(()=>{var w,k;return[r("div",{class:H(["text-sm font-medium mb-3",{"text-red-500":e.selectUser&&(!s.nodeUser[e.id]||((w=s.nodeUser[e.id])==null?void 0:w.length)==0)}])},[J(n(e.name)+" ",1),e.placeholder?(l(),t("span",M,"["+n(e.placeholder)+"]",1)):m("",!0)],2),(k=e.userVoList)!=null&&k.length?(l(),t("div",N,[(l(!0),t(x,null,b(e.userVoList,(a,i)=>(l(),t("div",{key:i,class:"w-10 text-center"},[r("div",j,[c(p,{"image-url":a.avatar,"onUpdate:imageUrl":h=>a.avatar=h,width:"30px",height:"30px"},null,8,["image-url","onUpdate:imageUrl"]),r("div",T,n(a.name),1)])]))),128))])):m("",!0),(l(!0),t(x,null,b(e.userVoList,(a,i)=>(l(),t("div",{key:"comment-"+i},[a.approveDesc?(l(),t("div",C,[r("div",G,[r("div",O,[c(p,{"image-url":a.avatar,"onUpdate:imageUrl":h=>a.avatar=h,disabled:"",width:"30px",height:"30px"},null,8,["image-url","onUpdate:imageUrl"])]),r("div",P,[r("span",Q,n(a.name),1),r("span",R,"(\u6DFB\u52A0\u4E86\u8BC4\u8BBA) "+n(a.showTime),1)])]),r("div",W,n(a.approveDesc),1)])):m("",!0)]))),128)),e.selectUser?(l(),t("div",X,[c(F,{disabled:s.disableSelect,orgList:s.nodeUser[e.id],"onUpdate:orgList":a=>s.nodeUser[e.id]=a,type:"user",multiple:e.multiple},null,8,["disabled","orgList","onUpdate:orgList","multiple"])])):m("",!0),e.branch.length>0?(l(),y(S,{key:2,type:"border-card","model-value":_(e),"onUpdate:modelValue":a=>f(u).set(e.id,a),class:"mt-4"},{default:g(()=>[(l(!0),t(x,null,b(e.branch,(a,i)=>(l(),y(U,{label:L(a,i),name:String(i),key:i},{default:g(()=>[r("div",Y,[c(v,{"node-user":s.nodeUser,disableSelect:s.disableSelect,row:a.children},null,8,["node-user","disableSelect","row"])])]),_:2},1032,["label","name"]))),128))]),_:2},1032,["model-value","onUpdate:modelValue"])):m("",!0)]}),_:2},1032,["color","icon"]))),128))]),_:1})])}}}),[["__scopeId","data-v-09906648"]]);export{Z as default};
