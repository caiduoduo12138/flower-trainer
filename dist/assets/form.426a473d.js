import{d as $,u as g}from"./index.0f5ebb0a.js";import{v as R,p as j,a as q,g as C}from"./fieldtype.651e3d76.js";import{l as T,r as c,R as S,aa as i,ah as E,m as b,D as h,E as d,t as I,L as r,I as V,J as v,u as e,F as J,j as L,n as O}from"./vue.4dfaac09.js";const z={class:"dialog-footer"},A=T({name:"systemFieldTypeDialog"}),G=T({...A,emits:["refresh"],setup(H,{expose:k,emit:_}){const x=_,{t:p}=$(),n=c(),m=c(!1),s=c(!1),l=S({id:"",columnType:"",attrType:"",packageName:"",createTime:""}),N=c({columnType:[{required:!0,message:"\u5B57\u6BB5\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:(t,a,u)=>{R(t,a,u,l.id!=="")}}],attrType:[{required:!0,message:"\u5C5E\u6027\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),w=async()=>{if(!await n.value.validate().catch(()=>{}))return!1;try{s.value=!0,l.id?await j(l):await q(l),g().success(p(l.id?"common.editSuccessText":"common.addSuccessText")),m.value=!1,x("refresh")}catch(t){g().error(t.msg)}finally{s.value=!1}},B=t=>{C(t).then(a=>{Object.assign(l,a.data)})};return k({openDialog:t=>{m.value=!0,O(()=>{var a;(a=n.value)==null||a.resetFields()}),t?(l.id=t,B(t)):l.id=""}}),(t,a)=>{const u=i("el-input"),f=i("el-form-item"),D=i("el-form"),y=i("el-button"),F=i("el-dialog"),U=E("loading");return b(),h(F,{title:e(l).id?t.$t("common.editBtn"):t.$t("common.addBtn"),modelValue:e(m),"onUpdate:modelValue":a[4]||(a[4]=o=>L(m)?m.value=o:null),width:"600","close-on-click-modal":!1,draggable:""},{footer:d(()=>[I("span",z,[r(y,{onClick:a[3]||(a[3]=o=>m.value=!1)},{default:d(()=>[V(v(t.$t("common.cancelButtonText")),1)]),_:1}),r(y,{type:"primary",onClick:w,disabled:e(s)},{default:d(()=>[V(v(t.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:d(()=>[J((b(),h(D,{ref_key:"dataFormRef",ref:n,model:e(l),rules:e(N),formDialogRef:"","label-width":"90px"},{default:d(()=>[r(f,{label:e(p)("fieldtype.columnType"),prop:"columnType"},{default:d(()=>[r(u,{modelValue:e(l).columnType,"onUpdate:modelValue":a[0]||(a[0]=o=>e(l).columnType=o),placeholder:e(p)("fieldtype.inputcolumnTypeTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(f,{label:e(p)("fieldtype.attrType"),prop:"attrType"},{default:d(()=>[r(u,{modelValue:e(l).attrType,"onUpdate:modelValue":a[1]||(a[1]=o=>e(l).attrType=o),placeholder:e(p)("fieldtype.inputattrTypeTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"]),r(f,{label:e(p)("fieldtype.packageName"),prop:"packageName"},{default:d(()=>[r(u,{modelValue:e(l).packageName,"onUpdate:modelValue":a[2]||(a[2]=o=>e(l).packageName=o),placeholder:e(p)("fieldtype.inputpackageNameTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[U,e(s)]])]),_:1},8,["title","modelValue"])}}});export{G as default};
