import{d as G,u as I}from"./index.0f5ebb0a.js";import{p as S,a as C,g as P}from"./goods.c4c6b31d.js";import{l as h,r as f,R,aa as u,ah as A,m as b,D as V,E as d,t as E,L as l,I as _,J as y,u as e,F as J,q as K,K as L,$ as z,j as H}from"./vue.4dfaac09.js";const M={class:"dialog-footer"},Q=h({name:"PayGoodsOrderDialog"}),W=h({...Q,emits:["refresh"],setup(X,{expose:O,emit:T}){const U=T,{t:s}=G(),g=f(),m=f(!1),n=f(!1),a=R({goodsOrderId:"",goodsId:"",goodsName:"",amount:"",userId:"",status:"",payOrderId:""}),x=f([{label:"\u5904\u7406\u5931\u8D25",value:"-1"},{label:"\u8BA2\u5355\u751F\u6210",value:"0"},{label:"\u652F\u4ED8\u6210\u529F",value:"1"},{label:"\u5904\u7406\u5B8C\u6210",value:"2"}]),N=f({goodsName:[{required:!0,message:"\u5546\u54C1\u540D\u5B57\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],amount:[{required:!0,message:"\u91D1\u989D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),w=async()=>{if(!await g.value.validate().catch(()=>{}))return!1;try{n.value=!0,a.goodsOrderId?await S(a):await C(a),I().success(s(a.goodsOrderId?"common.editSuccessText":"common.addSuccessText")),m.value=!1,U("refresh")}catch(t){I().error(t.msg)}finally{n.value=!1}},k=async t=>{n.value=!0;try{const o=await P(t);Object.assign(a,o.data)}catch{I().error("\u64CD\u4F5C\u5931\u8D25")}finally{n.value=!1}};return O({openDialog:t=>{m.value=!0,a.goodsOrderId="",g.value&&g.value.resetFields(),t&&(a.goodsOrderId=t,k(t))}}),(t,o)=>{const i=u("el-input"),p=u("el-form-item"),c=u("el-col"),$=u("el-option"),B=u("el-select"),F=u("el-row"),q=u("el-form"),v=u("el-button"),D=u("el-dialog"),j=A("loading");return b(),V(D,{"close-on-click-modal":!1,title:e(a).goodsOrderId?t.$t("common.editBtn"):t.$t("common.addBtn"),draggable:"",modelValue:e(m),"onUpdate:modelValue":o[7]||(o[7]=r=>H(m)?m.value=r:null)},{footer:d(()=>[E("span",M,[l(v,{onClick:o[6]||(o[6]=r=>m.value=!1)},{default:d(()=>[_(y(t.$t("common.cancelButtonText")),1)]),_:1}),l(v,{onClick:w,type:"primary",disabled:e(n)},{default:d(()=>[_(y(t.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:d(()=>[J((b(),V(q,{model:e(a),rules:e(N),"label-width":"90px",ref_key:"dataFormRef",ref:g},{default:d(()=>[l(F,{gutter:24},{default:d(()=>[l(c,{span:12,class:"mb20"},{default:d(()=>[l(p,{label:e(s)("order.goodsId"),prop:"goodsId"},{default:d(()=>[l(i,{placeholder:e(s)("order.inputGoodsIdTip"),modelValue:e(a).goodsId,"onUpdate:modelValue":o[0]||(o[0]=r=>e(a).goodsId=r)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),l(c,{span:12,class:"mb20"},{default:d(()=>[l(p,{label:e(s)("order.goodsName"),prop:"goodsName"},{default:d(()=>[l(i,{placeholder:e(s)("order.inputGoodsNameTip"),modelValue:e(a).goodsName,"onUpdate:modelValue":o[1]||(o[1]=r=>e(a).goodsName=r)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),l(c,{span:12,class:"mb20"},{default:d(()=>[l(p,{label:e(s)("order.amount"),prop:"amount"},{default:d(()=>[l(i,{placeholder:e(s)("order.inputAmountTip"),modelValue:e(a).amount,"onUpdate:modelValue":o[2]||(o[2]=r=>e(a).amount=r)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),l(c,{span:12,class:"mb20"},{default:d(()=>[l(p,{label:e(s)("order.userId"),prop:"userId"},{default:d(()=>[l(i,{placeholder:e(s)("order.inputUserIdTip"),modelValue:e(a).userId,"onUpdate:modelValue":o[3]||(o[3]=r=>e(a).userId=r)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),l(c,{span:12,class:"mb20"},{default:d(()=>[l(p,{label:e(s)("order.status"),prop:"status"},{default:d(()=>[l(B,{placeholder:e(s)("order.inputStatusTip"),modelValue:e(a).status,"onUpdate:modelValue":o[4]||(o[4]=r=>e(a).status=r)},{default:d(()=>[(b(!0),K(L,null,z(e(x),r=>(b(),V($,{key:r.value,label:r.label,value:r.value},null,8,["label","value"]))),128))]),_:1},8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),l(c,{span:12,class:"mb20"},{default:d(()=>[l(p,{label:e(s)("order.payOrderId"),prop:"payOrderId"},{default:d(()=>[l(i,{placeholder:e(s)("order.inputPayOrderIdTip"),modelValue:e(a).payOrderId,"onUpdate:modelValue":o[5]||(o[5]=r=>e(a).payOrderId=r)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[j,e(n)]])]),_:1},8,["title","modelValue"])}}});export{W as default};
