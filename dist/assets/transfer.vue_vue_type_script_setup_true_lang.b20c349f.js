import{t as y}from"./index.72be8179.js";import{aw as _,Z as r}from"./index.0f5ebb0a.js";import{l as L,r as n,aa as p,m as V,q as I,L as u,E as d,t as e,I as g}from"./vue.4dfaac09.js";const U={class:"space-y-4"},E={class:"w-full"},C=e("label",{class:"block pb-2"},[e("span",{class:"text-base font-medium after:content-['*'] after:text-red-500 after:ml-1"}," \u9009\u62E9\u8F6C\u529E\u4EBA\u5458 ")],-1),M={class:"w-full"},S=e("label",{class:"block pb-2"},[e("span",{class:"text-base font-medium after:content-['*'] after:text-red-500 after:ml-1"}," \u5BA1\u6838\u610F\u89C1 ")],-1),j={class:"flex justify-end gap-2"},q=L({__name:"transfer",emits:["taskSubmitEvent"],setup(D,{expose:b,emit:k}){const o=n(!1),t=n(""),i=n([]),c=n(),v=n();b({handle:(l,a)=>{t.value="",c.value=l,v.value=a,o.value=!0}});const w=k,x=async()=>{if(v.value&&c.value&&(i.value.length===0?(r.warning("\u8BF7\u9009\u62E9\u8F6C\u529E\u4EBA\u5458"),0):t.value.trim()?!(t.value.trim().length<2&&(r.warning("\u5BA1\u6838\u610F\u89C1\u81F3\u5C11\u9700\u89812\u4E2A\u5B57\u7B26"),1)):(r.warning("\u8BF7\u8F93\u5165\u5BA1\u6838\u610F\u89C1"),0)))try{const l={};l[`${c.value.nodeId}_approve_condition`]=!0;const a={paramMap:l,taskId:c.value.taskId,targetUserIdList:i.value.map(m=>m.id),taskLocalParamMap:{approveDesc:"\u8F6C\u529E\u4E8B\u7531\uFF1A"+t.value.trim()}};await y(a),r.success("\u8F6C\u529E\u6210\u529F"),o.value=!1,w("taskSubmitEvent")}catch{r.error("\u8F6C\u529E\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5")}};return(l,a)=>{const m=p("el-input"),f=p("el-button"),h=p("el-dialog");return V(),I("div",null,[u(h,{modelValue:o.value,"onUpdate:modelValue":a[3]||(a[3]=s=>o.value=s),width:"400px","close-on-click-modal":!1,"close-on-press-escape":!1,class:"transfer-dialog"},{footer:d(()=>[e("span",j,[u(f,{onClick:a[2]||(a[2]=s=>o.value=!1)},{default:d(()=>[g("\u53D6\u6D88")]),_:1}),u(f,{type:"primary",onClick:x},{default:d(()=>[g("\u786E\u5B9A")]),_:1})])]),default:d(()=>[e("div",U,[e("div",E,[C,u(_,{orgList:i.value,"onUpdate:orgList":a[0]||(a[0]=s=>i.value=s),type:"user",multiple:!0},null,8,["orgList"])]),e("div",M,[S,u(m,{modelValue:t.value,"onUpdate:modelValue":a[1]||(a[1]=s=>t.value=s),type:"textarea",maxlength:"100",rows:5,placeholder:"\u8BF7\u8F93\u5165\u5BA1\u6838\u610F\u89C1\uFF082-100\u5B57\uFF09","show-word-limit":""},null,8,["modelValue"])])])]),_:1},8,["modelValue"])])}}});export{q as _};
