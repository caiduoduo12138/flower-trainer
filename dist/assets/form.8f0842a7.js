import{u as j}from"./dict.10eb31b5.js";import{r as _,u as V}from"./index.0f5ebb0a.js";import{v as E,p as J,a as K,g as O}from"./sensitive.e2fa99d9.js";import{l as h,r as m,R as $,aa as o,ah as z,m as v,D as c,E as l,t as A,L as t,I as b,u as s,F as B,q as G,K as H,$ as M,J as N,j as P,n as Q}from"./vue.4dfaac09.js";const X={class:"dialog-footer"},Y=h({name:"SysSensitiveWordDialog"}),Z=h({...Y,emits:["refresh"],setup(ee,{expose:k,emit:I}){const w=I,p=m(),d=m(!1),u=m(!1),{sensitive_type:T}=j("sensitive_type"),a=$({sensitiveId:"",sensitiveWord:"",sensitiveType:"0",remark:""}),W=m({sensitiveWord:[{validator:_.overLength,trigger:"blur"},{validator:(i,e,n)=>{E(i,e,n,a.sensitiveId!=="")},trigger:"blur"},{required:!0,message:"\u654F\u611F\u8BCD\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],sensitiveType:[{required:!0,message:"\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],remark:[{validator:_.overLength,trigger:"blur"}]}),D=async()=>{if(!await p.value.validate().catch(()=>{}))return!1;try{u.value=!0,a.sensitiveId?await J(a):await K(a),V().success(a.sensitiveId?"\u4FEE\u6539\u6210\u529F":"\u6DFB\u52A0\u6210\u529F"),d.value=!1,w("refresh")}catch(i){V().error(i.msg)}finally{u.value=!1}},U=i=>{u.value=!0,O({sensitiveId:i}).then(e=>{Object.assign(a,e.data)}).finally(()=>{u.value=!1})};return k({openDialog:i=>{d.value=!0,a.sensitiveId="",Q(()=>{var e;(e=p.value)==null||e.resetFields()}),i&&(a.sensitiveId=i,U(i))}}),(i,e)=>{const n=o("el-input"),f=o("el-form-item"),g=o("el-col"),q=o("el-radio"),x=o("el-radio-group"),F=o("el-row"),L=o("el-form"),y=o("el-button"),R=o("el-dialog"),C=z("loading");return v(),c(R,{title:s(a).sensitiveId?"\u7F16\u8F91":"\u65B0\u589E",modelValue:s(d),"onUpdate:modelValue":e[4]||(e[4]=r=>P(d)?d.value=r:null),"close-on-click-modal":!1,draggable:""},{footer:l(()=>[A("span",X,[t(y,{onClick:e[3]||(e[3]=r=>d.value=!1)},{default:l(()=>[b("\u53D6\u6D88")]),_:1}),t(y,{type:"primary",onClick:D,disabled:s(u)},{default:l(()=>[b("\u786E\u8BA4")]),_:1},8,["disabled"])])]),default:l(()=>[B((v(),c(L,{ref_key:"dataFormRef",ref:p,model:s(a),rules:s(W),formDialogRef:"","label-width":"90px"},{default:l(()=>[t(F,{gutter:24},{default:l(()=>[t(g,{span:24,class:"mb20"},{default:l(()=>[t(f,{label:"\u654F\u611F\u8BCD",prop:"sensitiveWord"},{default:l(()=>[t(n,{modelValue:s(a).sensitiveWord,"onUpdate:modelValue":e[0]||(e[0]=r=>s(a).sensitiveWord=r),placeholder:"\u8BF7\u8F93\u5165\u654F\u611F\u8BCD"},null,8,["modelValue"])]),_:1})]),_:1}),t(g,{span:24,class:"mb20"},{default:l(()=>[t(f,{label:"\u7C7B\u578B",prop:"sensitiveType"},{default:l(()=>[t(x,{modelValue:s(a).sensitiveType,"onUpdate:modelValue":e[1]||(e[1]=r=>s(a).sensitiveType=r)},{default:l(()=>[(v(!0),G(H,null,M(s(T),(r,S)=>(v(),c(q,{label:r.value,border:"",key:S},{default:l(()=>[b(N(r.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1}),t(g,{span:24,class:"mb20"},{default:l(()=>[t(f,{label:"\u5907\u6CE8",prop:"remark"},{default:l(()=>[t(n,{modelValue:s(a).remark,"onUpdate:modelValue":e[2]||(e[2]=r=>s(a).remark=r),placeholder:"\u8BF7\u8F93\u5165\u5907\u6CE8"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[C,s(u)]])]),_:1},8,["title","modelValue"])}}});export{Z as default};
