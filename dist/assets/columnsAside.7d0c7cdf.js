import{j as w,w as E,A as o,k as z,_ as J}from"./index.0f5ebb0a.js";import{l as _,r as b,ap as N,aq as K,as as B,R as F,h as G,N as Q,az as U,e as V,aa as j,m as d,q as c,L as I,E as W,t as h,K as X,$ as Y,u as i,y,J as D,n as Z}from"./vue.4dfaac09.js";const ee={class:"layout-columns-aside"},le=["onClick","onMouseenter","title"],te={class:"columns-vertical-title font12"},ne=["href"],se={class:"columns-vertical-title font12"},ae=_({name:"layoutColumnsAside"}),ie=J(_({...ae,setup(oe){const x=b([]),H=b(),f=w(),R=E(),{routesList:L,isColumnsMenuHover:T,isColumnsNavHover:q}=N(f),{themeConfig:u}=N(R),O=K(),$=B(),t=F({columnsAsideList:[],liIndex:0,liOldIndex:null,liHoverIndex:null,liOldPath:null,difference:0,routeSplit:[]}),g=e=>{t.liIndex=e,H.value.style.top=`${x.value[e].offsetTop+t.difference}px`},S=e=>{Z(()=>{g(e)})},m=e=>{const n=k(L.value,e);let a={children:[]};return t.columnsAsideList.map((s,l)=>{s.path===n.path&&(s.k=l,a.item={...s},a.children=[{...s}],s.children&&(a.children=s.children))}),a},M=e=>e.filter(n=>{var a;return!((a=n.meta)!=null&&a.isHide)}).map(n=>((n=Object.assign({},n)).children&&(n.children=M(n.children)),n)),k=(e,n)=>{let a;return e.forEach(s=>{s.path!==n?s.children&&k(s.children,n)&&(a=s):a=s}),a};return G(()=>{(()=>{var n;t.columnsAsideList=M(L.value);const e=m(O.path);if(Object.keys(e).length<=0)return!1;S((n=e.item)==null?void 0:n.k),o.emit("setSendColumnsChildren",e)})(),o.on("restoreDefault",()=>{t.liOldIndex=null,t.liOldPath=null})}),Q(()=>{o.off("restoreDefault",()=>{})}),U(e=>{(n=>{const a=k(L.value,n),s=t.columnsAsideList.find(l=>l.path===a.path);if(!s)return!1;setTimeout(()=>{S(s.k)},0)})(e.path),o.emit("setSendColumnsChildren",m(e.path))}),V(z.state,e=>{if(e.themeConfig.themeConfig.columnsAsideStyle==="columnsRound"?t.difference=3:t.difference=0,e.routesList.isColumnsMenuHover||e.routesList.isColumnsNavHover){if(t.liHoverIndex=t.liOldIndex,!t.liOldPath)return!1;o.emit("setSendColumnsChildren",m(t.liOldPath))}else t.liHoverIndex=null,o.emit("setSendColumnsChildren",m(O.path))},{deep:!0}),(e,n)=>{const a=j("SvgIcon"),s=j("el-scrollbar");return d(),c("div",ee,[I(s,null,{default:W(()=>[h("ul",{onMouseleave:n[0]||(n[0]=l=>(async()=>{await f.setColumnsNavHover(!1),setTimeout(()=>{T||q||o.emit("restoreDefault")},100)})())},[(d(!0),c(X,null,Y(i(t).columnsAsideList,(l,r)=>(d(),c("li",{key:r,onClick:v=>((A,p)=>{g(p);let{path:C,redirect:P}=A;P?$.push(P):$.push(C)})(l,r),onMouseenter:v=>((A,p)=>{if(!u.value.isColumnsMenuHoverPreload)return!1;let{path:C}=A;t.liOldPath=C,t.liOldIndex=p,t.liHoverIndex=p,o.emit("setSendColumnsChildren",m(C)),f.setColumnsMenuHover(!1),f.setColumnsNavHover(!0)})(l,r),ref_for:!0,ref:v=>{v&&(i(x)[r]=v)},class:y({"layout-columns-active":i(t).liIndex===r,"layout-columns-hover":i(t).liHoverIndex===r}),title:e.$t(l.name)},[!l.meta.isLink||l.meta.isLink&&l.meta.isIframe?(d(),c("div",{key:0,class:y(i(u).columnsAsideLayout)},[I(a,{name:l.meta.icon},null,8,["name"]),h("div",te,D(e.$t(l.name)&&e.$t(l.name).length>=4?e.$t(l.name).substr(0,i(u).columnsAsideLayout==="columns-vertical"?4:3):e.$t(l.name)),1)],2)):(d(),c("div",{key:1,class:y(i(u).columnsAsideLayout)},[h("a",{href:l.meta.isLink,target:"_blank"},[I(a,{name:l.meta.icon},null,8,["name"]),h("div",se,D(e.$t(l.name)&&e.$t(l.name).length>=4?e.$t(l.name).substr(0,i(u).columnsAsideLayout==="columns-vertical"?4:3):e.$t(l.name)),1)],8,ne)],2))],42,le))),128)),h("div",{ref_key:"columnsAsideActiveRef",ref:H,class:y(i(u).columnsAsideStyle)},null,2)],32)]),_:1})])}}}),[["__scopeId","data-v-9224e172"]]);export{ie as default};
