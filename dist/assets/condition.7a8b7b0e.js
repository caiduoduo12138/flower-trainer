import{u as z}from"./flow.3bb50ae4.js";import{o as B,aw as P,_ as F}from"./index.0f5ebb0a.js";import{l as G,a as s,r as J,e as Q,aa as m,m as n,q as k,L as E,E as f,K as V,$ as h,D as i,u as R,H as r,t as j}from"./vue.4dfaac09.js";const T={style:{"margin-top":"20px"}},W={style:{"margin-top":"20px"}},X=F(G({__name:"condition",props:{condition:{type:Object,default:()=>({})}},setup(l){let q=z();const C=s(()=>q.step2),H=["OrgSelector","input","textarea","inputNumber","datePicker"],v=s(()=>{const t=C.value,e=B.deepClone(t.filter(u=>H.includes(u.type)));return e.push({id:"root",field:"root",name:"\u53D1\u8D77\u4EBA",typeName:"\u7528\u6237",type:"OrgSelector",props:{type:"user"},value:[]}),e});let d=l;const o=s(()=>{const t={};return v.value.forEach(e=>{t[e.field]=e}),t}),x=s({get(){let t=d.condition.value;return t&&t.length>0?t.map(e=>e.key):void 0},set(t){var u,p;let e=(((p=(u=v.value.find(c=>c.field===d.condition.key))==null?void 0:u.props)==null?void 0:p.options)||[]).filter(c=>t.indexOf(c.key)>=0);d.condition.value=e}});let I=J({OrgSelector:[{key:"in",name:"\u5C5E\u4E8E"},{key:"notin",name:"\u4E0D\u5C5E\u4E8E"}],input:[{key:"==",name:"\u7B49\u4E8E"},{key:"!=",name:"\u4E0D\u7B49\u4E8E"},{key:"contain",name:"\u5305\u542B"},{key:"notcontain",name:"\u4E0D\u5305\u542B"}],textarea:[{key:"==",name:"\u7B49\u4E8E"},{key:"!=",name:"\u4E0D\u7B49\u4E8E"},{key:"contain",name:"\u5305\u542B"},{key:"notcontain",name:"\u4E0D\u5305\u542B"}],textArea:[{key:"==",name:"\u7B49\u4E8E"},{key:"!=",name:"\u4E0D\u7B49\u4E8E"},{key:"contain",name:"\u5305\u542B"},{key:"notcontain",name:"\u4E0D\u5305\u542B"}],inputNumber:[{key:"==",name:"\u7B49\u4E8E"},{key:"!=",name:"\u4E0D\u7B49\u4E8E"},{key:">",name:"\u5927\u4E8E"},{key:">=",name:"\u5927\u4E8E\u7B49\u4E8E"},{key:"<",name:"\u5C0F\u4E8E"},{key:"<=",name:"\u5C0F\u4E8E\u7B49\u4E8E"}],datePicker:[{key:"==",name:"\u7B49\u4E8E"},{key:"!=",name:"\u4E0D\u7B49\u4E8E"},{key:">",name:"\u5927\u4E8E"},{key:">=",name:"\u5927\u4E8E\u7B49\u4E8E"},{key:"<",name:"\u5C0F\u4E8E"},{key:"<=",name:"\u5C0F\u4E8E\u7B49\u4E8E"}]});return Q(()=>d.condition.key,t=>{var e;((e=o.value[t])==null?void 0:e.type)==="OrgSelector"&&(d.condition.value&&Array.isArray(d.condition.value)||(d.condition.value=[]))},{immediate:!0}),(t,e)=>{var b,O,S,U,_,w,L,D,N,Y,A,M;const u=m("el-option"),p=m("el-select"),c=m("el-input"),K=m("el-input-number"),$=m("el-date-picker");return n(),k("div",null,[E(p,{modelValue:l.condition.key,"onUpdate:modelValue":e[0]||(e[0]=a=>l.condition.key=a),placeholder:"\u9009\u62E9\u8868\u5355",style:{width:"100%"}},{default:f(()=>[(n(!0),k(V,null,h(v.value,a=>(n(),i(u,{key:a.field,label:a.title||a.name,value:a.field},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),E(p,{modelValue:l.condition.expression,"onUpdate:modelValue":e[1]||(e[1]=a=>l.condition.expression=a),placeholder:"\u9009\u62E9\u5173\u7CFB",style:{width:"100%","margin-top":"20px"}},{default:f(()=>{var a;return[(n(!0),k(V,null,h((a=o.value[l.condition.key])!=null&&a.type?R(I)[o.value[l.condition.key].type]:[],y=>(n(),i(u,{key:y.key,label:y.name,value:y.key},null,8,["label","value"]))),128))]}),_:1},8,["modelValue"]),((b=o.value[l.condition.key])==null?void 0:b.type)==="input"||((O=o.value[l.condition.key])==null?void 0:O.type)==="textarea"?(n(),i(c,{key:0,modelValue:l.condition.value,"onUpdate:modelValue":e[2]||(e[2]=a=>l.condition.value=a),style:{"margin-top":"20px"},placeholder:"\u6761\u4EF6\u503C"},null,8,["modelValue"])):r("",!0),((S=o.value[l.condition.key])==null?void 0:S.type)==="Money"||((U=o.value[l.condition.key])==null?void 0:U.type)==="inputNumber"?(n(),i(K,{key:1,modelValue:l.condition.value,"onUpdate:modelValue":e[3]||(e[3]=a=>l.condition.value=a),placeholder:"\u6761\u4EF6\u503C",style:{width:"100%","margin-top":"20px"},"controls-position":"right"},null,8,["modelValue"])):r("",!0),((_=o.value[l.condition.key])==null?void 0:_.type)==="datePicker"?(n(),i($,{key:2,"value-format":"YYYY-MM-DD",type:"date",class:"formDate",modelValue:l.condition.value,"onUpdate:modelValue":e[4]||(e[4]=a=>l.condition.value=a),placeholder:"\u6761\u4EF6\u503C",style:{width:"100%","margin-top":"20px"}},null,8,["modelValue"])):r("",!0),((w=o.value[l.condition.key])==null?void 0:w.type)==="SingleSelect"?(n(),i(p,{key:3,modelValue:x.value,"onUpdate:modelValue":e[5]||(e[5]=a=>x.value=a),style:{width:"100%","margin-top":"20px"},multiple:"","collapse-tags":"","collapse-tags-tooltip":"",placeholder:"\u8BF7\u9009\u62E9\u503C"},{default:f(()=>{var a,y;return[(n(!0),k(V,null,h(((y=(a=o.value[l.condition.key])==null?void 0:a.props)==null?void 0:y.options)||[],g=>(n(),i(u,{key:g.key,label:g.value,value:g.key},null,8,["label","value"]))),128))]}),_:1},8,["modelValue"])):r("",!0),j("div",T,[((L=o.value[l.condition.key])==null?void 0:L.type)==="OrgSelector"&&((N=(D=o.value[l.condition.key])==null?void 0:D.props)==null?void 0:N.type)==="user"?(n(),i(P,{key:0,orgList:l.condition.value,"onUpdate:orgList":e[6]||(e[6]=a=>l.condition.value=a),type:"user",multiple:!0},null,8,["orgList"])):r("",!0)]),j("div",W,[((Y=o.value[l.condition.key])==null?void 0:Y.type)==="OrgSelector"&&((M=(A=o.value[l.condition.key])==null?void 0:A.props)==null?void 0:M.type)==="dept"?(n(),i(P,{key:0,orgList:l.condition.value,"onUpdate:orgList":e[7]||(e[7]=a=>l.condition.value=a),type:"dept",multiple:!0},null,8,["orgList"])):r("",!0)])])}}}),[["__scopeId","data-v-0601c638"]]);export{X as default};
