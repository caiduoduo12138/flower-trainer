import{y as ce,b as re,_ as Me,__tla as Oe}from"./index.0f5ebb0a.js";import{a as Ee,m as Fe}from"./wx-material.5229d147.js";import{l as me,r as C,R as Te,aa as g,ah as Ae,m as s,q as c,L as i,E as r,t as o,I as _,J as x,K as ve,$ as Re,u as e,y as S,H as p,D as P,F as Le,j as $e,av as pe,at as Be,au as He}from"./vue.4dfaac09.js";let he,Ne=Promise.all([(()=>{try{return Oe}catch{}})()]).then(async()=>{let v,D,M,O,E,F,T,A,R,L,$,B,H,N,j,q,J,K,W,z,G,Q,X,Y,Z,ee,le,ae;v=U=>(Be("data-v-32341992"),U=U(),He(),U),D={class:"left"},M={class:"select-item"},O=["onClick"],E={class:"news-content"},F=["src"],T={class:"news-content-title"},A={key:0,class:"child"},R=["onClick"],L={class:"news-content-item"},$={class:"news-content-item-title"},B={class:"news-content-item-img"},H=["src"],N={class:"child"},j={class:"right"},q=v(()=>o("br",null,null,-1)),J=v(()=>o("br",null,null,-1)),K=v(()=>o("br",null,null,-1)),W=v(()=>o("br",null,null,-1)),z=v(()=>o("div",{class:"input-tt"},"\u5C01\u9762\u548C\u6458\u8981\uFF1A",-1)),G={class:"thumb-div"},Q=["src"],X={class:"thumb-but"},Y=v(()=>o("div",{class:"input-tt"},"\u6807\u9898\uFF1A",-1)),Z=v(()=>o("div",{class:"input-tt"},"\u4F5C\u8005\uFF1A",-1)),ee=v(()=>o("div",{class:"input-tt"},"\u539F\u6587\u5730\u5740\uFF1A",-1)),le={class:"dialog-footer"},ae=me({name:"wx-news-form"}),he=Me(me({...ae,emits:["ok"],setup(U,{expose:ke,emit:Ce}){const _e=pe(()=>re(()=>import("./main.ab931a88.js").then(async t=>(await t.__tla,t)),["assets/main.ab931a88.js","assets/index.0f5ebb0a.js","assets/vue.4dfaac09.js","assets/index.3d43c53c.css","assets/table.6d12d51c.js","assets/wx-material.5229d147.js","assets/main.34e1f366.css"])),ge=pe(()=>re(()=>import("./index.afd7abe2.js"),["assets/index.afd7abe2.js","assets/index.0f5ebb0a.js","assets/vue.4dfaac09.js","assets/index.3d43c53c.css"])),te=C(),h=C(!1),k=C("add"),y=C(!1),ne=Ce,ye=()=>{ce().confirm("\u4FEE\u6539\u5185\u5BB9\u53EF\u80FD\u8FD8\u672A\u4FDD\u5B58\uFF0C\u786E\u5B9A\u5173\u95ED\u5417?").then(()=>{h.value=!1})},w=C(),l=C([{title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}]),a=C(0),oe=C(),ue=Te({mediaType:"image",title:"",introduction:"",appId:""}),fe=()=>{te.value.openDialog({type:"image",accountId:w.value})},be=t=>{l.value[a.value].thumbMediaId=t.data.mediaId,l.value[a.value].thumbUrl=t.data.url},Ue=()=>{y.value=!0,k.value==="add"&&Ee({articles:l.value,appId:w.value}).then(()=>{y.value=!1,h.value=!1,a.value=0,l.value=[{title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}],ne("ok")}).finally(()=>{y.value=!1}),k.value==="edit"&&Fe({articles:l.value,mediaId:oe.value,appId:w.value}).then(()=>{y.value=!1,h.value=!1,a.value=0,l.value=[{title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}],ne("ok")}).finally(()=>{y.value=!1})},ie=t=>{a.value=t},se=t=>{ce().confirm("\u786E\u5B9A\u5220\u9664\u8BE5\u56FE\u6587\u5417?").then(()=>{l.value.splice(t,1),a.value===t&&(a.value=0)})},we=()=>{l.value.push({title:"",thumbMediaId:"",author:"",digest:"",showCoverPic:"",content:"",contentSourceUrl:"",needOpenComment:"",onlyFansCanComment:"",thumbUrl:""}),a.value=l.value.length-1},de=t=>{const u=l.value[t];l.value[t]=l.value[t+1],l.value[t+1]=u,a.value=t+1};return ke({openDialog:(t,u,m,I="add")=>{w.value=t.accountId,ue.appId=t.accountId,h.value=!0,k.value="add",u&&(l.value=u),m&&(oe.value=m||""),I&&(k.value=I)}}),(t,u)=>{const m=g("el-button"),I=g("Plus"),Ie=g("el-icon"),Ve=g("editor"),xe=g("el-row"),V=g("el-input"),Se=g("el-dialog"),Pe=Ae("loading");return s(),c(ve,null,[i(Se,{title:e(k)==="add"?"\u65B0\u5EFA\u56FE\u6587":"\u4FEE\u6539\u56FE\u6587","before-close":ye,"close-on-click-modal":!1,modelValue:e(h),"onUpdate:modelValue":u[6]||(u[6]=n=>$e(h)?h.value=n:null),"destroy-on-close":!0,width:"80%",top:"20px"},{footer:r(()=>[o("span",le,[i(m,{onClick:u[5]||(u[5]=n=>h.value=!1)},{default:r(()=>[_(x(t.$t("common.cancelButtonText")),1)]),_:1}),i(m,{type:"primary",onClick:Ue},{default:r(()=>[_(x(t.$t("common.confirmButtonText")),1)]),_:1})])]),default:r(()=>[o("div",D,[o("div",M,[(s(!0),c(ve,null,Re(e(l),(n,d)=>(s(),c("div",{key:n.id},[d==0?(s(),c("div",{key:0,class:S(["news-main father",{activeAddNews:e(a)===d}]),onClick:f=>ie(d)},[o("div",E,[n.thumbUrl?(s(),c("img",{key:0,class:"material-img",src:n.thumbUrl},null,8,F)):p("",!0),o("div",T,x(n.title),1)]),e(l).length>1?(s(),c("div",A,[i(m,{icon:"el-icon-top",onClick:f=>de(d)},{default:r(()=>[_("\u4E0B\u79FB")]),_:2},1032,["onClick"]),e(k)=="add"?(s(),P(m,{key:0,icon:"el-icon-delete",onClick:f=>se(d)},{default:r(()=>[_("\u5220\u9664 ")]),_:2},1032,["onClick"])):p("",!0)])):p("",!0)],10,O)):p("",!0),d>0?(s(),c("div",{key:1,class:S(["news-main-item father",{activeAddNews:e(a)===d}]),onClick:f=>ie(d)},[o("div",L,[o("div",$,x(n.title),1),o("div",B,[n.thumbUrl?(s(),c("img",{key:0,class:"material-img",src:n.thumbUrl,height:"100%"},null,8,H)):p("",!0)])]),o("div",N,[e(l).length>d+1?(s(),P(m,{key:0,icon:"el-icon-sort-down",onClick:f=>de(d)},{default:r(()=>[_("\u4E0B\u79FB ")]),_:2},1032,["onClick"])):p("",!0),i(m,{icon:"el-icon-sort-up",onClick:f=>(b=>{const De=l[b];l[b]=l[b-1],l[b-1]=De,a.value=b-1})(d)},{default:r(()=>[_("\u4E0A\u79FB")]),_:2},1032,["onClick"]),e(k)=="add"?(s(),P(m,{key:1,icon:"el-icon-delete",onClick:f=>se(d)},{default:r(()=>[_("\u5220\u9664 ")]),_:2},1032,["onClick"])):p("",!0)])],10,R)):p("",!0)]))),128)),e(l).length<8&&e(k)=="add"?(s(),c("div",{key:0,class:"news-main-plus",onClick:we},[i(Ie,null,{default:r(()=>[i(I)]),_:1})])):p("",!0)])]),Le((s(),c("div",j,[i(xe,null,{default:r(()=>[i(Ve,{"get-html":e(l)[e(a)].content,"onUpdate:getHtml":u[0]||(u[0]=n=>e(l)[e(a)].content=n),style:{"margin-top":"20px"}},null,8,["get-html"])]),_:1}),q,J,K,W,z,o("div",null,[o("div",G,[e(l)[e(a)].thumbUrl?(s(),c("img",{key:0,class:S(["material-img",e(a)===0?"avatar":"avatar1"]),src:e(l)[e(a)].thumbUrl},null,10,Q)):(s(),c("i",{key:1,class:S(["el-icon-plus avatar-uploader-icon",e(a)===0?"avatar":"avatar1"])},null,2)),o("div",X,[i(e(ge),{uploadData:e(ue),onSuccess:be},null,8,["uploadData"]),i(m,{type:"primary",onClick:fe},{default:r(()=>[_("\u7D20\u6750\u5E93\u9009\u62E9")]),_:1})])]),i(V,{modelValue:e(l)[e(a)].digest,"onUpdate:modelValue":u[1]||(u[1]=n=>e(l)[e(a)].digest=n),rows:6,type:"textarea",placeholder:"\u8BF7\u8F93\u5165\u6458\u8981",class:"digest",maxlength:"120"},null,8,["modelValue"])]),Y,i(V,{modelValue:e(l)[e(a)].title,"onUpdate:modelValue":u[2]||(u[2]=n=>e(l)[e(a)].title=n),placeholder:"\u8BF7\u8F93\u5165\u6807\u9898"},null,8,["modelValue"]),Z,i(V,{modelValue:e(l)[e(a)].author,"onUpdate:modelValue":u[3]||(u[3]=n=>e(l)[e(a)].author=n),placeholder:"\u8BF7\u8F93\u5165\u4F5C\u8005"},null,8,["modelValue"]),ee,i(V,{modelValue:e(l)[e(a)].contentSourceUrl,"onUpdate:modelValue":u[4]||(u[4]=n=>e(l)[e(a)].contentSourceUrl=n),placeholder:"\u8BF7\u8F93\u5165\u539F\u6587\u5730\u5740"},null,8,["modelValue"])])),[[Pe,e(y)]])]),_:1},8,["title","modelValue"]),i(e(_e),{ref_key:"WxMaterialSelectRef",ref:te},null,512)],64)}}}),[["__scopeId","data-v-32341992"]])});export{Ne as __tla,he as default};
