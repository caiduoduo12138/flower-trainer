import{d as $,r as u,u as b}from"./index.0f5ebb0a.js";import{v as q,a as F,b as R,p as j,c as S,g as E}from"./i18n.f293e7ea.js";import{l as v,r as c,R as I,aa as m,ah as J,m as V,D as C,E as i,t as K,L as n,I as y,J as _,u as r,F as O,j as Z,n as A}from"./vue.4dfaac09.js";const G={class:"dialog-footer"},H=v({name:"SysI18nDialog"}),M=v({...H,emits:["refresh"],setup(N,{expose:x,emit:T}){const z=T,{t:d}=$(),p=c(),s=c(!1),g=c(!1),a=I({id:"",name:"",zhCn:"",en:""}),w=c({name:[{validator:u.overLength,trigger:"blur"},{required:!0,message:"name\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:u.noChinese,trigger:"blur"},{validator:(l,e,t)=>{q(l,e,t,a.id!=="")},trigger:"blur"}],zhCn:[{validator:u.overLength,trigger:"blur"},{required:!0,message:"\u4E2D\u6587\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:(l,e,t)=>{F(l,e,t,a.id!=="")},trigger:"blur"}],en:[{validator:u.overLength,trigger:"blur"},{required:!0,message:"\u82F1\u6587\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:u.letter,trigger:"blur"},{validator:(l,e,t)=>{R(l,e,t,a.id!=="")},trigger:"blur"}]}),k=async()=>{if(!await p.value.validate().catch(()=>{}))return!1;try{g.value=!0,a.id?await j(a):await S(a),b().success(d(a.id?"common.editSuccessText":"common.addSuccessText")),s.value=!1,z("refresh")}catch(l){b().error(l.msg)}finally{g.value=!1}},B=l=>{E(l).then(e=>{Object.assign(a,e.data)})};return x({openDialog:l=>{s.value=!0,a.id="",A(()=>{var e;(e=p.value)==null||e.resetFields()}),l&&(a.id=l,B(l))}}),(l,e)=>{const t=m("el-input"),f=m("el-form-item"),D=m("el-form"),h=m("el-button"),L=m("el-dialog"),U=J("loading");return V(),C(L,{"close-on-click-modal":!1,width:"600",title:r(a).id?l.$t("common.editBtn"):l.$t("common.addBtn"),draggable:"",modelValue:r(s),"onUpdate:modelValue":e[4]||(e[4]=o=>Z(s)?s.value=o:null)},{footer:i(()=>[K("span",G,[n(h,{onClick:e[3]||(e[3]=o=>s.value=!1)},{default:i(()=>[y(_(l.$t("common.cancelButtonText")),1)]),_:1}),n(h,{onClick:k,type:"primary",disabled:r(g)},{default:i(()=>[y(_(l.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:i(()=>[O((V(),C(D,{model:r(a),rules:r(w),formDialogRef:"","label-width":"90px",ref_key:"dataFormRef",ref:p},{default:i(()=>[n(f,{label:r(d)("i18n.name"),prop:"name"},{default:i(()=>[n(t,{placeholder:r(d)("i18n.inputKeyTip"),modelValue:r(a).name,"onUpdate:modelValue":e[0]||(e[0]=o=>r(a).name=o)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),n(f,{label:r(d)("i18n.zhCn"),prop:"zhCn"},{default:i(()=>[n(t,{placeholder:r(d)("i18n.inputZhCnTip"),modelValue:r(a).zhCn,"onUpdate:modelValue":e[1]||(e[1]=o=>r(a).zhCn=o)},null,8,["placeholder","modelValue"])]),_:1},8,["label"]),n(f,{label:r(d)("i18n.en"),prop:"en"},{default:i(()=>[n(t,{placeholder:r(d)("i18n.inputEnTip"),modelValue:r(a).en,"onUpdate:modelValue":e[2]||(e[2]=o=>r(a).en=o)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1},8,["model","rules"])),[[U,r(g)]])]),_:1},8,["title","modelValue"])}}});export{M as default};
