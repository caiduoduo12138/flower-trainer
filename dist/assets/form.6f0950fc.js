import{u as ee}from"./dict.10eb31b5.js";import{d as le,r as h,u as x}from"./index.0f5ebb0a.js";import{v as ae,p as te,a as re,g as oe}from"./client.63ff5fbd.js";import{l as L,r as V,R as ie,aa as d,ah as de,m as u,D as p,E as l,t as ue,L as t,I as g,J as _,u as e,F as ne,q as y,K as v,$ as T,H as z,j as B,n as se}from"./vue.4dfaac09.js";const ce={class:"dialog-footer"},pe=L({name:"SysOauthClientDetailsDialog"}),me=L({...pe,emits:["refresh"],setup(be,{expose:Q,emit:C}){const D=C,{t:i}=le(),F=V(),f=V(!1),k=V(!1),{grant_types:$,common_status:j,captcha_flag_types:A,enc_flag_types:q}=ee("grant_types","common_status","captcha_flag_types","enc_flag_types"),r=ie({id:"",clientId:"",clientSecret:"",scope:"server",authorizedGrantTypes:[],webServerRedirectUri:"",authorities:"",accessTokenValidity:43200,refreshTokenValidity:2592001,autoapprove:"true",delFlag:"",createBy:"",updateBy:"",createTime:"",updateTime:"",tenantId:"",onlineQuantity:"1",captchaFlag:"1",encFlag:"1"}),w=V("1"),H=V({clientId:[{validator:h.overLength,trigger:"blur"},{required:!0,message:"\u7F16\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:h.validatorLowercase,trigger:"blur"},{validator:(n,o,b)=>{ae(n,o,b,r.id!=="")},trigger:"blur"}],clientSecret:[{validator:h.overLength,trigger:"blur"},{required:!0,message:"\u5BC6\u94A5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:h.validatorLower,trigger:"blur"}],scope:[{validator:h.overLength,trigger:"blur"},{required:!0,message:"\u57DF\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],authorizedGrantTypes:[{required:!0,message:"\u6388\u6743\u6A21\u5F0F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],accessTokenValidity:[{required:!0,message:"\u4EE4\u724C\u65F6\u6548\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{type:"number",min:1,message:"\u4EE4\u724C\u65F6\u6548\u4E0D\u80FD\u5C0F\u4E8E\u4E00\u5C0F\u65F6",trigger:"blur"}],refreshTokenValidity:[{required:!0,message:"\u5237\u65B0\u65F6\u6548\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{type:"number",min:1,message:"\u5237\u65B0\u65F6\u6548\u4E0D\u80FD\u5C0F\u4E8E\u4E24\u5C0F\u65F6",trigger:"blur"}],captchaFlag:[{required:!0,message:"\u662F\u5426\u5F00\u542F\u9A8C\u8BC1\u7801\u6821\u9A8C",trigger:"blur"}],encFlag:[{required:!0,message:"\u662F\u5426\u5F00\u542F\u5BC6\u7801\u52A0\u5BC6\u4F20\u8F93",trigger:"blur"}],onlineQuantity:[{required:!0,message:"\u662F\u5426\u5141\u8BB8\u540C\u65F6\u5728\u7EBF",trigger:"blur"}],autoapprove:[{required:!0,message:"\u81EA\u52A8\u653E\u884C\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],webServerRedirectUri:[{validator:h.overLength,trigger:"blur"},{required:!0,message:"\u56DE\u8C03\u5730\u5740\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),O=async()=>{if(!await F.value.validate().catch(()=>{}))return!1;try{k.value=!0,r.id?await te(r):await re(r),x().success(i(r.id?"common.editSuccessText":"common.addSuccessText")),f.value=!1,D("refresh")}catch(n){x().error(n.msg)}finally{k.value=!1}},E=n=>{oe(n).then(o=>{Object.assign(r,o.data)})};return Q({openDialog:n=>{f.value=!0,r.id="",se(()=>{var o;(o=F.value)==null||o.resetFields()}),n&&(r.id=n,E(n))}}),(n,o)=>{const b=d("el-input"),s=d("el-form-item"),c=d("el-col"),J=d("el-option"),K=d("el-select"),R=d("el-input-number"),U=d("el-radio"),S=d("el-radio-group"),G=d("el-row"),W=d("info-filled"),M=d("el-icon"),N=d("el-collapse-item"),P=d("el-collapse"),X=d("el-form"),I=d("el-button"),Y=d("el-dialog"),Z=de("loading");return u(),p(Y,{"close-on-click-modal":!1,title:e(r).id?n.$t("common.editBtn"):n.$t("common.addBtn"),draggable:"",modelValue:e(f),"onUpdate:modelValue":o[14]||(o[14]=a=>B(f)?f.value=a:null)},{footer:l(()=>[ue("span",ce,[t(I,{onClick:o[13]||(o[13]=a=>f.value=!1)},{default:l(()=>[g(_(n.$t("common.cancelButtonText")),1)]),_:1}),t(I,{onClick:O,type:"primary",disabled:e(k)},{default:l(()=>[g(_(n.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:l(()=>[ne((u(),p(X,{model:e(r),rules:e(H),formDialogRef:"","label-width":"120px",ref_key:"dataFormRef",ref:F},{default:l(()=>[t(G,{gutter:20},{default:l(()=>[t(c,{span:12,class:"mb20"},{default:l(()=>[t(s,{label:e(i)("client.clientId"),prop:"clientId"},{default:l(()=>[t(b,{placeholder:e(i)("client.inputClientIdTip"),modelValue:e(r).clientId,"onUpdate:modelValue":o[0]||(o[0]=a=>e(r).clientId=a)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),t(c,{span:12,class:"mb20"},{default:l(()=>[t(s,{label:e(i)("client.clientSecret"),prop:"clientSecret"},{default:l(()=>[t(b,{placeholder:e(i)("client.inputClientSecretTip"),modelValue:e(r).clientSecret,"onUpdate:modelValue":o[1]||(o[1]=a=>e(r).clientSecret=a)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),t(c,{span:12,class:"mb20"},{default:l(()=>[t(s,{label:e(i)("client.scope"),prop:"scope"},{default:l(()=>[t(b,{placeholder:e(i)("client.inputScopeTip"),modelValue:e(r).scope,"onUpdate:modelValue":o[2]||(o[2]=a=>e(r).scope=a)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),t(c,{span:12,class:"mb20"},{default:l(()=>[t(s,{label:e(i)("client.authorizedGrantTypes"),prop:"authorizedGrantTypes"},{default:l(()=>[t(K,{"collapse-tags":"","collapse-tags-tooltip":"",multiple:"",modelValue:e(r).authorizedGrantTypes,"onUpdate:modelValue":o[3]||(o[3]=a=>e(r).authorizedGrantTypes=a)},{default:l(()=>[(u(!0),y(v,null,T(e($),(a,m)=>(u(),p(J,{key:m,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),t(c,{span:12,class:"mb20"},{default:l(()=>[t(s,{label:e(i)("client.accessTokenValidity"),prop:"accessTokenValidity"},{default:l(()=>[t(R,{placeholder:e(i)("client.inputAccessTokenValidityTip"),modelValue:e(r).accessTokenValidity,"onUpdate:modelValue":o[4]||(o[4]=a=>e(r).accessTokenValidity=a)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),t(c,{span:12,class:"mb20"},{default:l(()=>[t(s,{label:e(i)("client.refreshTokenValidity"),prop:"refreshTokenValidity"},{default:l(()=>[t(R,{placeholder:e(i)("client.inputRefreshTokenValidityTip"),modelValue:e(r).refreshTokenValidity,"onUpdate:modelValue":o[5]||(o[5]=a=>e(r).refreshTokenValidity=a)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1}),e(r).authorizedGrantTypes.includes("authorization_code")?(u(),p(c,{key:0,span:12,class:"mb20"},{default:l(()=>[t(s,{label:e(i)("client.autoapprove"),prop:"autoapprove"},{default:l(()=>[t(S,{modelValue:e(r).autoapprove,"onUpdate:modelValue":o[6]||(o[6]=a=>e(r).autoapprove=a)},{default:l(()=>[(u(!0),y(v,null,T(e(j),(a,m)=>(u(),p(U,{key:m,label:a.value,border:""},{default:l(()=>[g(_(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})):z("",!0),e(r).authorizedGrantTypes.includes("authorization_code")?(u(),p(c,{key:1,span:12,class:"mb20"},{default:l(()=>[t(s,{label:e(i)("client.authorities"),prop:"authorities"},{default:l(()=>[t(b,{placeholder:e(i)("client.inputAuthoritiesTip"),modelValue:e(r).authorities,"onUpdate:modelValue":o[7]||(o[7]=a=>e(r).authorities=a)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1})):z("",!0),e(r).authorizedGrantTypes.includes("authorization_code")?(u(),p(c,{key:2,span:24,class:"mb20"},{default:l(()=>[t(s,{label:e(i)("client.webServerRedirectUri"),prop:"webServerRedirectUri"},{default:l(()=>[t(b,{placeholder:e(i)("client.inputWebServerRedirectUriTip"),modelValue:e(r).webServerRedirectUri,"onUpdate:modelValue":o[8]||(o[8]=a=>e(r).webServerRedirectUri=a)},null,8,["placeholder","modelValue"])]),_:1},8,["label"])]),_:1})):z("",!0)]),_:1}),t(P,{modelValue:e(w),"onUpdate:modelValue":o[12]||(o[12]=a=>B(w)?w.value=a:null)},{default:l(()=>[t(N,{name:"1",title:"\u5B89\u5168\u5C5E\u6027"},{title:l(()=>[t(M,{class:"header-icon"},{default:l(()=>[t(W)]),_:1}),g(" \u5B89\u5168\u5C5E\u6027 ")]),default:l(()=>[t(G,null,{default:l(()=>[t(c,{span:12,class:"mb20"},{default:l(()=>[t(s,{label:e(i)("client.captchaFlag"),prop:"captchaFlag"},{default:l(()=>[t(S,{modelValue:e(r).captchaFlag,"onUpdate:modelValue":o[9]||(o[9]=a=>e(r).captchaFlag=a)},{default:l(()=>[(u(!0),y(v,null,T(e(A),(a,m)=>(u(),p(U,{key:m,label:a.value,border:""},{default:l(()=>[g(_(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),t(c,{span:12,class:"mb20"},{default:l(()=>[t(s,{label:e(i)("client.encFlag"),prop:"encFlag"},{default:l(()=>[t(S,{modelValue:e(r).encFlag,"onUpdate:modelValue":o[10]||(o[10]=a=>e(r).encFlag=a)},{default:l(()=>[(u(!0),y(v,null,T(e(q),(a,m)=>(u(),p(U,{key:m,label:a.value,border:""},{default:l(()=>[g(_(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1}),t(c,{span:12,class:"mb20"},{default:l(()=>[t(s,{label:e(i)("client.onlineQuantity"),prop:"onlineQuantity"},{default:l(()=>[t(S,{modelValue:e(r).onlineQuantity,"onUpdate:modelValue":o[11]||(o[11]=a=>e(r).onlineQuantity=a)},{default:l(()=>[(u(!0),y(v,null,T(e(q),(a,m)=>(u(),p(U,{key:m,label:a.value,border:""},{default:l(()=>[g(_(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["model","rules"])),[[Z,e(k)]])]),_:1},8,["title","modelValue"])}}});export{me as default};
