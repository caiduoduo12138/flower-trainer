import{l as re,r as t,R as oe,h as te,aa as s,ah as se,m as w,q as ne,t as v,F as x,M as ue,u as a,L as e,E as l,a0 as de,I as c,J as S,j as g,D,A as ie,H as me}from"./vue.4dfaac09.js";import{_ as pe}from"./agree.vue_vue_type_script_setup_true_lang.64da58db.js";import{_ as ce}from"./refuse.vue_vue_type_script_setup_true_lang.e9bc2159.js";import{_ as fe}from"./transfer.vue_vue_type_script_setup_true_lang.b20c349f.js";import{_ as he}from"./FlowNodeFormatData.vue_vue_type_script_setup_true_lang.d6a5f9c0.js";import{e as ye,c as ve}from"./index.72be8179.js";import{u as ge}from"./table.6d12d51c.js";import{au as ke}from"./index.0f5ebb0a.js";import{p as _e}from"./formPermissions.b77839a8.js";import be from"./FormCreate.080cb3f5.js";import"./FlowNodeFormat.93ed98c9.js";const Ce={class:"layout-padding"},we={class:"layout-padding-auto layout-padding-view"},Se={class:"mb8",style:{width:"100%"}},Ve={style:{flex:"auto"}},Te=re({__name:"pending",setup(Ie){const i=t(!1),f=t(!0),R=t(!1),V=t(),k=t(),h=t({}),T=t([]),n=t(),u=oe({pageList:ye,queryForm:{processName:"",taskTime:void 0}}),{tableStyle:I,getDataList:m,currentChangeHandle:E,sizeChangeHandle:L}=ge(u),y=t(),N=t(),q=t(),F=t(),Y=()=>{V.value.resetFields(),m()},_=()=>{i.value=!1,m()},M=()=>{N.value.handle(n.value,y.value)},B=()=>{q.value.handle(n.value,y.value)},J=()=>{F.value.handle(n.value,y.value)};return te(()=>{m()}),(z,o)=>{const K=s("el-input"),b=s("el-form-item"),P=s("el-date-picker"),p=s("el-button"),Q=s("el-form"),H=s("el-row"),$=s("right-toolbar"),d=s("el-table-column"),j=s("el-table"),A=s("pagination"),G=s("el-card"),O=s("el-drawer"),W=se("loading");return w(),ne("div",Ce,[v("div",we,[x(e(H,{shadow:"hover",class:"ml10"},{default:l(()=>[e(Q,{model:a(u).queryForm,ref_key:"queryRef",ref:V,inline:!0,onKeyup:de(a(m),["enter"])},{default:l(()=>[e(b,{label:"\u6D41\u7A0B",prop:"processName"},{default:l(()=>[e(K,{placeholder:"\u8BF7\u8F93\u5165\u6D41\u7A0B\u540D\u79F0",modelValue:a(u).queryForm.processName,"onUpdate:modelValue":o[0]||(o[0]=r=>a(u).queryForm.processName=r)},null,8,["modelValue"])]),_:1}),e(b,{label:"\u53D1\u8D77\u65F6\u95F4",prop:"taskTime"},{default:l(()=>[e(P,{type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss",modelValue:a(u).queryForm.taskTime,"onUpdate:modelValue":o[1]||(o[1]=r=>a(u).queryForm.taskTime=r),"is-range":"","range-separator":"To"},null,8,["modelValue"])]),_:1}),e(b,null,{default:l(()=>[e(p,{icon:"search",type:"primary",onClick:a(m)},{default:l(()=>[c(S(z.$t("common.queryBtn")),1)]),_:1},8,["onClick"]),e(p,{icon:"Refresh",onClick:Y},{default:l(()=>[c(S(z.$t("common.resetBtn")),1)]),_:1})]),_:1})]),_:1},8,["model","onKeyup"])]),_:1},512),[[ue,a(f)]]),e(H,null,{default:l(()=>[v("div",Se,[e($,{showSearch:a(f),"onUpdate:showSearch":o[2]||(o[2]=r=>g(f)?f.value=r:null),class:"ml10",style:{float:"right","margin-right":"20px"},onQueryTable:a(m)},null,8,["showSearch","onQueryTable"])])]),_:1}),x((w(),D(j,{ref:"dataTableRef",data:a(u).dataList,"highlight-current-row":"",border:"","cell-style":a(I).cellStyle,"header-cell-style":a(I).headerCellStyle},{default:l(()=>[e(d,{label:"\u5206\u7EC4",prop:"groupName",width:"100"}),e(d,{label:"\u6D41\u7A0B",prop:"processName"}),e(d,{label:"\u53D1\u8D77\u4EBA",prop:"rootUserName"}),e(d,{label:"\u53D1\u8D77\u65F6\u95F4",prop:"startTime"}),e(d,{label:"\u5F53\u524D\u8282\u70B9",prop:"taskName"}),e(d,{label:"\u4EFB\u52A1\u65F6\u95F4",prop:"taskCreateTime"}),e(d,{fixed:"right",label:"\u64CD\u4F5C",width:"200"},{default:l(r=>[e(p,{type:"primary",size:"small",link:"",icon:"VideoPlay",onClick:Ne=>{return C=r.row,n.value=C,void ve(C.taskId,!1).then(X=>{const{formItems:U,formPerms:Z,formData:ee}=X.data,ae=ke.formCreate.parseJson(U),le=_e(ae,Z);T.value=le,h.value=ee,y.value=U,i.value=!0});var C}},{default:l(()=>[c(" \u5F00\u59CB\u5904\u7406 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","cell-style","header-cell-style"])),[[W,a(R)]]),e(A,ie({onCurrentChange:a(E),onSizeChange:a(L)},a(u).pagination),null,16,["onCurrentChange","onSizeChange"]),a(i)?(w(),D(O,{key:0,modelValue:a(i),"onUpdate:modelValue":o[5]||(o[5]=r=>g(i)?i.value=r:null),direction:"rtl",size:"600px"},{header:l(()=>{var r;return[v("h3",null,S((r=a(n))==null?void 0:r.processName),1)]}),default:l(()=>[e(G,{class:"box-card"},{default:l(()=>[e(be,{rule:a(T),modelValue:a(h),"onUpdate:modelValue":o[3]||(o[3]=r=>g(h)?h.value=r:null),api:a(k),"onUpdate:api":o[4]||(o[4]=r=>g(k)?k.value=r:null)},null,8,["rule","modelValue","api"])]),_:1}),e(he,{disableSelect:!0,"task-id":a(n).taskId,processInstanceId:a(n).processInstanceId,"flow-id":a(n).flowId,ref:"flowNodeFormatRef",class:"mt-4"},null,8,["task-id","processInstanceId","flow-id"])]),footer:l(()=>[v("div",Ve,[e(p,{size:"large",type:"danger",icon:"Close",onClick:B},{default:l(()=>[c("\u62D2\u7EDD")]),_:1}),e(p,{size:"large",type:"primary",icon:"Check",onClick:M},{default:l(()=>[c("\u63D0\u4EA4")]),_:1}),e(p,{size:"large",type:"info",icon:"Share",onClick:J},{default:l(()=>[c("\u8F6C\u529E")]),_:1})])]),_:1},8,["modelValue"])):me("",!0),e(pe,{onTaskSubmitEvent:_,ref_key:"agreeHandler",ref:N},null,512),e(ce,{onTaskSubmitEvent:_,ref_key:"refuseHandler",ref:q},null,512),e(fe,{onTaskSubmitEvent:_,ref_key:"transferHandler",ref:F},null,512)])])}}});export{Te as default};
