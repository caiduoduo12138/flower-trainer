import{l as O,r as s,R as W,h as X,aa as o,ah as Z,m as b,q as ee,t as v,F,M as ae,u as e,L as a,E as r,a0 as le,I as w,J as C,j as f,D as N,A as re,H as oe}from"./vue.4dfaac09.js";import{_ as te}from"./FlowNodeFormatData.vue_vue_type_script_setup_true_lang.d6a5f9c0.js";import se from"./FormCreate.080cb3f5.js";import{q as ne,a as de}from"./index.72be8179.js";import{u as ie}from"./table.6d12d51c.js";import{au as H}from"./index.0f5ebb0a.js";import{p as ue}from"./formPermissions.b77839a8.js";import"./FlowNodeFormat.93ed98c9.js";const me={class:"layout-padding"},pe={class:"layout-padding-auto layout-padding-view"},ce={class:"mb8",style:{width:"100%"}},fe=O({__name:"cc",setup(he){const _=s([]),h=s(),m=s({}),p=s(),d=W({pageList:ne,queryForm:{taskTime:void 0}}),{tableStyle:k,getDataList:i,currentChangeHandle:U,sortChangeHandle:ye,sizeChangeHandle:x}=ie(d),u=s(!1),z=s(!1),c=s(!0),T=s(),D=s(),R=()=>{T.value.resetFields(),i()};return X(()=>{i()}),(V,t)=>{const Y=o("el-date-picker"),I=o("el-form-item"),y=o("el-button"),L=o("el-form"),S=o("el-row"),J=o("right-toolbar"),n=o("el-table-column"),M=o("el-table"),B=o("pagination"),K=o("el-card"),Q=o("el-drawer"),$=Z("loading");return b(),ee("div",me,[v("div",pe,[F(a(S,{shadow:"hover",class:"ml10"},{default:r(()=>[a(L,{model:e(d).queryForm,ref_key:"queryRef",ref:T,inline:!0,onKeyup:le(e(i),["enter"])},{default:r(()=>[a(I,{label:"\u53D1\u8D77\u65F6\u95F4",prop:"taskTime"},{default:r(()=>[a(Y,{type:"datetimerange","value-format":"YYYY-MM-DD HH:mm:ss",modelValue:e(d).queryForm.taskTime,"onUpdate:modelValue":t[0]||(t[0]=l=>e(d).queryForm.taskTime=l),"is-range":"","range-separator":"To"},null,8,["modelValue"])]),_:1}),a(I,null,{default:r(()=>[a(y,{icon:"search",type:"primary",onClick:e(i)},{default:r(()=>[w(C(V.$t("common.queryBtn")),1)]),_:1},8,["onClick"]),a(y,{icon:"Refresh",onClick:R},{default:r(()=>[w(C(V.$t("common.resetBtn")),1)]),_:1})]),_:1})]),_:1},8,["model","onKeyup"])]),_:1},512),[[ae,e(c)]]),a(S,null,{default:r(()=>[v("div",ce,[a(J,{showSearch:e(c),"onUpdate:showSearch":t[1]||(t[1]=l=>f(c)?c.value=l:null),class:"ml10",style:{float:"right","margin-right":"20px"},onQueryTable:e(i)},null,8,["showSearch","onQueryTable"])])]),_:1}),F((b(),N(M,{ref:"dataTableRef",data:e(d).dataList,"highlight-current-row":"",border:"","cell-style":e(k).cellStyle,"header-cell-style":e(k).headerCellStyle},{default:r(()=>[a(n,{label:"\u5206\u7EC4",prop:"groupName",width:"100"}),a(n,{label:"\u6D41\u7A0B",prop:"processName"}),a(n,{label:"\u53D1\u8D77\u4EBA",prop:"startUserName"}),a(n,{label:"\u53D1\u8D77\u65F6\u95F4",prop:"startTime"}),a(n,{label:"\u8282\u70B9",prop:"nodeName"}),a(n,{label:"\u6284\u9001\u65F6\u95F4",prop:"nodeTime"}),a(n,{fixed:"right",label:"\u64CD\u4F5C",width:"200"},{default:r(l=>[a(y,{type:"primary",size:"small",icon:"View",link:"",onClick:ge=>{return g=l.row,p.value=g,void de({id:g.id}).then(j=>{const{formItems:q,formPerms:A,formData:E}=j.data,P=H.formCreate.parseJson(q),G=ue(P,A);_.value=G,m.value=H.formCreate.parseJson(E),D.value=q,u.value=!0});var g}},{default:r(()=>[w(" \u67E5\u770B ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","cell-style","header-cell-style"])),[[$,e(z)]]),a(B,re({onCurrentChange:e(U),onSizeChange:e(x)},e(d).pagination),null,16,["onCurrentChange","onSizeChange"])]),e(u)?(b(),N(Q,{key:0,modelValue:e(u),"onUpdate:modelValue":t[4]||(t[4]=l=>f(u)?u.value=l:null),direction:"rtl",size:"600px"},{header:r(()=>{var l;return[v("h3",null,C((l=e(p))==null?void 0:l.processName),1)]}),default:r(()=>[a(K,{class:"box-card"},{default:r(()=>[a(se,{rule:e(_),modelValue:e(m),"onUpdate:modelValue":t[2]||(t[2]=l=>f(m)?m.value=l:null),api:e(h),"onUpdate:api":t[3]||(t[3]=l=>f(h)?h.value=l:null)},null,8,["rule","modelValue","api"])]),_:1}),a(te,{disableSelect:!0,processInstanceId:e(p).processInstanceId,"flow-id":e(p).flowId,ref:"flowNodeFormatRef"},null,8,["processInstanceId","flow-id"])]),_:1},8,["modelValue"])):oe("",!0)])}}});export{fe as default};
