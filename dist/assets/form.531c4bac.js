import{v as A}from"./index.c33ef0ff.js";import{u as E}from"./dict.10eb31b5.js";import{r as b,u as _}from"./index.0f5ebb0a.js";import{v as M,p as T,a as $,g as B}from"./config.08f63081.js";import{l as S,r as f,R as G,aa as t,ah as H,m as g,D as p,E as r,t as Q,L as o,I as m,u,F as W,q as h,K as I,$ as q,J as X,j as Y,n as Z}from"./vue.4dfaac09.js";const ee={class:"dialog-footer"},le=S({name:"SysMessageSmsDialog"}),ae=S({...le,emits:["refresh"],setup(ue,{expose:U,emit:x}){const N=x,V=f(),d=f(!1),c=f(!1),{yes_no_type:k}=E("yes_no_type"),y=f([{value:"alibaba",label:"\u963F\u91CC\u4E91"},{value:"cloopen",label:"\u5BB9\u8054\u4E91"},{value:"ctyun",label:"\u5929\u7FFC\u4E91"},{value:"emay",label:"\u4EBF\u7F8E\u8F6F\u901A"},{value:"huawei",label:"\u534E\u4E3A\u4E91\u77ED\u4FE1"},{value:"netease",label:"\u7F51\u6613\u4E91\u4FE1"},{value:"tencent",label:"\u817E\u8BAF\u4E91\u77ED\u4FE1"},{value:"unisms",label:"\u5408\u4E00\u77ED\u4FE1"},{value:"yunpian",label:"\u4E91\u7247\u77ED\u4FE1"},{value:"zhutong",label:"\u52A9\u901A\u77ED\u4FE1"},{value:"dingzhong",label:"\u9F0E\u4F17\u77ED\u4FE1"},{value:"yunpian",label:"\u8054\u9E93\u77ED\u4FE1"},{value:"qiniu",label:"\u4E03\u725B\u4E91\u77ED\u4FE1"}]),e=G({configType:"sms",id:"",configKey:"",configName:"",configValue:{supplier:"",accessKeyId:"",accessKeySecret:void 0,signature:"",templateId:"",extParams:""},configStatus:"1"}),D=f({configName:[{required:!0,message:"\u4E1A\u52A1\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:b.overLength,trigger:"blur"}],configKey:[{required:!0,message:"\u4E1A\u52A1\u7F16\u7801\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:b.validatorCapital,trigger:"blur"},{validator:(i,l,n)=>{M(i,l,n,e.id!=="")},trigger:"blur"}],"configValue.supplier":[{required:!0,message:"\u5382\u5546\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"configValue.accessKeyId":[{required:!0,message:"AK \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"configValue.accessKeySecret":[{required:!0,message:"SK \u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"configValue.signature":[{required:!0,message:"\u7B7E\u540D\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"configValue.templateId":[{required:!0,message:"\u6A21\u677F\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],"configValue.extParams":[{validator:b.json,trigger:"blur"}]}),j=async()=>{var i;if(!await V.value.validate().catch(()=>{}))return!1;try{c.value=!0,(i=e.configValue.accessKeySecret)!=null&&i.includes("******")&&(e.configValue.accessKeySecret=void 0),e.configValue=JSON.stringify(e.configValue),e.id?await T(e):await $(e),_().success(e.id?"\u4FEE\u6539\u6210\u529F":"\u6DFB\u52A0\u6210\u529F"),d.value=!1,N("refresh")}catch(l){_().error(l.msg)}finally{c.value=!1}},w=i=>{c.value=!0,B({id:i}).then(l=>{Object.assign(e,l.data[0]),e.configValue=JSON.parse(l.data[0].configValue),e.configValue.accessKeySecret="******"}).finally(()=>{c.value=!1})};return U({openDialog:i=>{d.value=!0,e.id="",Z(()=>{var l;(l=V.value)==null||l.resetFields()}),i&&(e.id=i,w(i))},supplierList:y}),(i,l)=>{const n=t("el-input"),s=t("el-form-item"),v=t("tip"),P=t("el-option"),R=t("el-select"),C=t("el-radio"),F=t("el-radio-group"),J=t("el-form"),K=t("el-button"),L=t("el-dialog"),O=H("loading");return g(),p(L,{title:u(e).id?"\u7F16\u8F91":"\u65B0\u589E",modelValue:u(d),"onUpdate:modelValue":l[10]||(l[10]=a=>Y(d)?d.value=a:null),"close-on-click-modal":!1,draggable:""},{footer:r(()=>[Q("span",ee,[o(K,{onClick:l[9]||(l[9]=a=>d.value=!1)},{default:r(()=>[m("\u53D6\u6D88")]),_:1}),o(K,{type:"primary",onClick:j,disabled:u(c)},{default:r(()=>[m("\u786E\u8BA4")]),_:1},8,["disabled"])])]),default:r(()=>[W((g(),p(J,{ref_key:"dataFormRef",ref:V,model:u(e),rules:u(D),formDialogRef:"","label-width":"100px"},{default:r(()=>[o(s,{label:"\u4E1A\u52A1\u540D\u79F0",prop:"configName"},{default:r(()=>[o(n,{modelValue:u(e).configName,"onUpdate:modelValue":l[0]||(l[0]=a=>u(e).configName=a),placeholder:"\u8BF7\u8F93\u5165\u4E1A\u52A1\u540D\u79F0"},null,8,["modelValue"])]),_:1}),o(s,{label:"\u4E1A\u52A1\u7F16\u7801",prop:"configKey"},{label:r(()=>[m("\u4E1A\u52A1\u7F16\u7801 "),o(v,{content:"\u4EE3\u7801\u4E2D\u901A\u8FC7\u4E1A\u52A1\u7F16\u7801\u53D1\u9001"})]),default:r(()=>[o(n,{modelValue:u(e).configKey,"onUpdate:modelValue":l[1]||(l[1]=a=>u(e).configKey=a),placeholder:"\u8BF7\u8F93\u5165\u4E1A\u52A1\u7F16\u7801"},null,8,["modelValue"])]),_:1}),o(s,{label:"\u4E91\u5382\u5546",prop:"configValue.supplier"},{default:r(()=>[o(R,{modelValue:u(e).configValue.supplier,"onUpdate:modelValue":l[2]||(l[2]=a=>u(e).configValue.supplier=a),placeholder:"\u8BF7\u9009\u62E9\u4E91\u5382\u5546"},{default:r(()=>[(g(!0),h(I,null,q(u(y),a=>(g(),p(P,{key:a.value,label:a.label,value:a.value},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(s,{label:"AK",prop:"configValue.accessKeyId"},{default:r(()=>[o(n,{modelValue:u(e).configValue.accessKeyId,"onUpdate:modelValue":l[3]||(l[3]=a=>u(e).configValue.accessKeyId=a),placeholder:"\u8BF7\u8F93\u5165accessKey"},null,8,["modelValue"])]),_:1}),o(s,{label:"SK",prop:"configValue.accessKeySecret"},{default:r(()=>[o(n,{modelValue:u(e).configValue.accessKeySecret,"onUpdate:modelValue":l[4]||(l[4]=a=>u(e).configValue.accessKeySecret=a),placeholder:"\u8BF7\u8F93\u5165accessKeySecret"},null,8,["modelValue"])]),_:1}),o(s,{label:"\u7B7E\u540D",prop:"configValue.signature"},{default:r(()=>[o(n,{modelValue:u(e).configValue.signature,"onUpdate:modelValue":l[5]||(l[5]=a=>u(e).configValue.signature=a),placeholder:"\u8BF7\u8F93\u5165\u6A21\u677F\u7B7E\u540D"},null,8,["modelValue"])]),_:1}),o(s,{label:"\u6A21\u677FID",prop:"configValue.templateId"},{default:r(()=>[o(n,{modelValue:u(e).configValue.templateId,"onUpdate:modelValue":l[6]||(l[6]=a=>u(e).configValue.templateId=a),placeholder:"\u8BF7\u8F93\u5165\u6A21\u677FID"},null,8,["modelValue"])]),_:1}),o(s,{label:"\u542F\u7528\u72B6\u6001",prop:"configStatus"},{default:r(()=>[o(F,{modelValue:u(e).configStatus,"onUpdate:modelValue":l[7]||(l[7]=a=>u(e).configStatus=a)},{default:r(()=>[(g(!0),h(I,null,q(u(k),(a,z)=>(g(),p(C,{key:z,label:a.value,border:""},{default:r(()=>[m(X(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1}),o(s,{prop:"configValue.extParams"},{label:r(()=>[m("\u6269\u5C55\u53C2\u6570 "),o(v,{content:"\u53C2\u8003 sms4j \u6587\u6863\u914D\u7F6Ejson\u683C\u5F0F"})]),default:r(()=>[o(u(A),{ref:"jsonEditorRef",modelValue:u(e).configValue.extParams,"onUpdate:modelValue":l[8]||(l[8]=a=>u(e).configValue.extParams=a)},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])),[[O,u(c)]])]),_:1},8,["title","modelValue"])}}});export{ae as default};
