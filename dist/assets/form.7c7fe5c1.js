import{d as F,r as C,u as g}from"./index.0f5ebb0a.js";import{p as R,a as S,g as z}from"./wx-account.c6394b81.js";import{l as h,r as b,R as E,aa as n,ah as I,m as _,D as k,E as u,t as J,L as a,I as y,J as v,u as e,F as L,j as N}from"./vue.4dfaac09.js";const O={class:"dialog-footer"},W=h({name:"WxAccountDialog"}),G=h({...W,emits:["refresh"],setup(H,{expose:T,emit:U}){const x=U,{t:o}=F(),f=b(),i=b(!1),m=b(!1),l=E({id:"",name:"",account:"",appid:"",appsecret:"",url:"",token:"",aeskey:""}),q=b({name:[{required:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],account:[{required:!0,message:"\u5FAE\u4FE1\u53F7\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],appid:[{required:!0,message:"appid\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],appsecret:[{required:!0,message:"\u5BC6\u94A5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],url:[{required:!0,message:"url\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"},{validator:C.url,trigger:"blur"}],token:[{required:!0,message:"token\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}],aeskey:[{required:!0,message:"\u52A0\u5BC6\u5BC6\u94A5\u4E0D\u80FD\u4E3A\u7A7A",trigger:"blur"}]}),w=async()=>{if(!await f.value.validate().catch(()=>{}))return!1;l.appsecret&&l.appsecret.includes("*")&&(l.appsecret=void 0),m.value=!0;try{l.id?(await R(l),g().success(o("common.editSuccessText"))):(await S(l),g().success(o("common.addSuccessText"))),i.value=!1,x("refresh")}catch(d){g().error(d.msg)}finally{m.value=!1}},A=d=>{m.value=!0,z(d).then(t=>{Object.assign(l,t.data)}).finally(()=>{m.value=!1})};return T({openDialog:d=>{i.value=!0,l.id="",f.value&&f.value.resetFields(),d&&(l.id=d,A(d))}}),(d,t)=>{const s=n("el-input"),c=n("el-form-item"),p=n("el-col"),B=n("el-row"),$=n("el-form"),V=n("el-button"),D=n("el-dialog"),j=I("loading");return _(),k(D,{modelValue:e(i),"onUpdate:modelValue":t[8]||(t[8]=r=>N(i)?i.value=r:null),title:e(l).id?d.$t("common.editBtn"):d.$t("common.addBtn"),size:"50%"},{footer:u(()=>[J("span",O,[a(V,{onClick:t[7]||(t[7]=r=>i.value=!1)},{default:u(()=>[y(v(d.$t("common.cancelButtonText")),1)]),_:1}),a(V,{type:"primary",onClick:w,disabled:e(m)},{default:u(()=>[y(v(d.$t("common.confirmButtonText")),1)]),_:1},8,["disabled"])])]),default:u(()=>[L((_(),k($,{ref_key:"dataFormRef",ref:f,model:e(l),rules:e(q),"label-width":"90px"},{default:u(()=>[a(B,{gutter:24},{default:u(()=>[a(p,{span:12,class:"mb20"},{default:u(()=>[a(c,{label:e(o)("account.name"),prop:"name"},{default:u(()=>[a(s,{modelValue:e(l).name,"onUpdate:modelValue":t[0]||(t[0]=r=>e(l).name=r),placeholder:e(o)("account.inputNameTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(p,{span:12,class:"mb20"},{default:u(()=>[a(c,{label:e(o)("account.account"),prop:"account"},{default:u(()=>[a(s,{modelValue:e(l).account,"onUpdate:modelValue":t[1]||(t[1]=r=>e(l).account=r),placeholder:e(o)("account.inputAccountTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(p,{span:12,class:"mb20"},{default:u(()=>[a(c,{label:e(o)("account.appid"),prop:"appid"},{default:u(()=>[a(s,{modelValue:e(l).appid,"onUpdate:modelValue":t[2]||(t[2]=r=>e(l).appid=r),placeholder:e(o)("account.inputAppidTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(p,{span:12,class:"mb20"},{default:u(()=>[a(c,{label:e(o)("account.appsecret"),prop:"appsecret"},{default:u(()=>[a(s,{modelValue:e(l).appsecret,"onUpdate:modelValue":t[3]||(t[3]=r=>e(l).appsecret=r),placeholder:e(o)("account.inputAppsecretTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(p,{span:12,class:"mb20"},{default:u(()=>[a(c,{label:e(o)("account.url"),prop:"url"},{default:u(()=>[a(s,{modelValue:e(l).url,"onUpdate:modelValue":t[4]||(t[4]=r=>e(l).url=r),placeholder:e(o)("account.inputUrlTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(p,{span:12,class:"mb20"},{default:u(()=>[a(c,{label:e(o)("account.token"),prop:"token"},{default:u(()=>[a(s,{modelValue:e(l).token,"onUpdate:modelValue":t[5]||(t[5]=r=>e(l).token=r),placeholder:e(o)("account.inputTokenTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1}),a(p,{span:12,class:"mb20"},{default:u(()=>[a(c,{label:e(o)("account.aeskey"),prop:"aeskey"},{default:u(()=>[a(s,{modelValue:e(l).aeskey,"onUpdate:modelValue":t[6]||(t[6]=r=>e(l).aeskey=r),placeholder:e(o)("account.inputAeskeyTip")},null,8,["modelValue","placeholder"])]),_:1},8,["label"])]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[j,e(m)]])]),_:1},8,["modelValue","title"])}}});export{G as default};
